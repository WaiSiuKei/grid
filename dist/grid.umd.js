!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self,t.NilaGrid=e())}(this,function(){"use strict";function t(e,n){if(Array.isArray(e))for(let i=0,o=e.length;i<o;i++)t(e[i],n);else n.push(e)}function e(e){if(null==e)return e;let n=[];return t(e,n),1===n.length&&(n=n[0]),n}function n(){if(Z.component){var t=Z.component.getName();if(t)return" Check the render method of `"+t+"`."}return""}function i(t,e,n,i,o){return{type:t,key:e,ref:n,props:i,_owner:o}}function o(t){if(t){if(Array.isArray(t)){let e={};for(let n=0;n<t.length;++n){let i=o(t[n]);if(i)for(let t in i)e[t]=i[t]}return e}return t}}function r(t,r,s){if(null==t)throw Error("createElement: type should not be null or undefined."+n());let l,h={},u=null,a=null;if(null!=r){a=void 0===r.ref?null:r.ref,u=void 0===r.key?null:String(r.key);for(l in r)$[l]||(h[l]=r[l])}const c=arguments.length-2;if(c>0)if(1!==c||Array.isArray(s)){let t=s;if(c>1){t=new Array(c);for(var d=0;d<c;d++)t[d]=arguments[d+2]}h.children=e(t)}else h.children=s;if(t&&t.defaultProps){let e=t.defaultProps;for(l in e)void 0===h[l]&&(h[l]=e[l])}return h.style&&(Array.isArray(h.style)||"object"==typeof h.style)&&(h.style=o(h.style)),new i(t,u,a,h,Z.component)}function s(){const t=Z.component._instance;if(t)return t;throw new Error("Hooks can only be called inside a component.")}function l(t,e){for(let n=0;n<t.length;n++){const i=t[n],o=e[n];if((i!==o||0===i&&1/i!=1/o)&&(i===i||o===o))return!1}return!0}function h(t,e){a(t,e,!0)}function u(t,e){a(t,e)}function a(t,e,n){const i=s(),o=i.getCurrentHookId(),r=i.hooks;if(i.isComponentRendered()){const n=r[o],{create:create,inputs:prevInputs}=n;n.inputs=e,n.prevInputs=prevInputs,create.current=t}else{const s=t=>{if(!t&&n)return nt(()=>s(!0));const{current:current}=s;current&&(h.current=current(),s.current=null)},h=t=>{if(!t&&n)return nt(()=>h(!0));const{current:current}=h;current?(current(),h.current=null):n&&(s(!0),h(!0))};s.current=t,i.hooks[o]={create:s,destory:h,prevInputs:e,inputs:e},i.didMountHandlers.push(s),i.willUnmountHandlers.push(h),i.didUpdateHandlers.push(()=>{const{prevInputs:prevInputs,inputs:inputs,create:create}=r[o];null!=prevInputs&&l(inputs,prevInputs)||(h(!0),create())})}}function c(t){let e=wt.get(t);return!!e&&(wt.remove(t),e._internal.unmountComponent(),!0)}function d(t,e){let n=null===t,i=null===e;if(n||i)return n===i;let o=typeof t,r=typeof e;return"string"===o||"number"===o?"string"===r||"number"===r:"object"===o&&"object"===r&&t.type===e.type&&t.key===e.key}function p(t,e){if(e){let n=t._pendingCallbacks||(t._pendingCallbacks=[]);n.push(e)}}function f(t,e){if(e){let n=t._pendingStateQueue||(t._pendingStateQueue=[]);n.push(e)}}function m(t,e){return t===e?0!==t||1/t==1/e:t!==t&&e!==e}function _(t,e){if(m(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;let n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(let i=0;i<n.length;i++)if(!_t.call(e,n[i])||!m(t[n[i]],e[n[i]]))return!1;return!0}function v(t,e,n){try{return t()}catch(t){n?n(t):y(e,t)}}function y(t,e){let n;for(;t;){if("function"==typeof t.componentDidCatch){n=t;break}if(!t._internal||!t._internal._parentInstance)break;t=t._internal._parentInstance}if(n){const t=n._internal;if(t){let i=t._pendingCallbacks||(t._pendingCallbacks=[]);i.push(()=>n.componentDidCatch(e))}}else setTimeout(()=>{throw e},0)}function g(t){let e;if(void 0===t||null===t||!1===t||!0===t)e=new lt;else if(Array.isArray(t))e=new dt(t);else if("object"==typeof t&&t.type)e="string"==typeof t.type?new ct(t):new vt(t);else{if("string"!=typeof t&&"number"!=typeof t)throw new Error(`Invalid element type: ${t}. (current: ${"object"==typeof t&&Object.keys(t)||typeof t})`);e=new yt(t)}return e._mountIndex=0,e}function S(t,e,n,i){"function"==typeof n&&(i=n,n=null),n=n||{};let o=wt.mount(t,e,n.parent).getPublicInstance();return i&&i.call(o),o}function b(t,e,n,i,o){return function(){return Nt.useLayoutEffect(function(){}),Nt.createElement("div",null,(n+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"))}}function w(t,e){function n(){this.constructor=t}Dt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function N(t,e,n,i){return new(n||(n=Promise))(function(o,r){function s(t){try{h(i.next(t))}catch(t){r(t)}}function l(t){try{h(i.throw(t))}catch(t){r(t)}}function h(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(s,l)}h((i=i.apply(t,e||[])).next())})}function C(t,e){function n(t){return function(e){return i([t,e])}}function i(n){if(o)throw new TypeError("Generator is already executing.");for(;h;)try{if(o=1,r&&(s=2&n[0]?r.return:n[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,n[1])).done)return s;switch(r=0,s&&(n=[2&n[0],s.value]),n[0]){case 0:case 1:s=n;break;case 4:return h.label++,{value:n[1],done:!1};case 5:h.label++,r=n[1],n=[0];continue;case 7:n=h.ops.pop(),h.trys.pop();continue;default:if(s=h.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){h=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){h.label=n[1];break}if(6===n[0]&&h.label<s[1]){h.label=s[1],s=n;break}if(s&&h.label<s[2]){h.label=s[2],h.ops.push(n);break}s[2]&&h.ops.pop(),h.trys.pop();continue}n=e.call(t,h)}catch(t){n=[6,t],r=0}finally{o=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,r,s,l,h={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return l={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l}function x(t){if(!t.parent||t.parent===t)return null;try{var e=t.location,n=t.parent.location;if(e.protocol!==n.protocol||e.hostname!==n.hostname||e.port!==n.port)return Rt=!0,null}catch(t){return Rt=!0,null}return t.parent}function E(t,e){for(var n,i=t.document.getElementsByTagName("iframe"),o=0,r=i.length;o<r;o++)if((n=i[o]).contentWindow===e)return n;return null}function D(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return Array.isArray(t)?(t.forEach(function(t){return t&&t.dispose()}),[]):0!==e.length?(D(t),D(e),[]):t?(t.dispose(),t):void 0}function A(t){return{dispose:function(){return D(t)}}}function L(t){return{dispose:function(){t()}}}function R(t){M(t)||Zt.onUnexpectedError(t)}function M(t){return t instanceof Error&&t.name===$t&&t.message===$t}function P(t,e,n,i){return new re(t,e,n,i)}function T(t,e){return P(t,"mouseout",function(n){for(var i=n.relatedTarget||n.target;i&&i!==t;)i=i.parentNode;i!==t&&e(n)})}function O(t,e,n,i,o){return new he(t,e,n,i,o)}function W(t){if(!ue){var e=function(t){return setTimeout(function(){return t((new Date).getTime())},0)};ue=self.requestAnimationFrame||self.msRequestAnimationFrame||self.webkitRequestAnimationFrame||self.mozRequestAnimationFrame||self.oRequestAnimationFrame||e}return ue.call(self,t)}function z(t){return document.defaultView.getComputedStyle(t,null)}function I(t,e,n){var i=z(t),o="0";return i&&(o=i.getPropertyValue?i.getPropertyValue(e):i.getAttribute(n)),de(t,o)}function k(t){var e=t.getBoundingClientRect();return{left:e.left+fe.scrollX,top:e.top+fe.scrollY,width:e.width,height:e.height}}function H(t){var e=pe.getBorderLeftWidth(t)+pe.getBorderRightWidth(t),n=pe.getPaddingLeft(t)+pe.getPaddingRight(t);return t.offsetWidth-e-n}function F(t){var e=pe.getBorderTopWidth(t)+pe.getBorderBottomWidth(t),n=pe.getPaddingTop(t)+pe.getPaddingBottom(t);return t.offsetHeight-e-n}function j(t){return new _e(t)}function U(t,e){var n=new Qt(e);return n.preventDefault(),{leftButton:n.leftButton,posx:n.posx,posy:n.posy}}function B(t){var e,n=this,i=!1;return function(){return i?e:(i=!0,e=t.apply(n,arguments))}}function V(t,e){var n=e-t;return function(e){return t+n*K(e)}}function X(t,e,n){return function(i){return i<n?t(i/n):e((i-n)/(1-n))}}function Y(t){return Math.pow(t,3)}function K(t){return 1-Y(1-t)}function Q(t){var e={lazyRender:void 0!==t.lazyRender&&t.lazyRender,className:void 0!==t.className?t.className:"",useShadows:void 0===t.useShadows||t.useShadows,handleMouseWheel:void 0===t.handleMouseWheel||t.handleMouseWheel,flipAxes:void 0!==t.flipAxes&&t.flipAxes,alwaysConsumeMouseWheel:void 0!==t.alwaysConsumeMouseWheel&&t.alwaysConsumeMouseWheel,scrollYToX:void 0!==t.scrollYToX&&t.scrollYToX,mouseWheelScrollSensitivity:void 0!==t.mouseWheelScrollSensitivity?t.mouseWheelScrollSensitivity:1,fastScrollSensitivity:void 0!==t.fastScrollSensitivity?t.fastScrollSensitivity:5,mouseWheelSmoothScroll:void 0===t.mouseWheelSmoothScroll||t.mouseWheelSmoothScroll,listenOnDomNode:void 0!==t.listenOnDomNode?t.listenOnDomNode:null,horizontal:void 0!==t.horizontal?t.horizontal:1,horizontalScrollbarSize:void 0!==t.horizontalScrollbarSize?t.horizontalScrollbarSize:10,horizontalSliderSize:void 0!==t.horizontalSliderSize?t.horizontalSliderSize:0,vertical:void 0!==t.vertical?t.vertical:1,verticalScrollbarSize:void 0!==t.verticalScrollbarSize?t.verticalScrollbarSize:10,verticalSliderSize:void 0!==t.verticalSliderSize?t.verticalSliderSize:0};return e.horizontalSliderSize=void 0!==t.horizontalSliderSize?t.horizontalSliderSize:e.horizontalScrollbarSize,e.verticalSliderSize=void 0!==t.verticalSliderSize?t.verticalSliderSize:e.verticalScrollbarSize,Yt&&(e.className+=" mac"),e}function G(t,e,n){return t>=e?e:t<=n?n:t}function q(t){return(typeof t===Pe.number||t instanceof Number)&&!isNaN(t)}var Z={component:null,mountID:1,sandbox:!0,rootComponents:{},rootInstances:{}};const $={key:!0,ref:!0},J=t=>setTimeout(t,0),tt=t=>{const e=void 0===window.setImmediate?J:window.setImmediate;e(t)},et=t=>setTimeout(t,99),nt=t=>{const e=void 0===window.requestIdleCallback?et:window.requestIdleCallback;e(t)},it=/^on[A-Z]/,ot="http://www.w3.org/2000/svg",rt="object"==typeof document&&"textContent"in document?"textContent":"nodeValue",st={tagNamePrefix:"",eventRegistry:{},createBody(){return document.body},createComment(t){return document.createComment(t)},createEmpty(){return this.createComment(" empty ")},createText(t){return document.createTextNode(t)},updateText(t,e){t[rt]=e},isSVGMode:!1,createElement(t){const e=t._internal._parent;this.isSVGMode="svg"===t.type||e&&e.namespaceURI===ot;let n;if(this.isSVGMode)n=document.createElementNS(ot,t.type);else if(this.tagNamePrefix){let e="function"==typeof this.tagNamePrefix?this.tagNamePrefix(t.type):this.tagNamePrefix;n=document.createElement(e+t.type)}else n=document.createElement(t.type);let i=t.props;return this.setNativeProps(n,i),n},appendChild(t,e){return e.appendChild(t)},removeChild(t,e){(e=e||t.parentNode)&&e.removeChild(t)},replaceChild(t,e,n){(n=n||e.parentNode).replaceChild(t,e)},insertAfter(t,e,n){n=n||e.parentNode;const i=e.nextSibling;i?n.insertBefore(t,i):n.appendChild(t)},insertBefore(t,e,n){(n=n||e.parentNode).insertBefore(t,e)},addEventListener(t,e,n,i){return this.eventRegistry[e]?this.eventRegistry[e]("addEvent",t,e,n,i):t.addEventListener(e,n)},removeEventListener(t,e,n,i){return this.eventRegistry[e]?this.eventRegistry[e]("removeEvent",t,e,n,i):t.removeEventListener(e,n)},removeAllEventListeners(t){},removeAttribute(t,e){if("dangerouslySetInnerHTML"===e)return t.innerHTML=null;if("className"===e&&(e="class"),e in t)try{t[e]=null}catch(t){}t.removeAttribute(e)},setAttribute(t,e,n){if("dangerouslySetInnerHTML"===e)return t.innerHTML=n.__html;if("className"===e&&(e="class"),e in t)try{t[e]=n}catch(i){t.setAttribute(e,n)}else t.setAttribute(e,n)},setStyles(t,e){let n={};for(let e in n){const i=n[e];if(Array.isArray(i))for(let n=0;n<i.length;n++)t.style[e]=i[n];else t.style[e]=i}},setNativeProps(t,e){for(let n in e){let i=e[n];if("children"!==n&&null!=i)if("style"===n)this.setStyles(t,i);else if(it.test(n)){let e=n.slice(2).toLowerCase();this.addEventListener(t,e,i)}else this.setAttribute(t,n,i)}}};class lt{constructor(){this._currentElement=null}mountComponent(t,e,n,i){this._parent=t,this._parentInstance=e,this._context=n;let o={_internal:this},r=this.getNativeNode();return i?i(r,t):st.appendChild(r,t),o}unmountComponent(t){this._nativeNode&&!t&&st.removeChild(this._nativeNode,this._parent),this._nativeNode=null,this._parent=null,this._parentInstance=null,this._context=null}updateComponent(){}getNativeNode(){return null==this._nativeNode&&(this._nativeNode=st.createEmpty()),this._nativeNode}}var ht={update(t,e,n){let i=t&&t.ref||null,o=e&&e.ref||null;i!==o&&(null!=i&&this.detach(t._owner,i,n),null!=o&&this.attach(e._owner,o,n))},attach(t,e,n){if(!t)throw new Error("You might be adding a ref to a component that was not created inside a component's `render` method, or you have multiple copies of Rax loaded.");let i=n.getPublicInstance();"function"==typeof e?e(i):"object"==typeof e?e.current=i:t._instance.refs[e]=i},detach(t,e,n){if("function"==typeof e)e(null);else{let i=n.getPublicInstance();"object"==typeof e&&e.current===i?e.current=null:t._instance.refs[e]===i&&delete t._instance.refs[e]}}},ut=(t,e,n)=>{const i=e&&e.key;const o="string"==typeof i;const r="."+n.toString(36);if(o){let e="$"+i,n=void 0===t[e];return n||console.warn(`Encountered two children with the same key "${i}".`),n?e:r}return r};const at=/^on[A-Z]/;class ct{constructor(t){this._currentElement=t}mountComponent(t,e,n,i){this._parent=t,this._parentInstance=e,this._context=n,this._mountID=Z.mountID++;let o=this._currentElement.props,r={_internal:this,type:this._currentElement.type,props:o},s=o.append;this._instance=r,this._prevStyleCopy=Object.assign({},o.style);let l=this.getNativeNode();"tree"!==s&&(i?i(l,t):st.appendChild(l,t)),this._currentElement&&this._currentElement.ref&&ht.attach(this._currentElement._owner,this._currentElement.ref,this);let h=o.children;return null!=h&&this.mountChildren(h,n),"tree"===s&&(i?i(l,t):st.appendChild(l,t)),r}mountChildren(t,e){Array.isArray(t)||(t=[t]);let n=this._renderedChildren={};return t.map((t,i)=>{let o=g(t);let r=ut(n,t,i);n[r]=o;o._mountIndex=i;let s=o.mountComponent(this.getNativeNode(),this._instance,e,null);return s})}unmountChildren(t){let e=this._renderedChildren;if(e){for(let n in e){let i=e[n];i.unmountComponent(t)}this._renderedChildren=null}}unmountComponent(t){if(this._nativeNode){let e=this._currentElement.ref;e&&ht.detach(this._currentElement._owner,e,this),wt.remove(this._nativeNode),t||st.removeChild(this._nativeNode,this._parent),st.removeAllEventListeners(this._nativeNode)}this.unmountChildren(t),this._currentElement=null,this._nativeNode=null,this._parent=null,this._parentInstance=null,this._context=null,this._instance=null,this._prevStyleCopy=null}updateComponent(t,e,n,i){this._currentElement=e,ht.update(t,e,this);let o=t.props,r=e.props;this.updateProperties(o,r),this.updateChildren(r.children,i)}updateProperties(t,e){let n,i,o;for(n in t)if("children"!==n&&!e.hasOwnProperty(n)&&t.hasOwnProperty(n)&&null!=t[n])if("style"===n){let t=this._prevStyleCopy;for(i in t)t.hasOwnProperty(i)&&((o=o||{})[i]="");this._prevStyleCopy=null}else at.test(n)?"function"==typeof t[n]&&st.removeEventListener(this.getNativeNode(),n.slice(2).toLowerCase(),t[n]):st.removeAttribute(this.getNativeNode(),n,t[n]);for(n in e){let r=e[n],s="style"===n?this._prevStyleCopy:null!=t?t[n]:void 0;if("children"!==n&&e.hasOwnProperty(n)&&r!==s&&(null!=r||null!=s))if("style"===n)if(r?r=this._prevStyleCopy=Object.assign({},r):this._prevStyleCopy=null,null!=s){for(i in s)!s.hasOwnProperty(i)||r&&r.hasOwnProperty(i)||((o=o||{})[i]="");for(i in r)r.hasOwnProperty(i)&&s[i]!==r[i]&&((o=o||{})[i]=r[i])}else o=r;else if(at.test(n)){let t=n.slice(2).toLowerCase();"function"==typeof s&&st.removeEventListener(this.getNativeNode(),t,s,e),"function"==typeof r&&st.addEventListener(this.getNativeNode(),t,r,e)}else null!=r?st.setAttribute(this.getNativeNode(),n,r):st.removeAttribute(this.getNativeNode(),n,t[n])}o&&st.setStyles(this.getNativeNode(),o)}updateChildren(t,e){let n=this._renderedChildren;if(null!=t||null!=n){let i={},o={};if(null!=t){Array.isArray(t)||(t=[t]);for(let r=0,s=t.length;r<s;r++){let s=t[r],l=ut(i,s,r),h=n&&n[l],u=h&&h._currentElement,a=h&&h._context;if(null!=h&&d(u,s))u===s&&a===e||h.updateComponent(u,s,e,e),i[l]=h;else{if(h){let t=h.getNativeNode();h.unmountComponent(!0),o[l]=t}i[l]=g(s)}}}let r,s;if(null!=n)for(let t in n)if(n.hasOwnProperty(t)){let e=n[t],o=!i[t];r?o&&e.unmountComponent():(r=e,s=o)}if(null!=i){let t=0,s=0,l=null,h=[];for(let u in i)if(i.hasOwnProperty(u)){let a=i[u],c=n&&n[u];if(c===a){let e=c.getNativeNode();if(Array.isArray(e)||(e=[e]),c._mountIndex<t){Array.isArray(l)&&(l=l[l.length-1]);for(let t=e.length-1;t>=0;t--)st.insertAfter(e[t],l)}h=h.concat(e),t=Math.max(c._mountIndex,t),c._mountIndex=s}else{null!=c&&(t=Math.max(c._mountIndex,t));let n=this.getNativeNode();Array.isArray(n)&&(n=this._parent),a.mountComponent(n,this._instance,e,(e,n)=>{function i(t){Array.isArray(l)&&(l=l[l.length-1]);let e;if(r&&!l&&(e=r.getNativeNode(),Array.isArray(e)&&(e=e[0])),l)for(let e=t.length-1;e>=0;e--)st.insertAfter(t[e],l);else if(e)for(let n=0;n<t.length;n++)st.insertBefore(t[n],e);else for(let e=0;e<t.length;e++)st.appendChild(t[e],n)}let s=o[u];Array.isArray(e)||(e=[e]);if(s)if(Array.isArray(s)||(s=[s]),c._mountIndex<t){for(let t=0;t<s.length;t++)st.removeChild(s[t]);i(e)}else{let t;for(let n=0;n<e.length;n++){let i=e[n];s[n]?st.replaceChild(i,s[n]):st.insertAfter(i,t),t=i}if(e.length<s.length)for(let t=e.length;t<s.length;t++)st.removeChild(s[t])}else i(e);h=h.concat(e)}),a._mountIndex=s}s++,l=a.getNativeNode()}if(Array.isArray(this._nativeNode)){this._nativeNode.splice(0,this._nativeNode.length);for(let t=0;t<h.length;t++)this._nativeNode.push(h[t])}}s&&r.unmountComponent(),this._renderedChildren=i}}getNativeNode(){return null==this._nativeNode&&(this._nativeNode=st.createElement(this._instance),wt.set(this._nativeNode,this._instance)),this._nativeNode}getPublicInstance(){return this.getNativeNode()}getName(){return this._currentElement.type}}class dt extends ct{constructor(t){super(t)}mountComponent(t,e,n,i){this._parent=t,this._parentInstance=e,this._context=n,this._mountID=Z.mountID++;let o={_internal:this};this._instance=o;let r=this.getNativeNode(),s=this._currentElement;if(this.mountChildren(s,n),i)i(r,t);else for(let e=0;e<r.length;e++){let n=r[e];st.appendChild(n,t)}return o}mountChildren(t,e){let n=this._renderedChildren={},i=this.getNativeNode();return t.map((t,o)=>{let r=g(t);let s=ut(n,t,o);n[s]=r;r._mountIndex=o;let l=r.mountComponent(this._parent,this._instance,e,t=>{if(Array.isArray(t))for(let e=0;e<t.length;e++)i.push(t[e]);else i.push(t)});return l})}unmountComponent(t){if(this._nativeNode&&(wt.remove(this._nativeNode),!t))for(let t=0;t<this._nativeNode.length;t++)st.removeChild(this._nativeNode[t]);this.unmountChildren(!0),this._currentElement=null,this._nativeNode=null,this._parent=null,this._parentInstance=null,this._context=null,this._instance=null}updateComponent(t,e,n,i){this._currentElement=e,this.updateChildren(this._currentElement,i)}getNativeNode(){return null==this._nativeNode&&(this._nativeNode=[]),this._nativeNode}getPublicInstance(){return this.getNativeNode()}getName(){return"fragment"}}class pt{constructor(t,e,n){this.props=t,this.context=e,this.refs={},this.updater=n}isComponentClass(){}setState(t,e){this.updater.setState(this,t,e)}forceUpdate(t){this.updater.forceUpdate(this,t)}}class ft extends pt{constructor(t,e){super(),this.pureRender=t,this.hooksIndex=0,this.hooks={},this.didMountHandlers=[],this.didUpdateHandlers=[],this.willUnmountHandlers=[],t.forwardRef&&(this.prevForwardRef=this.forwardRef=e);const n=t.compares;n&&(this.shouldComponentUpdate=(t=>{let e=!0;for(let i=n.length-1;i>-1&&!(e=n[i](this.props,t));i--);return!e||this.prevForwardRef!==this.forwardRef}))}getCurrentHookId(){return++this.hooksIndex}readContext(t){const e=t.Provider,n=this._internal._context[e.contextProp];if(n){const t=this._internal._mountID;if(!n[t]){n[t]={};const e=e=>{e!==n[t].renderedContext&&this.update()};n.on(e),this.willUnmountHandlers.push(()=>{delete n[t];n.off(e)})}return n[t].renderedContext=n.value}return e.defaultValue}isComponentRendered(){return Boolean(this._internal._renderedComponent)}componentDidMount(){this.didMountHandlers.forEach(t=>t())}componentDidUpdate(){this.didUpdateHandlers.forEach(t=>t())}componentWillUnmount(){this.willUnmountHandlers.forEach(t=>t())}update(){tt(()=>this.forceUpdate())}render(){return this.hooksIndex=0,this.pureRender(this.props,this.forwardRef?this.forwardRef:this.context)}}const mt={setState:function(t,e,n){let i=t._internal;i&&(f(i,e),p(i,n),!i._pendingState&&i._renderedComponent&&this.runUpdate(t))},forceUpdate:function(t,e){let n=t._internal;n&&(n._pendingForceUpdate=!0,p(n,e),n._renderedComponent&&this.runUpdate(t))},runUpdate:function(t){let e=t._internal,n=e._pendingCallbacks;e._pendingCallbacks=null;let i=e._currentElement,o=e._context;(e._pendingStateQueue||e._pendingForceUpdate)&&e.updateComponent(i,i,o,o),this.runCallbacks(n,t)},runCallbacks(t,e){if(t)for(let n=0;n<t.length;n++)t[n].call(e)}},_t=Object.prototype.hasOwnProperty;class vt{constructor(t){this._currentElement=t}getName(){let t=this._currentElement.type,e=this._instance&&this._instance.constructor;return t.displayName||e&&e.displayName||t.name||e&&e.name||null}mountComponent(t,e,n,i){this._parent=t,this._parentInstance=e,this._context=n,this._mountID=Z.mountID++,this._updateCount=0;let o,r,s=this._currentElement,l=s.type,h=s.ref,u=s.props,a=l.prototype,c=a&&l.prototype.isComponentClass,d=a&&l.prototype.render,p=this._processContext(n);try{if(c||d)o=new l(u,p,mt);else{if("function"!=typeof l)throw new Error(`Invalid component type: ${l}. (current: ${"object"==typeof l&&Object.keys(l)||typeof l})`);o=new ft(l,h)}}catch(t){return y(e,t),o}o.props=u,o.context=p,o.refs={},o.updater=mt,o._internal=this,this._instance=o;let f=o.state;void 0===f&&(o.state=f=null);let m=null,_=t=>{m=t};o.componentWillMount&&v(()=>{o.componentWillMount()},o,_),null==r&&(Z.component=this,o.state=this._processPendingState(u,p),v(()=>{r=o.render()},o,_),Z.component=null),this._renderedComponent=g(r),this._renderedComponent.mountComponent(this._parent,o,this._processChildContext(n),i),m&&y(o,m),!this._currentElement.type.forwardRef&&h&&ht.attach(s._owner,h,this),o.componentDidMount&&v(()=>{o.componentDidMount()},o);let S=this._pendingCallbacks;return S&&(this._pendingCallbacks=null,mt.runCallbacks(S,o)),o}unmountComponent(t){let e=this._instance;if(e){if(e.componentWillUnmount&&v(()=>{e.componentWillUnmount()},e),e._internal=null,null!=this._renderedComponent){let e=this._currentElement.ref;!this._currentElement.type.forwardRef&&e&&ht.detach(this._currentElement._owner,e,this),this._renderedComponent.unmountComponent(t),this._renderedComponent=null,this._instance=null}this._currentElement=null,this._parentInstance=null,this._pendingStateQueue=null,this._pendingForceUpdate=!1,this._context=null}}_processContext(t){let e=this._currentElement.type.contextTypes;if(!e)return{};let n={};for(let i in e)n[i]=t[i];return n}_processChildContext(t){let e=this._instance,n=e.getChildContext&&e.getChildContext();return n?Object.assign({},t,n):t}_processPendingState(t,e){let n=this._instance,i=this._pendingStateQueue;if(!i)return n.state;this._pendingStateQueue=null;let o=Object.assign({},n.state);for(let r=0;r<i.length;r++){let s=i[r];Object.assign(o,"function"==typeof s?s.call(n,o,t,e):s)}return o}updateComponent(t,e,n,i){let o=this._instance;o||console.error(`Update component '${this.getName()}' that has already been unmounted (or failed to mount).`);let r,s,l=!1;this._context===i?r=o.context:(r=this._processContext(i),l=!0),t===e?s=e.props:(s=e.props,l=!0),l&&o.componentWillReceiveProps&&(this._pendingState=!0,v(()=>{o.componentWillReceiveProps(s,r)},o),this._pendingState=!1),this._currentElement.type.forwardRef?(o.prevForwardRef=t.ref,o.forwardRef=e.ref):ht.update(t,e,this);let h=!0,u=o.props,a=o.state,c=this._processPendingState(s,r);if(this._pendingForceUpdate||(o.shouldComponentUpdate?h=v(()=>o.shouldComponentUpdate(s,c,r),o):o.isPureComponentClass&&(h=!_(u,s)||!_(a,c))),h){this._pendingForceUpdate=!1;let t=o.context;v(()=>{o.componentWillUpdate&&o.componentWillUpdate(s,c,r)},o),this._currentElement=e,this._context=i,o.props=s,o.state=c,o.context=r,this._updateRenderedComponent(i),v(()=>{o.componentDidUpdate&&o.componentDidUpdate(u,a,t)},o),this._updateCount++}else this._currentElement=e,this._context=i,o.props=s,o.state=c,o.context=r;let d=this._pendingCallbacks;d&&(this._pendingCallbacks=null,mt.runCallbacks(d,o))}_updateRenderedComponent(t){let e,n=this._renderedComponent,i=n._currentElement,o=this._instance;if(Z.component=this,v(()=>{e=o.render()},o),Z.component=null,d(i,e)){const o=n._context,r=this._processChildContext(t);i===e&&o===r||n.updateComponent(i,e,o,r)}else{let i=n.getNativeNode();n.unmountComponent(!0),this._renderedComponent=g(e),this._renderedComponent.mountComponent(this._parent,o,this._processChildContext(t),(t,e)=>{Array.isArray(t)||(t=[t]);Array.isArray(i)||(i=[i]);let n;for(let o=0;o<t.length;o++){let r=t[o];i[o]?st.replaceChild(r,i[o]):n?st.insertAfter(r,n):st.appendChild(r,e),n=r}if(t.length<i.length)for(let e=t.length;e<i.length;e++)st.removeChild(i[e])})}}getNativeNode(){let t=this._renderedComponent;if(t)return t.getNativeNode()}getPublicInstance(){let t=this._instance;return t instanceof ft?null:t}}class yt{constructor(t){this._currentElement=t,this._stringText=String(t)}mountComponent(t,e,n,i){this._parent=t,this._parentInstance=e,this._context=n,this._mountID=Z.mountID++;let o=this.getNativeNode();return i?i(o,t):st.appendChild(o,t),{_internal:this}}unmountComponent(t){this._nativeNode&&!t&&st.removeChild(this._nativeNode,this._parent),this._currentElement=null,this._nativeNode=null,this._parent=null,this._parentInstance=null,this._context=null,this._stringText=null}updateComponent(t,e,n){t!==e&&(this._currentElement=e,this._stringText=String(e),st.updateText(this.getNativeNode(),this._stringText))}getNativeNode(){return null==this._nativeNode&&(this._nativeNode=document.createTextNode(this._stringText)),this._nativeNode}}let gt=1;class St extends pt{constructor(...t){super(...t),this.rootID=gt++}isRootComponent(){}render(){return this.props.children}getPublicInstance(){return this.getRenderedComponent().getPublicInstance()}getRenderedComponent(){return this._internal._renderedComponent}}const bt="$$instance";var wt={set(t,e){t[bt]||(t[bt]=e,e.rootID&&(Z.rootInstances[e.rootID]=e,Z.rootComponents[e.rootID]=e._internal))},get(t){return t[bt]},remove(t){let e=this.get(t);e&&(t[bt]=null,e.rootID&&(delete Z.rootComponents[e.rootID],delete Z.rootInstances[e.rootID]))},mount(t,e,n){null==e&&(e=document.body);let i;if(n){let t=n._internal;i=t._processChildContext(t._context)}let o=this.get(e);if(o&&o.isRootComponent){let n=o.getRenderedComponent(),r=n._currentElement;if(d(r,t)){let e=n._context,s=i||e;return r===t&&e===s||n.updateComponent(r,t,e,s),o}c(e)}let s=g(r(St,null,t)),l=i||{},h=s.mountComponent(e,null,l);return this.set(e,h),h}};const Nt={createElement:r,useEffect:h,useLayoutEffect:u},Ct={unmountComponentAtNode:c,render:S};var xt={defaultColumnWidth:80,showHeaderRow:!0,rowHeight:20},Et={formatter:b},Dt=function(t,e){return(Dt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},At=function(){return(At=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t}).apply(this,arguments)},Lt=function(){function t(t){this.items=t.map(function(t,e){return At({},t,{_gridId:e})})}return t}(),Rt=!1,Mt=null,Pt=function(){function t(){}return t.getSameOriginWindowChain=function(){if(!Mt){Mt=[];var t,e=window;do{(t=x(e))?Mt.push({window:e,iframeElement:E(t,e)}):Mt.push({window:e,iframeElement:null}),e=t}while(e)}return Mt.slice(0)},t.hasDifferentOriginAncestor=function(){return Mt||this.getSameOriginWindowChain(),Rt},t.getPositionOfChildWindowRelativeToAncestorWindow=function(t,e){if(!e||t===e)return{top:0,left:0};for(var n=0,i=0,o=this.getSameOriginWindowChain(),r=0;r<o.length;r++){var s=o[r];if(s.window===e)break;if(!s.iframeElement)break;var l=s.iframeElement.getBoundingClientRect();n+=l.top,i+=l.left}return{top:n,left:i}},t}(),Tt=navigator.userAgent,Ot=Tt.indexOf("Trident")>=0,Wt=Tt.indexOf("Edge/")>=0,zt=(Tt.indexOf("Opera"),Tt.indexOf("Firefox"),Tt.indexOf("AppleWebKit"),Tt.indexOf("Chrome"),-1===Tt.indexOf("Chrome")&&Tt.indexOf("Safari")>=0),It=(Tt.indexOf("iPad"),Wt&&Tt.indexOf("WebView/"),!1),kt=!1,Ht="undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.electron&&"renderer"===process.type;if("object"!=typeof navigator||Ht){if("object"==typeof process){It="win32"===process.platform,kt="darwin"===process.platform,"linux"===process.platform,"en";var Ft=process.env.VSCODE_NLS_CONFIG;if(Ft)try{var jt=JSON.parse(Ft);jt.availableLanguages["*"];jt.locale,jt._translationsConfigFile}catch(t){}}}else{var Ut=navigator.userAgent;It=Ut.indexOf("Windows")>=0,kt=Ut.indexOf("Macintosh")>=0,Ut.indexOf("Linux")>=0,navigator.language}var Bt;!function(t){t[t.Web=0]="Web",t[t.Mac=1]="Mac",t[t.Linux=2]="Linux",t[t.Windows=3]="Windows"}(Bt||(Bt={}));var Vt,Xt=It,Yt=kt;!function(t){t[t.Windows=1]="Windows",t[t.Macintosh=2]="Macintosh",t[t.Linux=3]="Linux"}(Vt||(Vt={}));var Kt,Qt=function(){function t(t){this.timestamp=Date.now(),this.browserEvent=t,this.leftButton=0===t.button,this.middleButton=1===t.button,this.rightButton=2===t.button,this.target=t.target,this.detail=t.detail||1,"dblclick"===t.type&&(this.detail=2),this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,"number"==typeof t.pageX?(this.posx=t.pageX,this.posy=t.pageY):(this.posx=t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,this.posy=t.clientY+document.body.scrollTop+document.documentElement.scrollTop);var e=Pt.getPositionOfChildWindowRelativeToAncestorWindow(self,t.view);this.posx-=e.left,this.posy-=e.top}return t.prototype.preventDefault=function(){this.browserEvent.preventDefault&&this.browserEvent.preventDefault()},t.prototype.stopPropagation=function(){this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()},t}(),Gt=(function(t){function e(e){var n=t.call(this,e)||this;return n.dataTransfer=e.dataTransfer,n}w(e,t)}(Qt),function(){function t(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=0),this.browserEvent=t||null,this.target=t?t.target||t.targetNode||t.srcElement:null,this.deltaY=n,this.deltaX=e,t){var i=t,o=t;void 0!==i.wheelDeltaY?this.deltaY=i.wheelDeltaY/120:void 0!==o.VERTICAL_AXIS&&o.axis===o.VERTICAL_AXIS&&(this.deltaY=-o.detail/3),void 0!==i.wheelDeltaX?this.deltaX=zt&&Xt?-i.wheelDeltaX/120:i.wheelDeltaX/120:void 0!==o.HORIZONTAL_AXIS&&o.axis===o.HORIZONTAL_AXIS&&(this.deltaX=-t.detail/3),0===this.deltaY&&0===this.deltaX&&t.wheelDelta&&(this.deltaY=t.wheelDelta/120)}}return t.prototype.preventDefault=function(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()},t.prototype.stopPropagation=function(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()},t}()),qt=function(){function t(){this._toDispose=[],this._lifecycle_disposable_isDisposed=!1}return Object.defineProperty(t.prototype,"toDispose",{get:function(){return this._toDispose},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._lifecycle_disposable_isDisposed=!0,this._toDispose=D(this._toDispose)},t.prototype._register=function(t){return this._lifecycle_disposable_isDisposed?(console.warn("Registering disposable on object that has already been disposed."),t.dispose()):this._toDispose.push(t),t},t.None=Object.freeze({dispose:function(){}}),t}(),Zt=new(function(){function t(){this.listeners=[],this.unexpectedErrorHandler=function(t){setTimeout(function(){if(t.stack)throw new Error(t.message+"\n\n"+t.stack);throw t},0)}}return t.prototype.addListener=function(t){var e=this;return this.listeners.push(t),function(){e._removeListener(t)}},t.prototype.emit=function(t){this.listeners.forEach(function(e){e(t)})},t.prototype._removeListener=function(t){this.listeners.splice(this.listeners.indexOf(t),1)},t.prototype.setUnexpectedErrorHandler=function(t){this.unexpectedErrorHandler=t},t.prototype.getUnexpectedErrorHandler=function(){return this.unexpectedErrorHandler},t.prototype.onUnexpectedError=function(t){this.unexpectedErrorHandler(t),this.emit(t)},t.prototype.onUnexpectedExternalError=function(t){this.unexpectedErrorHandler(t)},t}()),$t="Canceled",Jt=function(t){function e(e,n){var i=t.call(this)||this;return i._token=-1,"function"==typeof e&&"number"==typeof n&&i.setIfNotSet(e,n),i}return w(e,t),e.prototype.dispose=function(){this.cancel(),t.prototype.dispose.call(this)},e.prototype.cancel=function(){-1!==this._token&&(clearTimeout(this._token),this._token=-1)},e.prototype.cancelAndSet=function(t,e){var n=this;this.cancel(),this._token=setTimeout(function(){n._token=-1,t()},e)},e.prototype.setIfNotSet=function(t,e){var n=this;-1===this._token&&(this._token=setTimeout(function(){n._token=-1,t()},e))},e}(qt),te=new(function(){function t(){}return t.prototype._findClassName=function(t,e){var n=t.className;if(!n)return void(this._lastStart=-1);e=e.trim();var i=n.length,o=e.length;if(0===o)return void(this._lastStart=-1);if(i<o)return void(this._lastStart=-1);if(n===e)return this._lastStart=0,void(this._lastEnd=i);for(var r,s=-1;(s=n.indexOf(e,s+1))>=0;){if(r=s+o,(0===s||32===n.charCodeAt(s-1))&&32===n.charCodeAt(r))return this._lastStart=s,void(this._lastEnd=r+1);if(s>0&&32===n.charCodeAt(s-1)&&r===i)return this._lastStart=s-1,void(this._lastEnd=r);if(0===s&&r===i)return this._lastStart=0,void(this._lastEnd=r)}this._lastStart=-1},t.prototype.hasClass=function(t,e){return this._findClassName(t,e),-1!==this._lastStart},t.prototype.addClasses=function(t){for(var e=this,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];n.forEach(function(n){return n.split(" ").forEach(function(n){return e.addClass(t,n)})})},t.prototype.addClass=function(t,e){t.className?(this._findClassName(t,e),-1===this._lastStart&&(t.className=t.className+" "+e)):t.className=e},t.prototype.removeClass=function(t,e){this._findClassName(t,e),-1!==this._lastStart&&(t.className=t.className.substring(0,this._lastStart)+t.className.substring(this._lastEnd))},t.prototype.removeClasses=function(t){for(var e=this,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];n.forEach(function(n){return n.split(" ").forEach(function(n){return e.removeClass(t,n)})})},t.prototype.toggleClass=function(t,e,n){this._findClassName(t,e),-1===this._lastStart||void 0!==n&&n||this.removeClass(t,e),-1!==this._lastStart||void 0!==n&&!n||this.addClass(t,e)},t}()),ee=new(function(){function t(){}return t.prototype.hasClass=function(t,e){return Boolean(e)&&t.classList&&t.classList.contains(e)},t.prototype.addClasses=function(t){for(var e=this,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];n.forEach(function(n){return n.split(" ").forEach(function(n){return e.addClass(t,n)})})},t.prototype.addClass=function(t,e){e&&t.classList&&t.classList.add(e)},t.prototype.removeClass=function(t,e){e&&t.classList&&t.classList.remove(e)},t.prototype.removeClasses=function(t){for(var e=this,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];n.forEach(function(n){return n.split(" ").forEach(function(n){return e.removeClass(t,n)})})},t.prototype.toggleClass=function(t,e,n){t.classList&&t.classList.toggle(e,n)},t}()),ne=Ot?te:ee,ie=(ne.hasClass.bind(ne),ne.addClass.bind(ne)),oe=(ne.addClasses.bind(ne),ne.removeClass.bind(ne),ne.removeClasses.bind(ne),ne.toggleClass.bind(ne)),re=function(){function t(t,e,n,i){this._node=t,this._type=e,this._handler=n,this._useCapture=i||!1,this._node.addEventListener(this._type,this._handler,this._useCapture)}return t.prototype.dispose=function(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._useCapture),this._node=null,this._handler=null)},t}(),se=16,le=function(t,e){return e},he=function(t){function e(e,n,i,o,r){void 0===o&&(o=le),void 0===r&&(r=se);var s=t.call(this)||this,l=null,h=0,u=s._register(new Jt),a=function(){h=(new Date).getTime(),i(l),l=null};return s._register(P(e,n,function(t){l=o(l,t);var e=(new Date).getTime()-h;e>=r?(u.cancel(),a()):u.setIfNotSet(a,r-e)})),s}return w(e,t),e}(qt),ue=null,ae=function(){function t(t,e){void 0===e&&(e=0),this._runner=t,this.priority=e,this._canceled=!1}return t.prototype.dispose=function(){this._canceled=!0},t.prototype.execute=function(){if(!this._canceled)try{this._runner()}catch(t){R(t)}},t.sort=function(t,e){return e.priority-t.priority},t}();!function(){var t=[],e=null,n=!1,i=function(){for(n=!1,e=t,t=[];e.length>0;)e.sort(ae.sort),e.shift().execute()};Kt=function(e,o){void 0===o&&(o=0);var r=new ae(e,o);return t.push(r),n||(n=!0,W(i)),r}}();var ce,de=function(){return function(t,e){return parseFloat(e)||0}}(),pe={getBorderLeftWidth:function(t){return I(t,"border-left-width","borderLeftWidth")},getBorderRightWidth:function(t){return I(t,"border-right-width","borderRightWidth")},getBorderTopWidth:function(t){return I(t,"border-top-width","borderTopWidth")},getBorderBottomWidth:function(t){return I(t,"border-bottom-width","borderBottomWidth")},getPaddingLeft:function(t){return I(t,"padding-left","paddingLeft")},getPaddingRight:function(t){return I(t,"padding-right","paddingRight")},getPaddingTop:function(t){return I(t,"padding-top","paddingTop")},getPaddingBottom:function(t){return I(t,"padding-bottom","paddingBottom")},getMarginLeft:function(t){return I(t,"margin-left","marginLeft")},getMarginTop:function(t){return I(t,"margin-top","marginTop")},getMarginRight:function(t){return I(t,"margin-right","marginRight")},getMarginBottom:function(t){return I(t,"margin-bottom","marginBottom")},__commaSentinel:!1},fe=new(function(){function t(){}return Object.defineProperty(t.prototype,"scrollX",{get:function(){return"number"==typeof window.scrollX?window.scrollX:document.body.scrollLeft+document.documentElement.scrollLeft},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollY",{get:function(){return"number"==typeof window.scrollY?window.scrollY:document.body.scrollTop+document.documentElement.scrollTop},enumerable:!0,configurable:!0}),t}()),me={CLICK:"click",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",UNLOAD:"unload",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend"},_e=function(){function t(t){this.domNode=t,this._maxWidth=-1,this._width=-1,this._height=-1,this._top=-1,this._left=-1,this._bottom=-1,this._right=-1,this._fontFamily="",this._fontWeight="",this._fontSize=-1,this._lineHeight=-1,this._letterSpacing=-100,this._className="",this._display="",this._position="",this._visibility="",this._layerHint=!1}return t.prototype.setMaxWidth=function(t){this._maxWidth!==t&&(this._maxWidth=t,this.domNode.style.maxWidth=this._maxWidth+"px")},t.prototype.setWidth=function(t){this._width!==t&&(this._width=t,this.domNode.style.width=this._width+"px")},t.prototype.setHeight=function(t){this._height!==t&&(this._height=t,this.domNode.style.height=this._height+"px")},t.prototype.setTop=function(t){this._top!==t&&(this._top=t,this.domNode.style.top=this._top+"px")},t.prototype.unsetTop=function(){-1!==this._top&&(this._top=-1,this.domNode.style.top="")},t.prototype.setLeft=function(t){this._left!==t&&(this._left=t,this.domNode.style.left=this._left+"px")},t.prototype.setBottom=function(t){this._bottom!==t&&(this._bottom=t,this.domNode.style.bottom=this._bottom+"px")},t.prototype.setRight=function(t){this._right!==t&&(this._right=t,this.domNode.style.right=this._right+"px")},t.prototype.setFontFamily=function(t){this._fontFamily!==t&&(this._fontFamily=t,this.domNode.style.fontFamily=this._fontFamily)},t.prototype.setFontWeight=function(t){this._fontWeight!==t&&(this._fontWeight=t,this.domNode.style.fontWeight=this._fontWeight)},t.prototype.setFontSize=function(t){this._fontSize!==t&&(this._fontSize=t,this.domNode.style.fontSize=this._fontSize+"px")},t.prototype.setLineHeight=function(t){this._lineHeight!==t&&(this._lineHeight=t,this.domNode.style.lineHeight=this._lineHeight+"px")},t.prototype.setLetterSpacing=function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.domNode.style.letterSpacing=this._letterSpacing+"px")},t.prototype.setClassName=function(t){this._className!==t&&(this._className=t,this.domNode.className=this._className)},t.prototype.toggleClassName=function(t,e){oe(this.domNode,t,e),this._className=this.domNode.className},t.prototype.setDisplay=function(t){this._display!==t&&(this._display=t,this.domNode.style.display=this._display)},t.prototype.setPosition=function(t){this._position!==t&&(this._position=t,this.domNode.style.position=this._position)},t.prototype.setVisibility=function(t){this._visibility!==t&&(this._visibility=t,this.domNode.style.visibility=this._visibility)},t.prototype.setLayerHinting=function(t){this._layerHint!==t&&(this._layerHint=t,this.domNode.style.willChange=this._layerHint?"transform":"auto")},t.prototype.setAttribute=function(t,e){this.domNode.setAttribute(t,e)},t.prototype.removeAttribute=function(t){this.domNode.removeAttribute(t)},t.prototype.appendChild=function(t){this.domNode.appendChild(t.domNode)},t.prototype.removeChild=function(t){this.domNode.removeChild(t.domNode)},t}(),ve=function(t){function e(){var e=t.call(this)||this;return e.hooks=[],e.mouseMoveEventMerger=null,e.mouseMoveCallback=null,e.onStopCallback=null,e}return w(e,t),e.prototype.dispose=function(){this.stopMonitoring(!1),t.prototype.dispose.call(this)},e.prototype.stopMonitoring=function(t){if(this.isMonitoring()){this.hooks=D(this.hooks),this.mouseMoveEventMerger=null,this.mouseMoveCallback=null;var e=this.onStopCallback;this.onStopCallback=null,t&&e&&e()}},e.prototype.isMonitoring=function(){return this.hooks.length>0},e.prototype.startMonitoring=function(t,e,n){var i=this;if(!this.isMonitoring()){this.mouseMoveEventMerger=t,this.mouseMoveCallback=e,this.onStopCallback=n;for(var o=Pt.getSameOriginWindowChain(),r=0;r<o.length;r++)this.hooks.push(O(o[r].window.document,"mousemove",function(t){return i.mouseMoveCallback(t)},function(t,e){return i.mouseMoveEventMerger(t,e)})),this.hooks.push(P(o[r].window.document,"mouseup",function(t){return i.stopMonitoring(!0)}));if(Pt.hasDifferentOriginAncestor()){var s=o[o.length-1];this.hooks.push(P(s.window.document,"mouseout",function(t){"html"===new Qt(t).target.tagName.toLowerCase()&&i.stopMonitoring(!0)})),this.hooks.push(P(s.window.document,"mouseover",function(t){"html"===new Qt(t).target.tagName.toLowerCase()&&i.stopMonitoring(!0)})),this.hooks.push(P(s.window.document.body,"mouseleave",function(t){i.stopMonitoring(!0)}))}}},e}(qt),ye=function(t){function e(e,n,i){var o=t.call(this)||this;return o._visibility=e,o._visibleClassName=n,o._invisibleClassName=i,o._domNode=null,o._isVisible=!1,o._isNeeded=!1,o._shouldBeVisible=!1,o._revealTimer=o._register(new Jt),o}return w(e,t),e.prototype.applyVisibilitySetting=function(t){return 2!==this._visibility&&(3===this._visibility||t)},e.prototype.setShouldBeVisible=function(t){var e=this.applyVisibilitySetting(t);this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())},e.prototype.setIsNeeded=function(t){this._isNeeded!==t&&(this._isNeeded=t,this.ensureVisibility())},e.prototype.setDomNode=function(t){this._domNode=t,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)},e.prototype.ensureVisibility=function(){if(!this._isNeeded)return void this._hide(!1);this._shouldBeVisible?this._reveal():this._hide(!0)},e.prototype._reveal=function(){var t=this;this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(function(){t._domNode&&t._domNode.setClassName(t._visibleClassName)},0))},e.prototype._hide=function(t){this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,this._domNode&&this._domNode.setClassName(this._invisibleClassName+(t?" fade":"")))},e}(qt),ge=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.onclick=function(t,e){this._register(P(t,me.CLICK,function(t){return e(new Qt(t))}))},e.prototype.onmousedown=function(t,e){this._register(P(t,me.MOUSE_DOWN,function(t){return e(new Qt(t))}))},e.prototype.onmouseover=function(t,e){this._register(P(t,me.MOUSE_OVER,function(t){return e(new Qt(t))}))},e.prototype.onnonbubblingmouseout=function(t,e){this._register(T(t,function(t){return e(new Qt(t))}))},e.prototype.onblur=function(t,e){this._register(P(t,me.BLUR,e))},e.prototype.onfocus=function(t,e){this._register(P(t,me.FOCUS,e))},e}(qt),Se=function(t){function e(e){var n=t.call(this)||this;return n._lazyRender=e.lazyRender,n._host=e.host,n._scrollable=e.scrollable,n._scrollbarState=e.scrollbarState,n._visibilityController=n._register(new ye(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),n._mouseMoveMonitor=n._register(new ve),n._shouldRender=!0,n.domNode=j(document.createElement("div")),n.domNode.setAttribute("role","presentation"),n.domNode.setAttribute("aria-hidden","true"),n._visibilityController.setDomNode(n.domNode),n.domNode.setPosition("absolute"),n.onmousedown(n.domNode.domNode,function(t){return n._domNodeMouseDown(t)}),n}return w(e,t),e.prototype._createSlider=function(t,e,n,i){var o=this;this.slider=j(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(t),this.slider.setLeft(e),"number"==typeof n&&this.slider.setWidth(n),"number"==typeof i&&this.slider.setHeight(i),this.slider.setLayerHinting(!0),this.domNode.domNode.appendChild(this.slider.domNode),this.onmousedown(this.slider.domNode,function(t){t.leftButton&&(t.preventDefault(),o._sliderMouseDown(t,function(){}))})},e.prototype._onElementSize=function(t){return this._scrollbarState.setVisibleSize(t)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender},e.prototype._onElementScrollSize=function(t){return this._scrollbarState.setScrollSize(t)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender},e.prototype._onElementScrollPosition=function(t){return this._scrollbarState.setScrollPosition(t)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender},e.prototype.beginReveal=function(){this._visibilityController.setShouldBeVisible(!0)},e.prototype.beginHide=function(){this._visibilityController.setShouldBeVisible(!1)},e.prototype.render=function(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getSliderPosition()))},e.prototype._domNodeMouseDown=function(t){t.target===this.domNode.domNode&&this._onMouseDown(t)},e.prototype.delegateMouseDown=function(t){var e=this.domNode.domNode.getClientRects()[0].top,n=e+this._scrollbarState.getSliderPosition(),i=e+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),o=this._sliderMousePosition(t);n<=o&&o<=i?t.leftButton&&(t.preventDefault(),this._sliderMouseDown(t,function(){})):this._onMouseDown(t)},e.prototype._onMouseDown=function(t){var e,n;if(t.target===this.domNode.domNode&&"number"==typeof t.browserEvent.offsetX&&"number"==typeof t.browserEvent.offsetY)e=t.browserEvent.offsetX,n=t.browserEvent.offsetY;else{var i=k(this.domNode.domNode);e=t.posx-i.left,n=t.posy-i.top}this._setDesiredScrollPositionNow(this._scrollbarState.getDesiredScrollPositionFromOffset(this._mouseDownRelativePosition(e,n))),t.leftButton&&(t.preventDefault(),this._sliderMouseDown(t,function(){}))},e.prototype._sliderMouseDown=function(t,e){var n=this,i=this._sliderMousePosition(t),o=this._sliderOrthogonalMousePosition(t),r=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._mouseMoveMonitor.startMonitoring(U,function(t){var e=n._sliderOrthogonalMousePosition(t),s=Math.abs(e-o);if(Xt&&s>140)return void n._setDesiredScrollPositionNow(r.getScrollPosition());var l=n._sliderMousePosition(t)-i;n._setDesiredScrollPositionNow(r.getDesiredScrollPositionFromDelta(l))},function(){n.slider.toggleClassName("active",!1),n._host.onDragEnd(),e()}),this._host.onDragStart()},e.prototype._setDesiredScrollPositionNow=function(t){var e={};this.writeScrollPosition(e,t),this._scrollable.setScrollPositionNow(e)},e}(ge),be=function(){function t(t,e){this._scrollbarSize=Math.round(t),this._oppositeScrollbarSize=Math.round(e),this._visibleSize=0,this._scrollSize=0,this._scrollPosition=0,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}return t.prototype.clone=function(){var e=new t(this._scrollbarSize,this._oppositeScrollbarSize);return e.setVisibleSize(this._visibleSize),e.setScrollSize(this._scrollSize),e.setScrollPosition(this._scrollPosition),e},t.prototype.setVisibleSize=function(t){var e=Math.round(t);return this._visibleSize!==e&&(this._visibleSize=e,this._refreshComputedValues(),!0)},t.prototype.setScrollSize=function(t){var e=Math.round(t);return this._scrollSize!==e&&(this._scrollSize=e,this._refreshComputedValues(),!0)},t.prototype.setScrollPosition=function(t){var e=Math.round(t);return this._scrollPosition!==e&&(this._scrollPosition=e,this._refreshComputedValues(),!0)},t._computeValues=function(t,e,n,i){var o=Math.max(0,e-t),r=Math.max(0,o),s=n>0&&n>e;if(!s)return{computedAvailableSize:Math.round(o),computedIsNeeded:s,computedSliderSize:Math.round(r),computedSliderRatio:0,computedSliderPosition:0};var l=Math.round(Math.max(20,Math.floor(e*r/n))),h=(r-l)/(n-e),u=i*h;return{computedAvailableSize:Math.round(o),computedIsNeeded:s,computedSliderSize:Math.round(l),computedSliderRatio:h,computedSliderPosition:Math.round(u)}},t.prototype._refreshComputedValues=function(){var e=t._computeValues(this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition},t.prototype.getScrollPosition=function(){return this._scrollPosition},t.prototype.getRectangleLargeSize=function(){return this._computedAvailableSize},t.prototype.getRectangleSmallSize=function(){return this._scrollbarSize},t.prototype.isNeeded=function(){return this._computedIsNeeded},t.prototype.getSliderSize=function(){return this._computedSliderSize},t.prototype.getSliderPosition=function(){return this._computedSliderPosition},t.prototype.getDesiredScrollPositionFromOffset=function(t){if(!this._computedIsNeeded)return 0;var e=t-this._computedSliderSize/2;return Math.round(e/this._computedSliderRatio)},t.prototype.getDesiredScrollPositionFromDelta=function(t){if(!this._computedIsNeeded)return 0;var e=this._computedSliderPosition+t;return Math.round(e/this._computedSliderRatio)},t}(),we=function(t){function e(e,n,i){var o=t.call(this,{lazyRender:n.lazyRender,host:i,scrollbarState:new be(2===n.horizontal?0:n.horizontalScrollbarSize,2===n.vertical?0:n.verticalScrollbarSize),visibility:n.horizontal,extraScrollbarClassName:"horizontal",scrollable:e})||this;return o._createSlider(Math.floor((n.horizontalScrollbarSize-n.horizontalSliderSize)/2),0,void 0,n.horizontalSliderSize),o}return w(e,t),e.prototype._updateSlider=function(t,e){this.slider.setWidth(t),this.slider.setLeft(e)},e.prototype._renderDomNode=function(t,e){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setLeft(0),this.domNode.setBottom(0)},e.prototype.onDidScroll=function(t){return this._shouldRender=this._onElementScrollSize(t.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(t.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(t.width)||this._shouldRender,this._shouldRender},e.prototype._mouseDownRelativePosition=function(t,e){return t},e.prototype._sliderMousePosition=function(t){return t.posx},e.prototype._sliderOrthogonalMousePosition=function(t){return t.posy},e.prototype.writeScrollPosition=function(t,e){t.scrollLeft=e},e}(Se),Ne=function(t){function e(e,n,i){var o=t.call(this,{lazyRender:n.lazyRender,host:i,scrollbarState:new be(2===n.vertical?0:n.verticalScrollbarSize,0),visibility:n.vertical,extraScrollbarClassName:"vertical",scrollable:e})||this;return o._createSlider(0,Math.floor((n.verticalScrollbarSize-n.verticalSliderSize)/2),n.verticalSliderSize,void 0),o}return w(e,t),e.prototype._updateSlider=function(t,e){this.slider.setHeight(t),this.slider.setTop(e)},e.prototype._renderDomNode=function(t,e){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setRight(0),this.domNode.setTop(0)},e.prototype.onDidScroll=function(t){return this._shouldRender=this._onElementScrollSize(t.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(t.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(t.height)||this._shouldRender,this._shouldRender},e.prototype._mouseDownRelativePosition=function(t,e){return e},e.prototype._sliderMousePosition=function(t){return t.posy},e.prototype._sliderOrthogonalMousePosition=function(t){return t.posx},e.prototype.writeScrollPosition=function(t,e){t.scrollTop=e},e}(Se),Ce={done:!0,value:void 0};!function(t){function e(){return h}function n(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=t.length),{next:function(){return e>=n?Ce:{done:!1,value:t[e++]}}}}function i(e){return e?Array.isArray(e)?t.fromArray(e):e:t.empty()}function o(t,e){return{next:function(){var n=t.next();return n.done?Ce:{done:!1,value:e(n.value)}}}}function r(t,e){return{next:function(){for(;;){var n=t.next();if(n.done)return Ce;if(e(n.value))return{done:!1,value:n.value}}}}}function s(t,e){for(var n=t.next();!n.done;n=t.next())e(n.value)}function l(t){var e=[];return s(t,function(t){return e.push(t)}),e}var h={next:function(){return Ce}};t.empty=e,t.fromArray=n,t.from=i,t.map=o,t.filter=r,t.forEach=s,t.collect=l}(ce||(ce={}));(function(t){function e(e,n,i,o){return void 0===n&&(n=0),void 0===i&&(i=e.length),void 0===o&&(o=n-1),t.call(this,e,n,i,o)||this}w(e,t),e.prototype.current=function(){return t.prototype.current.call(this)},e.prototype.previous=function(){return this.index=Math.max(this.index-1,this.start-1),this.current()},e.prototype.first=function(){return this.index=this.start,this.current()},e.prototype.last=function(){return this.index=this.end-1,this.current()},e.prototype.parent=function(){return null}})(function(){function t(t,e,n,i){void 0===e&&(e=0),void 0===n&&(n=t.length),void 0===i&&(i=e-1),this.items=t,this.start=e,this.end=n,this.index=i}return t.prototype.first=function(){return this.index=this.start,this.current()},t.prototype.next=function(){return this.index=Math.min(this.index+1,this.end),this.current()},t.prototype.current=function(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]},t}()),function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.navigator=e,i}w(e,t),e.prototype.current=function(){return this.fn(this.navigator.current())},e.prototype.previous=function(){return this.fn(this.navigator.previous())},e.prototype.parent=function(){return this.fn(this.navigator.parent())},e.prototype.first=function(){return this.fn(this.navigator.first())},e.prototype.last=function(){return this.fn(this.navigator.last())},e.prototype.next=function(){return this.fn(this.navigator.next())}}(function(){function t(t,e){this.iterator=t,this.fn=e}return t.prototype.next=function(){return this.fn(this.iterator.next())},t}());var xe,Ee=function(){function t(t){this.element=t}return t}(),De=function(){function t(){this._size=0}return Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),t.prototype.isEmpty=function(){return!this._first},t.prototype.clear=function(){this._first=void 0,this._last=void 0,this._size=0},t.prototype.unshift=function(t){return this._insert(t,!1)},t.prototype.push=function(t){return this._insert(t,!0)},t.prototype._insert=function(t,e){var n=new Ee(t);if(this._first)if(e){var i=this._last;this._last=n,n.prev=i,i.next=n}else{var o=this._first;this._first=n,n.next=o,o.prev=n}else this._first=n,this._last=n;return this._size+=1,this._remove.bind(this,n)},t.prototype.shift=function(){if(this._first){var t=this._first.element;return this._remove(this._first),t}},t.prototype.pop=function(){if(this._last){var t=this._last.element;return this._remove(this._last),t}},t.prototype._remove=function(t){for(var e=this._first;e instanceof Ee;){if(e===t){if(e.prev&&e.next){var n=e.prev;n.next=e.next,e.next.prev=n}else e.prev||e.next?e.next?e.prev||(this._first=this._first.next,this._first.prev=void 0):(this._last=this._last.prev,this._last.next=void 0):(this._first=void 0,this._last=void 0);this._size-=1;break}e=e.next}},t.prototype.iterator=function(){var t,e=this._first;return{next:function(){return e?(t?t.value=e.element:t={done:!1,value:e.element},e=e.next,t):Ce}}},t.prototype.toArray=function(){for(var t=[],e=this._first;e instanceof Ee;e=e.next)t.push(e.element);return t},t}();!function(t){function e(t){return function(e,n,i){void 0===n&&(n=null);var o=!1,r=t(function(t){if(!o)return r?r.dispose():o=!0,e.call(n,t)},null,i);return o&&r.dispose(),r}}function n(t,e){return function(n,i,o){return void 0===i&&(i=null),t(function(t){return n.call(i,e(t))},null,o)}}function i(t,e){return function(n,i,o){return void 0===i&&(i=null),t(function(t){e(t),n.call(i,t)},null,o)}}function o(t,e){return function(n,i,o){return void 0===i&&(i=null),t(function(t){return e(t)&&n.call(i,t)},null,o)}}function r(t){return t}function s(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e,n,i){return void 0===n&&(n=null),A(t.map(function(t){return t(function(t){return e.call(n,t)},null,i)}))}}function l(t,e){var i=void 0;return n(t,function(t){return i=e(i,t)})}function h(t,e,n,i,o){void 0===n&&(n=100),void 0===i&&(i=!1);var r,s=void 0,l=void 0,h=0,u=new Me({leakWarningThreshold:o,onFirstListenerAdd:function(){r=t(function(t){h++,s=e(s,t),i&&!l&&u.fire(s),clearTimeout(l),l=setTimeout(function(){var t=s;s=void 0,l=void 0,(!i||h>1)&&u.fire(t),h=0},n)})},onLastListenerRemove:function(){r.dispose()}});return u.event}function u(t){var i=(new Date).getTime();return n(e(t),function(t){return(new Date).getTime()-i})}function a(t){var e,n=!0;return o(t,function(t){var i=n||t!==e;return n=!1,e=t,i})}function c(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=[]);var i=n.slice(),o=t(function(t){i?i.push(t):s.fire(t)}),r=function(){i&&i.forEach(function(t){return s.fire(t)}),i=null},s=new Me({onFirstListenerAdd:function(){o||(o=t(function(t){return s.fire(t)}))},onFirstListenerDidAdd:function(){i&&(e?setTimeout(r):r())},onLastListenerRemove:function(){o&&o.dispose(),o=null}});return s.event}function d(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=[]),n=n.slice(),t(function(t){n.push(t),o.fire(t)});var i=function(t,e){return n.forEach(function(n){return t.call(e,n)})},o=new Me({onListenerDidAdd:function(t,n,o){e?setTimeout(function(){return i(n,o)}):i(n,o)}});return o.event}function p(t){return new y(t)}function f(t,e,n){void 0===n&&(n=function(t){return t});var i=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o.fire(n.apply(void 0,t))},o=new Me({onFirstListenerAdd:function(){return t.on(e,i)},onLastListenerRemove:function(){return t.removeListener(e,i)}});return o.event}function m(t){var e=new Me,n=!1;return t.then(void 0,function(){return null}).then(function(){n?e.fire():setTimeout(function(){return e.fire()},0)}),n=!0,e.event}function _(t){return new Promise(function(n){return e(t)(n)})}var v={dispose:function(){}};t.None=function(){return v},t.once=e,t.map=n,t.forEach=i,t.filter=o,t.signal=r,t.any=s,t.reduce=l,t.debounce=h,t.stopwatch=u,t.latch=a,t.buffer=c,t.echo=d;var y=function(){function t(t){this._event=t}return Object.defineProperty(t.prototype,"event",{get:function(){return this._event},enumerable:!0,configurable:!0}),t.prototype.map=function(e){return new t(n(this._event,e))},t.prototype.forEach=function(e){return new t(i(this._event,e))},t.prototype.filter=function(e){return new t(o(this._event,e))},t.prototype.latch=function(){return new t(a(this._event))},t.prototype.on=function(t,e,n){return this._event(t,e,n)},t.prototype.once=function(t,n,i){return e(this._event)(t,n,i)},t}();t.chain=p,t.fromNodeEventEmitter=f,t.fromPromise=m,t.toPromise=_}(xe||(xe={}));var Ae,Le=-1,Re=function(){function t(t,e){void 0===e&&(e=Math.random().toString(18).slice(2,5)),this.customThreshold=t,this.name=e,this._warnCountdown=0}return t.prototype.dispose=function(){this._stacks&&this._stacks.clear()},t.prototype.check=function(t){var e=this,n=Le;if("number"==typeof this.customThreshold&&(n=this.customThreshold),!(n<=0||t<n)){this._stacks||(this._stacks=new Map);var i=(new Error).stack.split("\n").slice(3).join("\n"),o=this._stacks.get(i)||0;if(this._stacks.set(i,o+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=.5*n;var r,s=0;this._stacks.forEach(function(t,e){(!r||s<t)&&(r=e,s=t)}),console.warn("["+this.name+"] potential listener LEAK detected, having "+t+" listeners already. MOST frequent listener ("+s+"):"),console.warn(r)}return function(){var t=e._stacks.get(i)||0;e._stacks.set(i,t-1)}}},t}(),Me=function(){function t(t){this._disposed=!1,this._options=t,this._leakageMon=Le>0?new Re(this._options&&this._options.leakWarningThreshold):void 0}return Object.defineProperty(t.prototype,"event",{get:function(){var e=this;return this._event||(this._event=function(n,i,o){e._listeners||(e._listeners=new De);var r=e._listeners.isEmpty();r&&e._options&&e._options.onFirstListenerAdd&&e._options.onFirstListenerAdd(e);var s=e._listeners.push(i?[n,i]:n);r&&e._options&&e._options.onFirstListenerDidAdd&&e._options.onFirstListenerDidAdd(e),e._options&&e._options.onListenerDidAdd&&e._options.onListenerDidAdd(e,n,i);var l;e._leakageMon&&(l=e._leakageMon.check(e._listeners.size));var h;return h={dispose:function(){l&&l(),h.dispose=t._noop,e._disposed||(s(),e._options&&e._options.onLastListenerRemove&&(e._listeners&&!e._listeners.isEmpty()||e._options.onLastListenerRemove(e)))}},Array.isArray(o)&&o.push(h),h}),this._event},enumerable:!0,configurable:!0}),t.prototype.fire=function(t){if(this._listeners){this._deliveryQueue||(this._deliveryQueue=[]);for(var e=this._listeners.iterator(),n=e.next();!n.done;n=e.next())this._deliveryQueue.push([n.value,t]);for(;this._deliveryQueue.length>0;){var i=this._deliveryQueue.shift(),o=i[0],r=i[1];try{"function"==typeof o?o.call(void 0,r):o[0].call(o[1],r)}catch(n){R(n)}}}},t.prototype.dispose=function(){this._listeners&&(this._listeners=void 0),this._deliveryQueue&&(this._deliveryQueue.length=0),this._leakageMon&&this._leakageMon.dispose(),this._disposed=!0},t._noop=function(){},t}();(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}w(e,t),e.prototype.fireAsync=function(t){return N(this,void 0,void 0,function(){var e,n,i,o,r,s;return C(this,function(l){switch(l.label){case 0:if(!this._listeners)return[2];for(this._asyncDeliveryQueue||(this._asyncDeliveryQueue=[]),e=this._listeners.iterator(),n=e.next();!n.done;n=e.next())s=[],this._asyncDeliveryQueue.push([n.value,t(s,"function"==typeof n.value?n.value:n.value[0]),s]);l.label=1;case 1:if(!(this._asyncDeliveryQueue.length>0))return[3,3];i=this._asyncDeliveryQueue.shift(),o=i[0],r=i[1],s=i[2];try{"function"==typeof o?o.call(void 0,r):o[0].call(o[1],r)}catch(t){return R(t),[3,1]}return Object.freeze(s),[4,Promise.all(s)];case 2:return l.sent(),[3,1];case 3:return[2]}})})}})(Me),function(){function t(){var t=this;this.hasListeners=!1,this.events=[],this.emitter=new Me({onFirstListenerAdd:function(){return t.onFirstListenerAdd()},onLastListenerRemove:function(){return t.onLastListenerRemove()}})}Object.defineProperty(t.prototype,"event",{get:function(){return this.emitter.event},enumerable:!0,configurable:!0}),t.prototype.add=function(t){var e=this,n={event:t,listener:null};return this.events.push(n),this.hasListeners&&this.hook(n),L(B(function(){e.hasListeners&&e.unhook(n);var t=e.events.indexOf(n);e.events.splice(t,1)}))},t.prototype.onFirstListenerAdd=function(){var t=this;this.hasListeners=!0,this.events.forEach(function(e){return t.hook(e)})},t.prototype.onLastListenerRemove=function(){var t=this;this.hasListeners=!1,this.events.forEach(function(e){return t.unhook(e)})},t.prototype.hook=function(t){var e=this;t.listener=t.event(function(t){return e.emitter.fire(t)})},t.prototype.unhook=function(t){t.listener&&t.listener.dispose(),t.listener=null},t.prototype.dispose=function(){this.emitter.dispose()}}(),function(){function t(){var t=this;this.listening=!1,this.inputEvent=xe.None,this.inputEventListener=qt.None,this.emitter=new Me({onFirstListenerDidAdd:function(){t.listening=!0,t.inputEventListener=t.inputEvent(t.emitter.fire,t.emitter)},onLastListenerRemove:function(){t.listening=!1,t.inputEventListener.dispose()}}),this.event=this.emitter.event}Object.defineProperty(t.prototype,"input",{set:function(t){this.inputEvent=t,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=t(this.emitter.fire,this.emitter))},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.inputEventListener.dispose(),this.emitter.dispose()}}();!function(t){t[t.Auto=1]="Auto",t[t.Hidden=2]="Hidden",t[t.Visible=3]="Visible"}(Ae||(Ae={}));var Pe,Te=function(){function t(t,e,n,i,o,r){e|=0,n|=0,i|=0,o|=0,r|=0,(t|=0)<0&&(t=0),n+t>e&&(n=e-t),n<0&&(n=0),i<0&&(i=0),r+i>o&&(r=o-i),r<0&&(r=0),this.width=t,this.scrollWidth=e,this.scrollLeft=n,this.height=i,this.scrollHeight=o,this.scrollTop=r}return t.prototype.equals=function(t){return this.width===t.width&&this.scrollWidth===t.scrollWidth&&this.scrollLeft===t.scrollLeft&&this.height===t.height&&this.scrollHeight===t.scrollHeight&&this.scrollTop===t.scrollTop},t.prototype.withScrollDimensions=function(e){return new t(void 0!==e.width?e.width:this.width,void 0!==e.scrollWidth?e.scrollWidth:this.scrollWidth,this.scrollLeft,void 0!==e.height?e.height:this.height,void 0!==e.scrollHeight?e.scrollHeight:this.scrollHeight,this.scrollTop)},t.prototype.withScrollPosition=function(e){return new t(this.width,this.scrollWidth,void 0!==e.scrollLeft?e.scrollLeft:this.scrollLeft,this.height,this.scrollHeight,void 0!==e.scrollTop?e.scrollTop:this.scrollTop)},t.prototype.createScrollEvent=function(t){var e=this.width!==t.width,n=this.scrollWidth!==t.scrollWidth,i=this.scrollLeft!==t.scrollLeft,o=this.height!==t.height,r=this.scrollHeight!==t.scrollHeight,s=this.scrollTop!==t.scrollTop;return{width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:e,scrollWidthChanged:n,scrollLeftChanged:i,heightChanged:o,scrollHeightChanged:r,scrollTopChanged:s}},t}(),Oe=function(t){function e(e,n){var i=t.call(this)||this;return i._onScroll=i._register(new Me),i.onScroll=i._onScroll.event,i._smoothScrollDuration=e,i._scheduleAtNextAnimationFrame=n,i._state=new Te(0,0,0,0,0,0),i._smoothScrolling=null,i}return w(e,t),e.prototype.dispose=function(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),t.prototype.dispose.call(this)},e.prototype.setSmoothScrollDuration=function(t){this._smoothScrollDuration=t},e.prototype.validateScrollPosition=function(t){return this._state.withScrollPosition(t)},e.prototype.getScrollDimensions=function(){return this._state},e.prototype.setScrollDimensions=function(t){var e=this._state.withScrollDimensions(t);this._setState(e),this._smoothScrolling&&this._smoothScrolling.acceptScrollDimensions(this._state)},e.prototype.getFutureScrollPosition=function(){return this._smoothScrolling?this._smoothScrolling.to:this._state},e.prototype.getCurrentScrollPosition=function(){return this._state},e.prototype.setScrollPositionNow=function(t){var e=this._state.withScrollPosition(t);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(e)},e.prototype.setScrollPositionSmooth=function(t){var e=this;if(0===this._smoothScrollDuration)return this.setScrollPositionNow(t);if(this._smoothScrolling){t={scrollLeft:void 0===t.scrollLeft?this._smoothScrolling.to.scrollLeft:t.scrollLeft,scrollTop:void 0===t.scrollTop?this._smoothScrolling.to.scrollTop:t.scrollTop};i=this._state.withScrollPosition(t);if(this._smoothScrolling.to.scrollLeft===i.scrollLeft&&this._smoothScrolling.to.scrollTop===i.scrollTop)return;var n=this._smoothScrolling.combine(this._state,i,this._smoothScrollDuration);this._smoothScrolling.dispose(),this._smoothScrolling=n}else{var i=this._state.withScrollPosition(t);this._smoothScrolling=ze.start(this._state,i,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(function(){e._smoothScrolling&&(e._smoothScrolling.animationFrameDisposable=null,e._performSmoothScrolling())})},e.prototype._performSmoothScrolling=function(){var t=this;if(this._smoothScrolling){var e=this._smoothScrolling.tick(),n=this._state.withScrollPosition(e);if(this._setState(n),e.isDone)return this._smoothScrolling.dispose(),void(this._smoothScrolling=null);this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(function(){t._smoothScrolling&&(t._smoothScrolling.animationFrameDisposable=null,t._performSmoothScrolling())})}},e.prototype._setState=function(t){var e=this._state;e.equals(t)||(this._state=t,this._onScroll.fire(this._state.createScrollEvent(e)))},e}(qt),We=function(){function t(t,e,n){this.scrollLeft=t,this.scrollTop=e,this.isDone=n}return t}(),ze=function(){function t(t,e,n,i){this.from=t,this.to=e,this.duration=i,this._startTime=n,this.animationFrameDisposable=null,this._initAnimations()}return t.prototype._initAnimations=function(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)},t.prototype._initAnimation=function(t,e,n){if(Math.abs(t-e)>2.5*n){var i=void 0,o=void 0;return t<e?(i=t+.75*n,o=e-.75*n):(i=t-.75*n,o=e+.75*n),X(V(t,i),V(o,e),.33)}return V(t,e)},t.prototype.dispose=function(){null!==this.animationFrameDisposable&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)},t.prototype.acceptScrollDimensions=function(t){this.to=t.withScrollPosition(this.to),this._initAnimations()},t.prototype.tick=function(){return this._tick(Date.now())},t.prototype._tick=function(t){var e=(t-this._startTime)/this.duration;if(e<1){var n=this.scrollLeft(e),i=this.scrollTop(e);return new We(n,i,!1)}return new We(this.to.scrollLeft,this.to.scrollTop,!0)},t.prototype.combine=function(e,n,i){return t.start(e,n,i)},t.start=function(e,n,i){return i+=10,new t(e,n,Date.now()-10,i)},t}(),Ie=function(){function t(t,e,n){this.timestamp=t,this.deltaX=e,this.deltaY=n,this.score=0}return t}(),ke=function(){function t(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}return t.prototype.isPhysicalMouseWheel=function(){if(-1===this._front&&-1===this._rear)return!1;for(var t=1,e=0,n=1,i=this._rear;;){var o=i===this._front?t:Math.pow(2,-n);if(t-=o,e+=this._memory[i].score*o,i===this._front)break;i=(this._capacity+i-1)%this._capacity,n++}return e<=.5},t.prototype.accept=function(t,e,n){var i=new Ie(t,e,n);i.score=this._computeScore(i),-1===this._front&&-1===this._rear?(this._memory[0]=i,this._front=0,this._rear=0):(this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=i)},t.prototype._computeScore=function(t){if(Math.abs(t.deltaX)>0&&Math.abs(t.deltaY)>0)return 1;var e=.5;-1===this._front&&-1===this._rear||this._memory[this._rear];return(Math.abs(t.deltaX-Math.round(t.deltaX))>0||Math.abs(t.deltaY-Math.round(t.deltaY))>0)&&(e+=.25),Math.min(Math.max(e,0),1)},t.INSTANCE=new t,t}(),He=function(t){function e(e,n,i){var o=t.call(this)||this;o._onScroll=o._register(new Me),o.onScroll=o._onScroll.event,e.style.overflow="hidden",o._options=Q(n),o._scrollable=i,o._register(o._scrollable.onScroll(function(t){o._onDidScroll(t),o._onScroll.fire(t)}));var r={onMouseWheel:function(t){return o._onMouseWheel(t)},onDragStart:function(){return o._onDragStart()},onDragEnd:function(){return o._onDragEnd()}};return o._verticalScrollbar=o._register(new Ne(o._scrollable,o._options,r)),o._horizontalScrollbar=o._register(new we(o._scrollable,o._options,r)),o._domNode=document.createElement("div"),o._domNode.className="nila-scrollable-element "+o._options.className,o._domNode.setAttribute("role","presentation"),o._domNode.style.position="relative",o._domNode.style.overflow="hidden",o._domNode.appendChild(e),o._domNode.appendChild(o._horizontalScrollbar.domNode.domNode),o._domNode.appendChild(o._verticalScrollbar.domNode.domNode),o._listenOnDomNode=o._options.listenOnDomNode||o._domNode,o._mouseWheelToDispose=[],o._setListeningToMouseWheel(o._options.handleMouseWheel),o.onmouseover(o._listenOnDomNode,function(t){return o._onMouseOver(t)}),o.onnonbubblingmouseout(o._listenOnDomNode,function(t){return o._onMouseOut(t)}),o._hideTimeout=o._register(new Jt),o._isDragging=!1,o._mouseIsOver=!1,o._shouldRender=!0,o._revealOnScroll=!0,o}return w(e,t),e.prototype.dispose=function(){this._mouseWheelToDispose=D(this._mouseWheelToDispose),t.prototype.dispose.call(this)},e.prototype.getDomNode=function(){return this._domNode},e.prototype.delegateVerticalScrollbarMouseDown=function(t){this._verticalScrollbar.delegateMouseDown(t)},e.prototype.getScrollDimensions=function(){return this._scrollable.getScrollDimensions()},e.prototype.setScrollDimensions=function(t){this._scrollable.setScrollDimensions(t)},e.prototype.updateClassName=function(t){this._options.className=t,Yt&&(this._options.className+=" mac"),this._domNode.className="nila-scrollable-element "+this._options.className},e.prototype.updateOptions=function(t){var e=Q(t);this._options.handleMouseWheel=e.handleMouseWheel,this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity,this._options.fastScrollSensitivity=e.fastScrollSensitivity,this._setListeningToMouseWheel(this._options.handleMouseWheel),this._options.lazyRender||this._render()},e.prototype.setRevealOnScroll=function(t){this._revealOnScroll=t},e.prototype._setListeningToMouseWheel=function(t){var e=this;if(this._mouseWheelToDispose.length>0!==t&&(this._mouseWheelToDispose=D(this._mouseWheelToDispose),t)){var n=function(t){e._onMouseWheel(new Gt(t))};this._mouseWheelToDispose.push(P(this._listenOnDomNode,me.WHEEL,n))}},e.prototype._onMouseWheel=function(t){var e,n=ke.INSTANCE;if(n.accept(Date.now(),t.deltaX,t.deltaY),t.deltaY||t.deltaX){var i=t.deltaY*this._options.mouseWheelScrollSensitivity,o=t.deltaX*this._options.mouseWheelScrollSensitivity;this._options.flipAxes&&(i=(e=[o,i])[0],o=e[1]);var r=!Yt&&t.browserEvent&&t.browserEvent.shiftKey;!this._options.scrollYToX&&!r||o||(o=i,i=0),t.browserEvent&&t.browserEvent.altKey&&(o*=this._options.fastScrollSensitivity,i*=this._options.fastScrollSensitivity);var s=this._scrollable.getFutureScrollPosition(),l={};if(i){var h=s.scrollTop-50*i;this._verticalScrollbar.writeScrollPosition(l,h)}if(o){var u=s.scrollLeft-50*o;this._horizontalScrollbar.writeScrollPosition(l,u)}l=this._scrollable.validateScrollPosition(l),s.scrollLeft===l.scrollLeft&&s.scrollTop===l.scrollTop||(this._options.mouseWheelSmoothScroll&&n.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(l):this._scrollable.setScrollPositionNow(l),this._shouldRender=!0)}(this._options.alwaysConsumeMouseWheel||this._shouldRender)&&(t.preventDefault(),t.stopPropagation())},e.prototype._onDidScroll=function(t){this._shouldRender=this._horizontalScrollbar.onDidScroll(t)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(t)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()},e.prototype.renderNow=function(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()},e.prototype._render=function(){this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render())},e.prototype._onDragStart=function(){this._isDragging=!0,this._reveal()},e.prototype._onDragEnd=function(){this._isDragging=!1,this._hide()},e.prototype._onMouseOut=function(t){this._mouseIsOver=!1,this._hide()},e.prototype._onMouseOver=function(t){this._mouseIsOver=!0,this._reveal()},e.prototype._reveal=function(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()},e.prototype._hide=function(){this._mouseIsOver||this._isDragging||(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())},e.prototype._scheduleHide=function(){var t=this;this._mouseIsOver||this._isDragging||this._hideTimeout.cancelAndSet(function(){return t._hide()},500)},e}(ge),Fe=function(t){function e(e,n){var i=this;(n=n||{}).mouseWheelSmoothScroll=!1;var o=new Oe(0,function(t){return Kt(t)});return(i=t.call(this,e,n,o)||this)._register(o),i}return w(e,t),e.prototype.setScrollPosition=function(t){this._scrollable.setScrollPositionNow(t)},e.prototype.getScrollPosition=function(){return this._scrollable.getCurrentScrollPosition()},e}(He),je=(function(t){function e(e,n,i){return t.call(this,e,n,i)||this}w(e,t)}(He),function(t){function e(e,n){var i=t.call(this,e,n)||this;return i._element=e,i.onScroll(function(t){t.scrollTopChanged&&(i._element.scrollTop=t.scrollTop),t.scrollLeftChanged&&(i._element.scrollLeft=t.scrollLeft)}),i.scanDomNode(),i}w(e,t),e.prototype.scanDomNode=function(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}}(Fe),function(){function t(t,e,n,i,o){this.row=e,this.cell=n,this.datum=i,this.col=o,this.mounted=!1,this.value=i[o.field],this.formatter=o.formatter,this.host=t;var r=document.createElement("div");r.className="nila-grid-cell",this.width=o.width,r.style.width=this.width+"px",this.domNode=r}return t.prototype.mount=function(t){this.mounted=!0,t&&t.mounted?this.host.insertBefore(this.domNode,t.domNode):this.host.appendChild(this.domNode),Ct.render(Nt.createElement(this.formatter(this.row,this.cell,this.value,this.col,this.datum)),this.domNode)},t.prototype.unmount=function(){this.mounted=!1,Ct.unmountComponentAtNode(this.domNode),this.host.removeChild(this.domNode)},t.prototype.dispose=function(){this.mounted=!1,Ct.unmountComponentAtNode(this.domNode),this.domNode.remove()},t}()),Ue=function(){function t(t,e,n,i){this.ctx=i,this.mounted=!1,this.cellCache=Object.create(null);var o=document.createElement("div");ie(o,"nila-grid-row"),this.domNode=o,this.host=t,this.rowIndex=e,this.data=n}return t.prototype.mount=function(t){this.mounted=!0,t?this.host.insertBefore(this.domNode,t.domNode):this.host.appendChild(this.domNode)},t.prototype.mountCell=function(t){var e=this.cellCache[t];return e||(e=new je(this.domNode,this.rowIndex,t,this.data,this.ctx.columns[t]),this.cellCache[t]=e),!e.mounted&&(e.mount(this.cellCache[t+1]),!0)},t.prototype.unmountCell=function(t){var e=this.cellCache[t];return e&&(e.dispose(),delete this.cellCache[t]),!0},t.prototype.updateCell=function(t,e){for(var n=Object.keys(this.cellCache),i={},o=0,r=t.length;o<r;o++)i[t[o]]=!0,this.mountCell(parseInt(t[o]));for(var o=0,r=n.length;o<r;o++)i[n[o]]||this.unmountCell(parseInt(n[o]));this.domNode.style.left=e+"px"},t.prototype.dispose=function(){var t=this;this.mounted=!1,this.domNode.remove(),Object.keys(this.cellCache).forEach(function(e){t.cellCache[e].dispose(),delete t.cellCache[e]})},t}();!function(t){t.number="number",t.string="string",t.undefined="undefined",t.object="object",t.function="function",t.null="null",t.class="class"}(Pe||(Pe={}));var Be=function(){function t(t,e,n,i){this.mounted=!1,this.host=t;var o=document.createElement("div");o.className="nila-grid-header-cell",o.innerText=n.name,this.width=n.width,o.style.width=this.width+"px",this.left=i,this.right=this.left+this.width,this.domNode=o}return t.prototype.mount=function(t){this.mounted=!0,t&&t.mounted?this.host.insertBefore(this.domNode,t.domNode):this.host.appendChild(this.domNode)},t.prototype.unmount=function(){this.mounted=!1,this.host.removeChild(this.domNode)},t.prototype.dispose=function(){this.mounted=!1,this.domNode.remove()},t}(),Ve=function(){function t(t){this.ctx=t,this.cellCache=Object.create(null),this.lastRenderLeft=0,this.lastRenderWidth=0;var e=document.createElement("div");ie(e,"nila-grid-header"),this.domNode=e}return t.prototype.render=function(t,e){if(!e)return{mounted:[],margin:0};var n,i,o=t,r=t+e,s=this.lastRenderLeft+this.lastRenderWidth;for(n=this.indexAfter(r)-1,i=this.indexAt(Math.max(s,o));n>=i;n--)this.mount(n);for(n=Math.min(this.indexAt(this.lastRenderLeft),this.indexAfter(r))-1,i=this.indexAt(o);n>=i;n--)this.mount(n);for(n=this.indexAt(this.lastRenderLeft),i=Math.min(this.indexAt(o),this.indexAfter(s));n<i;n++)this.unmount(n);for(n=Math.max(this.indexAfter(r),this.indexAt(this.lastRenderLeft)),i=this.indexAfter(s);n<i;n++)this.unmount(n);var l=this.indexAt(o),h=this.cellCache[l],u=G(h.left-o,h.width,-h.width);return this.domNode.style.left=u+"px",this.lastRenderLeft=o,this.lastRenderWidth=r-o,{mounted:Object.keys(this.cellCache),margin:u}},t.prototype.getItemLeft=function(t){if(0===t)return 0;for(var e=0,n=0;n<t;n++)e+=this.ctx.columns[n].width;return e},t.prototype.mount=function(t){var e=this.cellCache[t];return e||(e=new Be(this.domNode,t,this.ctx.columns[t],this.getItemLeft(t)),this.cellCache[t]=e),!e.mounted&&(e.mount(this.cellCache[t+1]),!0)},t.prototype.unmount=function(t){var e=this.cellCache[t];return e&&(e.dispose(),delete this.cellCache[t]),!0},t.prototype.indexAt=function(t){for(var e,n=0,i=this.ctx.columns.length-1;n<i;){e=Math.floor((n+i)/2);var o=this.getItemLeft(e);if(t<o)i=e;else{if(!(t>=o+this.ctx.columns[e].width))return e;if(n===e)break;n=e}}return this.ctx.columns.length-1},t.prototype.indexAfter=function(t){return Math.min(this.indexAt(t)+1,this.ctx.columns.length)},t.prototype.dispose=function(){this.domNode.remove()},t}(),Xe=function(){function t(e,n){this.ctx=n,this.rowCache=Object.create(null),t.counter++,this.instanceId=t.counter,this.lastRenderTop=0,this.lastRenderHeight=0,this.createElement(e)}return t.prototype.createElement=function(t){var e=this;this.domNode=document.createElement("div"),this.domNode.className="nila-grid nila-grid-instance-"+this.instanceId,this.header=new Ve(this.ctx),this.body=document.createElement("div"),this.body.className="nila-grid-body",this.scrollableElement=new Fe(this.body,{alwaysConsumeMouseWheel:!0,horizontal:3,vertical:3}),this.scrollableElement.onScroll(function(t){e.render(t)}),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="nila-grid-rows",this.body.appendChild(this.rowsContainer),this.domNode.appendChild(this.header.domNode);var n=this.scrollableElement.getDomNode();this.domNode.appendChild(n),t.appendChild(this.domNode);var i=F(this.header.domNode);n.style.height=F(this.domNode)-i+"px"},t.prototype.layout=function(t,e){var n=t||F(this.body);this.viewHeight=n,this.scrollHeight=this.getContentHeight();var i=e||H(this.body);this.viewWidth=i,this.scrollWidth=this.getContentWidth(),this.render(n,i)},t.prototype.getContentHeight=function(){return this.ctx.model.items.length*this.ctx.options.rowHeight},t.prototype.getContentWidth=function(){return this.ctx.columns.reduce(function(t,e){return t+(e.width||80)},0)},Object.defineProperty(t.prototype,"viewHeight",{get:function(){return this.scrollableElement.getScrollDimensions().height},set:function(t){this.scrollableElement.setScrollDimensions({height:t})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollHeight",{set:function(t){t+=10,this.scrollableElement.setScrollDimensions({scrollHeight:t})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"viewWidth",{get:function(){return this.scrollableElement.getScrollDimensions().width},set:function(t){this.scrollableElement.setScrollDimensions({width:t})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollWidth",{set:function(t){this.scrollableElement.setScrollDimensions({scrollWidth:t})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollTop",{get:function(){return this.scrollableElement.getScrollPosition().scrollTop},set:function(t){var e=this.getContentHeight()+10;this.scrollableElement.setScrollDimensions({scrollHeight:e}),this.scrollableElement.setScrollPosition({scrollTop:t})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollLeft",{set:function(t){var e=this.getContentWidth()+10;this.scrollableElement.setScrollDimensions({scrollWidth:e}),this.scrollableElement.setScrollPosition({scrollLeft:t})},enumerable:!0,configurable:!0}),t.prototype.render=function(t,e){var n,i,o=0,r=0,s=!1;if(q(t))n=t,i=e,s=!0;else{var l=t;o=l.scrollTop,r=l.scrollLeft,n=l.height,i=l.width,s=l.scrollHeightChanged||l.scrollTopChanged||l.heightChanged}if(n){if(s){var h,u=void 0,a=o,c=o+n,d=this.lastRenderTop+this.lastRenderHeight;for(u=this.indexAfter(c)-1,h=this.indexAt(Math.max(d,a));u>=h;u--)this.insertItemInDOM(u);for(u=Math.min(this.indexAt(this.lastRenderTop),this.indexAfter(c))-1,h=this.indexAt(a);u>=h;u--)this.insertItemInDOM(u);for(u=this.indexAt(this.lastRenderTop),h=Math.min(this.indexAt(a),this.indexAfter(d));u<h;u++)this.removeItemFromDOM(u);for(u=Math.max(this.indexAfter(c),this.indexAt(this.lastRenderTop)),h=this.indexAfter(d);u<h;u++)this.removeItemFromDOM(u);var p=this.indexAt(a),f=this.getItemTop(p)-a,m=this.ctx.options.rowHeight;this.rowsContainer.style.top=G(f,m,-m)+"px",this.lastRenderTop=a,this.lastRenderHeight=c-a}var _=this.header.render(r,i),v=_.mounted,y=_.margin;for(var g in this.rowCache)this.rowCache[g].updateCell(v,y)}},t.prototype.insertItemInDOM=function(t){var e=this.rowCache[t];if(e||(e=new Ue(this.rowsContainer,t,this.ctx.model.items[t],this.ctx),this.rowCache[t]=e),!e.mounted){var n=this.rowCache[t+1];e.mount(n)}},t.prototype.removeItemFromDOM=function(t){var e=this.rowCache[t];e&&(e.dispose(),delete this.rowCache[t])},t.prototype.getItemTop=function(t){return 20*t+(t?1:0)},t.prototype.indexAt=function(t){for(var e,n=0,i=this.ctx.model.items.length,o=i-1,r=this.ctx.options.rowHeight;n<o;){e=Math.floor((n+o)/2);var s=this.getItemTop(e);if(t<s)o=e;else{if(!(t>=s+r))return e;if(n===e)break;n=e}}return i},t.prototype.indexAfter=function(t){return Math.min(this.indexAt(t)+1,this.ctx.model.items.length)},t.counter=0,t}(),Ye=function(){function t(t,e,n){this.model=t,this.columns=e,this.options=n}return t}();return{Grid:function(){function t(t,e,n,i){void 0===i&&(i={}),this.container=t;var o=this.validateAndEnforceOptions(i),r=new Lt(e),s=this.validatedAndEnforeColumnDefinitions(n,o.defaultColumnWidth),l=new Ye(r,s,o);this.view=new Xe(this.container,l)}return t.prototype.validateAndEnforceOptions=function(t){return Object.assign({},t,xt)},t.prototype.validatedAndEnforeColumnDefinitions=function(t,e){var n=[],i=Et;e&&(i.width=e);for(var o=0;o<t.length;o++){var r=Object.assign({},i,t[o]);r.minWidth&&r.width<r.minWidth&&(r.width=r.minWidth),r.maxWidth&&r.width>r.maxWidth&&(r.width=r.maxWidth),n.push(r)}return n},t.prototype.layout=function(){this.view.layout()},t}(),React:Nt,ReactDOM:Ct}});
