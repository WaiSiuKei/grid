!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self,t.NilaGrid=e())}(this,function(){"use strict";function t(t,e){function i(){this.constructor=t}Ct(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function e(t,e,i,n){return new(i||(i=Promise))(function(o,r){function s(t){try{h(n.next(t))}catch(t){r(t)}}function l(t){try{h(n.throw(t))}catch(t){r(t)}}function h(t){t.done?o(t.value):new i(function(e){e(t.value)}).then(s,l)}h((n=n.apply(t,e||[])).next())})}function i(t,e){function i(t){return function(e){return n([t,e])}}function n(i){if(o)throw new TypeError("Generator is already executing.");for(;h;)try{if(o=1,r&&(s=2&i[0]?r.return:i[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,i[1])).done)return s;switch(r=0,s&&(i=[2&i[0],s.value]),i[0]){case 0:case 1:s=i;break;case 4:return h.label++,{value:i[1],done:!1};case 5:h.label++,r=i[1],i=[0];continue;case 7:i=h.ops.pop(),h.trys.pop();continue;default:if(s=h.trys,!(s=s.length>0&&s[s.length-1])&&(6===i[0]||2===i[0])){h=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){h.label=i[1];break}if(6===i[0]&&h.label<s[1]){h.label=s[1],s=i;break}if(s&&h.label<s[2]){h.label=s[2],h.ops.push(i);break}s[2]&&h.ops.pop(),h.trys.pop();continue}i=e.call(t,h)}catch(t){i=[6,t],r=0}finally{o=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var o,r,s,l,h={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return l={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l}function n(t){o(t)||Et.onUnexpectedError(t)}function o(t){return t instanceof Error&&t.name===xt&&t.message===xt}function r(t){var e,i=this,n=!1;return function(){return n?e:(n=!0,e=t.apply(i,arguments))}}function s(t,e){return t.reduce(function(t,i){return t+i[e]},0)}function l(t){return t.reduce(function(t,e){return t+e},0)}function h(t,e){return t.map(function(t){return t[e]})}function u(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return Array.isArray(t)?(t.forEach(function(t){return t&&t.dispose()}),[]):0!==e.length?(u(t),u(e),[]):t?(t.dispose(),t):void 0}function a(t){return{dispose:function(){return u(t)}}}function c(t){return{dispose:function(){t()}}}function d(t,e){if(Array.isArray(t))for(let i=0,n=t.length;i<n;i++)d(t[i],e);else e.push(t)}function p(t){if(null==t)return t;let e=[];return d(t,e),1===e.length&&(e=e[0]),e}function f(){if(Tt.component){var t=Tt.component.getName();if(t)return" Check the render method of `"+t+"`."}return""}function m(t,e,i,n,o){return{type:t,key:e,ref:i,props:n,_owner:o}}function _(t){if(t){if(Array.isArray(t)){let e={};for(let i=0;i<t.length;++i){let n=_(t[i]);if(n)for(let t in n)e[t]=n[t]}return e}return t}}function g(t,e,i){if(null==t)throw Error("createElement: type should not be null or undefined."+f());let n,o={},r=null,s=null;if(null!=e){s=void 0===e.ref?null:e.ref,r=void 0===e.key?null:String(e.key);for(n in e)Kt[n]||(o[n]=e[n])}const l=arguments.length-2;if(l>0)if(1!==l||Array.isArray(i)){let t=i;if(l>1){t=new Array(l);for(var h=0;h<l;h++)t[h]=arguments[h+2]}o.children=p(t)}else o.children=i;if(t&&t.defaultProps){let e=t.defaultProps;for(n in e)void 0===o[n]&&(o[n]=e[n])}return o.style&&(Array.isArray(o.style)||"object"==typeof o.style)&&(o.style=_(o.style)),new m(t,r,s,o,Tt.component)}function v(){const t=Tt.component._instance;if(t)return t;throw new Error("Hooks can only be called inside a component.")}function y(t,e){for(let i=0;i<t.length;i++){const n=t[i],o=e[i];if((n!==o||0===n&&1/n!=1/o)&&(n===n||o===o))return!1}return!0}function S(t,e){b(t,e,!0)}function w(t,e){b(t,e)}function b(t,e,i){const n=v(),o=n.getCurrentHookId(),r=n.hooks;if(n.isComponentRendered()){const i=r[o],{create:create,inputs:prevInputs}=i;i.inputs=e,i.prevInputs=prevInputs,create.current=t}else{const s=t=>{if(!t&&i)return Ft(()=>s(!0));const{current:current}=s;current&&(l.current=current(),s.current=null)},l=t=>{if(!t&&i)return Ft(()=>l(!0));const{current:current}=l;current?(current(),l.current=null):i&&(s(!0),l(!0))};s.current=t,n.hooks[o]={create:s,destory:l,prevInputs:e,inputs:e},n.didMountHandlers.push(s),n.willUnmountHandlers.push(l),n.didUpdateHandlers.push(()=>{const{prevInputs:prevInputs,inputs:inputs,create:create}=r[o];null!=prevInputs&&y(inputs,prevInputs)||(l(!0),create())})}}function C(t){let e=se.get(t);return!!e&&(se.remove(t),e._internal.unmountComponent(),!0)}function N(t,e){let i=null===t,n=null===e;if(i||n)return i===n;let o=typeof t,r=typeof e;return"string"===o||"number"===o?"string"===r||"number"===r:"object"===o&&"object"===r&&t.type===e.type&&t.key===e.key}function E(t,e){if(e){let i=t._pendingCallbacks||(t._pendingCallbacks=[]);i.push(e)}}function x(t,e){if(e){let i=t._pendingStateQueue||(t._pendingStateQueue=[]);i.push(e)}}function R(t,e){return t===e?0!==t||1/t==1/e:t!==t&&e!==e}function D(t,e){if(R(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;let i=Object.keys(t),n=Object.keys(e);if(i.length!==n.length)return!1;for(let n=0;n<i.length;n++)if(!te.call(e,i[n])||!R(t[i[n]],e[i[n]]))return!1;return!0}function A(t,e,i){try{return t()}catch(t){i?i(t):M(e,t)}}function M(t,e){let i;for(;t;){if("function"==typeof t.componentDidCatch){i=t;break}if(!t._internal||!t._internal._parentInstance)break;t=t._internal._parentInstance}if(i){const t=i._internal;if(t){let n=t._pendingCallbacks||(t._pendingCallbacks=[]);n.push(()=>i.componentDidCatch(e))}}else setTimeout(()=>{throw e},0)}function O(t){let e;if(void 0===t||null===t||!1===t||!0===t)e=new jt;else if(Array.isArray(t))e=new $t(t);else if("object"==typeof t&&t.type)e="string"==typeof t.type?new Qt(t):new ee(t);else{if("string"!=typeof t&&"number"!=typeof t)throw new Error(`Invalid element type: ${t}. (current: ${"object"==typeof t&&Object.keys(t)||typeof t})`);e=new ie(t)}return e._mountIndex=0,e}function P(t,e,i,n){"function"==typeof i&&(n=i,i=null),i=i||{};let o=se.mount(t,e,i.parent).getPublicInstance();return n&&n.call(o),o}function k(t,e){return function(){return le.createElement("div",null,t.key.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"))}}function L(t,e,i){return function(){return le.createElement("div",null,i+": "+e)}}function T(t){return Array.isArray?Array.isArray(t):!(!t||typeof t.length!==ue.number||t.constructor!==Array)}function K(t){return typeof t===ue.string||t instanceof String}function z(t){return typeof t===ue.function}function U(t){return void 0===t||null===t}function W(t,e){switch(void 0===e&&(e=0),typeof t){case"object":return null===t?F(349,e):Array.isArray(t)?Y(t,e):B(t,e);case"string":return H(t,e);case"boolean":return I(t,e);case"number":return F(t,e);case"undefined":return F(0,937);default:return F(0,617)}}function F(t,e){return(e<<5)-e+t|0}function I(t,e){return F(t?433:863,e)}function H(t,e){e=F(149417,e);for(var i=0,n=t.length;i<n;i++)e=F(t.charCodeAt(i),e);return e}function Y(t,e){return e=F(104579,e),t.reduce(function(t,e){return W(e,t)},e)}function B(t,e){return e=F(181387,e),Object.keys(t).sort().reduce(function(e,i){return e=H(i,e),W(t[i],e)},e)}function j(t,e,i){for(var n=t.length,o=e.length,r=n+o,s={1:0},l=0;l<=r;++l)for(var h=-l;h<=l;h+=2){for(var u=void 0,a=(u=h===-l||h!==l&&s[h-1]+1<s[h+1]?s[h+1]:s[h-1]+1)-h;u<n&&a<o&&i(t[u],e[a]);)u++,a++;if(u===n&&a===o)return l;s[h]=u}return-1}function V(t,e,i,n,o,r,s,l,h,u,a){var c,d,p,f;if(0===s)return void a("same",t,e,i,n,o,r);if(s===i-e+(r-o))return void((l&de.horizontal?1:0)+(h&de.vertical?1:0)>=(l&de.vertical?1:0)+(h&de.horizontal?1:0)?(e!==i&&a("remove",t,e,i,n,o,o),o!==r&&a("add",t,i,i,n,o,r)):(o!==r&&a("add",t,e,e,n,o,r),e!==i&&a("remove",t,e,i,n,r,r)));for(var m=i-e,_=r-o,g=Math.floor(_/2),v={},y=-s-1;y<=s+1;++y)v[y]={d:1/0,segments:0,direct:de.none};for(var S=(c={},c[-s-1]={d:1/0,segments:0,direct:de.none},c[s+1]={d:1/0,segments:0,direct:de.none},c),w=0;w<=g;++w){v=(d=[S,v])[0],S=d[1];for(y=-s;y<=s;++y)!function(i){var r=w+i;if(0===w&&0===r)return v[i]={d:0,segments:0,direct:l},"continue";var s=[{direct:de.horizontal,d:v[i-1].d+1,segments:v[i-1].segments+(v[i-1].direct&de.horizontal?0:1)},{direct:de.vertical,d:S[i+1].d+1,segments:S[i+1].segments+(S[i+1].direct&de.vertical?0:1)}];r>0&&r<=m&&w>0&&w<=_&&u(t[e+r-1],n[o+w-1])&&s.push({direct:de.diagonal,d:S[i].d,segments:S[i].segments+(S[i].direct&de.diagonal?0:1)});var h=s.reduce(function(t,e){return t.d>e.d?e:t.d===e.d&&t.segments>e.segments?e:t});s.forEach(function(t){h.d===t.d&&h.segments===t.segments&&(h.direct|=t.direct)}),v[i]=h}(y)}for(var b={},y=-s-1;y<=s+1;++y)b[y]={d:1/0,segments:0,direct:de.none};for(var C=(p={},p[-s-1]={d:1/0,segments:0,direct:de.none},p[s+1]={d:1/0,segments:0,direct:de.none},p),w=_;w>=g;--w){b=(f=[C,b])[0],C=f[1];for(y=s;y>=-s;--y)!function(i){var r=w+i;if(w===_&&r===m)return b[i]={d:0,segments:0,direct:h},"continue";var s=[{direct:de.horizontal,d:b[i+1].d+1,segments:b[i+1].segments+(b[i+1].direct&de.horizontal?0:1)},{direct:de.vertical,d:C[i-1].d+1,segments:C[i-1].segments+(C[i-1].direct&de.vertical?0:1)}];r>=0&&r<m&&w>=0&&w<_&&u(t[e+r],n[o+w])&&s.push({direct:de.diagonal,d:C[i].d,segments:C[i].segments+(C[i].direct&de.diagonal?0:1)});var l=s.reduce(function(t,e){return t.d>e.d?e:t.d===e.d&&t.segments>e.segments?e:t});s.forEach(function(t){l.d===t.d&&l.segments===t.segments&&(l.direct|=t.direct)}),b[i]=l}(y)}for(var N={k:-1,d:1/0,segments:0,direct:de.none},y=-s;y<=s;++y){var E=v[y].d+b[y].d;if(E<N.d)N.k=y,N.d=E,N.segments=v[y].segments+b[y].segments+(v[y].segments&b[y].segments?0:1),N.direct=b[y].direct;else if(E===N.d){var x=v[y].segments+b[y].segments+(v[y].segments&b[y].segments?0:1);x<N.segments?(N.k=y,N.d=E,N.segments=x,N.direct=b[y].direct):x===N.segments&&!(N.direct&de.diagonal)&&b[y].direct&de.diagonal&&(N.k=y,N.d=E,N.segments=x,N.direct=b[y].direct)}}g+N.k===0&&0===g&&(g++,v[N.k].direct=b[N.k].direct,b[N.k].direct=C[N.k].direct),V(t,e,e+g+N.k,n,o,o+g,v[N.k].d,l,b[N.k].direct,u,a),V(t,e+g+N.k,i,n,o+g,r,b[N.k].d,v[N.k].direct,h,u,a)}function G(t,e,i,n){var o=j(t,e,i);V(t,0,t.length,e,0,e.length,o,de.diagonal,de.all,i,n)}function X(t,e,i){function n(t,e,i,n,l,h,u){if("same"===t)s&&o.push(s),r&&o.push(r),s=null,r=null;else if("remove"===t){s||(s={type:pe.Remove,oldPos:i,newPos:h,items:[]});for(a=i;a<n;++a)s.items.push(e[a]);r&&(r.oldPos+=n-i,s.oldPos===i&&(s.newPos-=n-i))}else if("add"===t){r||(r={type:pe.Add,oldPos:i,newPos:h,items:[]});for(var a=h;a<u;++a)r.items.push(l[a])}}void 0===i&&(i=function(t,e){return t===e});var o=[],r=null,s=null;return G(t,e,i,n),n("same",[],0,0,[],0,0),o}function Q(t){return JSON.stringify(t)}function $(t){return z(t)?t:function(e){return e[t]}}function q(t){if(!t.parent||t.parent===t)return null;try{var e=t.location,i=t.parent.location;if(e.protocol!==i.protocol||e.hostname!==i.hostname||e.port!==i.port)return we=!0,null}catch(t){return we=!0,null}return t.parent}function Z(t,e){for(var i,n=t.document.getElementsByTagName("iframe"),o=0,r=n.length;o<r;o++)if((i=n[o]).contentWindow===e)return i;return null}function J(t,e,i,n){return new Ze(t,e,i,n)}function tt(t,e){return J(t,"mouseout",function(i){for(var n=i.relatedTarget||i.target;n&&n!==t;)n=n.parentNode;n!==t&&e(i)})}function et(t,e,i,n,o){return new ei(t,e,i,n,o)}function it(t){if(!ii){var e=function(t){return setTimeout(function(){return t((new Date).getTime())},0)};ii=self.requestAnimationFrame||self.msRequestAnimationFrame||self.webkitRequestAnimationFrame||self.mozRequestAnimationFrame||self.oRequestAnimationFrame||e}return ii.call(self,t)}function nt(t){return document.defaultView.getComputedStyle(t,null)}function ot(t,e,i){var n=nt(t),o="0";return n&&(o=n.getPropertyValue?n.getPropertyValue(e):n.getAttribute(i)),ri(t,o)}function rt(t){var e=t.getBoundingClientRect();return{left:e.left+li.scrollX,top:e.top+li.scrollY,width:e.width,height:e.height}}function st(t){var e=si.getBorderLeftWidth(t)+si.getBorderRightWidth(t),i=si.getPaddingLeft(t)+si.getPaddingRight(t);return t.offsetWidth-e-i}function lt(t){var e=si.getBorderTopWidth(t)+si.getBorderBottomWidth(t),i=si.getPaddingTop(t)+si.getPaddingBottom(t);return t.offsetHeight-e-i}function ht(t,e,i){return le.createElement("div",null,(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"))}function ut(t){return new pi(t)}function at(t,e){var i=new Ie(e);return i.preventDefault(),{leftButton:i.leftButton,posx:i.posx,posy:i.posy}}function ct(t,e){var i=e-t;return function(e){return t+i*ft(e)}}function dt(t,e,i){return function(n){return n<i?t(n/i):e((n-i)/(1-i))}}function pt(t){return Math.pow(t,3)}function ft(t){return 1-pt(1-t)}function mt(t){var e={lazyRender:void 0!==t.lazyRender&&t.lazyRender,className:void 0!==t.className?t.className:"",useShadows:void 0===t.useShadows||t.useShadows,handleMouseWheel:void 0===t.handleMouseWheel||t.handleMouseWheel,flipAxes:void 0!==t.flipAxes&&t.flipAxes,alwaysConsumeMouseWheel:void 0!==t.alwaysConsumeMouseWheel&&t.alwaysConsumeMouseWheel,scrollYToX:void 0!==t.scrollYToX&&t.scrollYToX,mouseWheelScrollSensitivity:void 0!==t.mouseWheelScrollSensitivity?t.mouseWheelScrollSensitivity:1,fastScrollSensitivity:void 0!==t.fastScrollSensitivity?t.fastScrollSensitivity:5,mouseWheelSmoothScroll:void 0===t.mouseWheelSmoothScroll||t.mouseWheelSmoothScroll,listenOnDomNode:void 0!==t.listenOnDomNode?t.listenOnDomNode:null,horizontal:void 0!==t.horizontal?t.horizontal:1,horizontalScrollbarSize:void 0!==t.horizontalScrollbarSize?t.horizontalScrollbarSize:10,horizontalSliderSize:void 0!==t.horizontalSliderSize?t.horizontalSliderSize:0,vertical:void 0!==t.vertical?t.vertical:1,verticalScrollbarSize:void 0!==t.verticalScrollbarSize?t.verticalScrollbarSize:10,verticalSliderSize:void 0!==t.verticalSliderSize?t.verticalSliderSize:0};return e.horizontalSliderSize=void 0!==t.horizontalSliderSize?t.horizontalSliderSize:e.horizontalScrollbarSize,e.verticalSliderSize=void 0!==t.verticalSliderSize?t.verticalSliderSize:e.verticalScrollbarSize,We&&(e.className+=" mac"),e}function _t(t,e,i){return t>=e?e:t<=i?i:t}function gt(t,e){var i=e.getBoundingClientRect();return{x:t.clientX-i.left,y:t.clientY-i.top}}function vt(t){if(t.charCode){var e=String.fromCharCode(t.charCode).toUpperCase();return ji.fromString(e)}return $i[t.keyCode]||0}function yt(t){return Object.assign({},ai,t)}function St(t,e,i){var n=[],o=ci;e&&(o.width=e,o.flexGrow=0,o.flexShrink=0),i&&Object.assign(o,{formatter:i});for(var r=0;r<t.length;r++){var s=Object.assign({},o,t[r]);s.flexGrow=Math.max(0,s.flexGrow),s.flexShrink=Math.max(0,s.flexShrink),U(s.minWidth)&&(0===s.flexShrink?s.minWidth=s.width:s.minWidth=1),s.width<s.minWidth&&(s.width=s.minWidth),U(s.maxWidth)&&(0===s.flexGrow?s.maxWidth=s.width:s.maxWidth=1/0),s.width>s.maxWidth&&(s.width=s.maxWidth),!0===s.sortable&&(s.sortable={accessor:s.field},s.internalSortingDirection=""),n.push(s)}return n}function wt(t,e){var i=e-s(t,"width");if(0!==i){var n=h(t,i>0?"flexGrow":"flexShrink"),o=Math.max(1,l(n));if(0!==o)for(var r=0,u=t.length;r<u;r++)t[r].width+=i*n[r]/o}}var bt,Ct=function(t,e){return(Ct=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},Nt=function(){return(Nt=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++){e=arguments[i];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t}).apply(this,arguments)},Et=new(function(){function t(){this.listeners=[],this.unexpectedErrorHandler=function(t){setTimeout(function(){if(t.stack)throw new Error(t.message+"\n\n"+t.stack);throw t},0)}}return t.prototype.addListener=function(t){var e=this;return this.listeners.push(t),function(){e._removeListener(t)}},t.prototype.emit=function(t){this.listeners.forEach(function(e){e(t)})},t.prototype._removeListener=function(t){this.listeners.splice(this.listeners.indexOf(t),1)},t.prototype.setUnexpectedErrorHandler=function(t){this.unexpectedErrorHandler=t},t.prototype.getUnexpectedErrorHandler=function(){return this.unexpectedErrorHandler},t.prototype.onUnexpectedError=function(t){this.unexpectedErrorHandler(t),this.emit(t)},t.prototype.onUnexpectedExternalError=function(t){this.unexpectedErrorHandler(t)},t}()),xt="Canceled",Rt=function(){function t(){this._toDispose=[],this._lifecycle_disposable_isDisposed=!1}return Object.defineProperty(t.prototype,"toDispose",{get:function(){return this._toDispose},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._lifecycle_disposable_isDisposed=!0,this._toDispose=u(this._toDispose)},t.prototype._register=function(t){return this._lifecycle_disposable_isDisposed?(console.warn("Registering disposable on object that has already been disposed."),t.dispose()):this._toDispose.push(t),t},t.None=Object.freeze({dispose:function(){}}),t}(),Dt={done:!0,value:void 0};!function(t){function e(){return h}function i(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=t.length),{next:function(){return e>=i?Dt:{done:!1,value:t[e++]}}}}function n(e){return e?Array.isArray(e)?t.fromArray(e):e:t.empty()}function o(t,e){return{next:function(){var i=t.next();return i.done?Dt:{done:!1,value:e(i.value)}}}}function r(t,e){return{next:function(){for(;;){var i=t.next();if(i.done)return Dt;if(e(i.value))return{done:!1,value:i.value}}}}}function s(t,e){for(var i=t.next();!i.done;i=t.next())e(i.value)}function l(t){var e=[];return s(t,function(t){return e.push(t)}),e}var h={next:function(){return Dt}};t.empty=e,t.fromArray=i,t.from=n,t.map=o,t.filter=r,t.forEach=s,t.collect=l}(bt||(bt={}));(function(e){function i(t,i,n,o){return void 0===i&&(i=0),void 0===n&&(n=t.length),void 0===o&&(o=i-1),e.call(this,t,i,n,o)||this}t(i,e),i.prototype.current=function(){return e.prototype.current.call(this)},i.prototype.previous=function(){return this.index=Math.max(this.index-1,this.start-1),this.current()},i.prototype.first=function(){return this.index=this.start,this.current()},i.prototype.last=function(){return this.index=this.end-1,this.current()},i.prototype.parent=function(){return null}})(function(){function t(t,e,i,n){void 0===e&&(e=0),void 0===i&&(i=t.length),void 0===n&&(n=e-1),this.items=t,this.start=e,this.end=i,this.index=n}return t.prototype.first=function(){return this.index=this.start,this.current()},t.prototype.next=function(){return this.index=Math.min(this.index+1,this.end),this.current()},t.prototype.current=function(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]},t}()),function(e){function i(t,i){var n=e.call(this,t,i)||this;return n.navigator=t,n}t(i,e),i.prototype.current=function(){return this.fn(this.navigator.current())},i.prototype.previous=function(){return this.fn(this.navigator.previous())},i.prototype.parent=function(){return this.fn(this.navigator.parent())},i.prototype.first=function(){return this.fn(this.navigator.first())},i.prototype.last=function(){return this.fn(this.navigator.last())},i.prototype.next=function(){return this.fn(this.navigator.next())}}(function(){function t(t,e){this.iterator=t,this.fn=e}return t.prototype.next=function(){return this.fn(this.iterator.next())},t}());var At,Mt=function(){function t(t){this.element=t}return t}(),Ot=function(){function t(){this._size=0}return Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),t.prototype.isEmpty=function(){return!this._first},t.prototype.clear=function(){this._first=void 0,this._last=void 0,this._size=0},t.prototype.unshift=function(t){return this._insert(t,!1)},t.prototype.push=function(t){return this._insert(t,!0)},t.prototype._insert=function(t,e){var i=new Mt(t);if(this._first)if(e){var n=this._last;this._last=i,i.prev=n,n.next=i}else{var o=this._first;this._first=i,i.next=o,o.prev=i}else this._first=i,this._last=i;return this._size+=1,this._remove.bind(this,i)},t.prototype.shift=function(){if(this._first){var t=this._first.element;return this._remove(this._first),t}},t.prototype.pop=function(){if(this._last){var t=this._last.element;return this._remove(this._last),t}},t.prototype._remove=function(t){for(var e=this._first;e instanceof Mt;){if(e===t){if(e.prev&&e.next){var i=e.prev;i.next=e.next,e.next.prev=i}else e.prev||e.next?e.next?e.prev||(this._first=this._first.next,this._first.prev=void 0):(this._last=this._last.prev,this._last.next=void 0):(this._first=void 0,this._last=void 0);this._size-=1;break}e=e.next}},t.prototype.iterator=function(){var t,e=this._first;return{next:function(){return e?(t?t.value=e.element:t={done:!1,value:e.element},e=e.next,t):Dt}}},t.prototype.toArray=function(){for(var t=[],e=this._first;e instanceof Mt;e=e.next)t.push(e.element);return t},t}();!function(t){function e(t){return function(e,i,n){void 0===i&&(i=null);var o=!1,r=t(function(t){if(!o)return r?r.dispose():o=!0,e.call(i,t)},null,n);return o&&r.dispose(),r}}function i(t,e){return function(i,n,o){return void 0===n&&(n=null),t(function(t){return i.call(n,e(t))},null,o)}}function n(t,e){return function(i,n,o){return void 0===n&&(n=null),t(function(t){e(t),i.call(n,t)},null,o)}}function o(t,e){return function(i,n,o){return void 0===n&&(n=null),t(function(t){return e(t)&&i.call(n,t)},null,o)}}function r(t){return t}function s(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e,i,n){return void 0===i&&(i=null),a(t.map(function(t){return t(function(t){return e.call(i,t)},null,n)}))}}function l(t,e){var n=void 0;return i(t,function(t){return n=e(n,t)})}function h(t,e,i,n,o){void 0===i&&(i=100),void 0===n&&(n=!1);var r,s=void 0,l=void 0,h=0,u=new Lt({leakWarningThreshold:o,onFirstListenerAdd:function(){r=t(function(t){h++,s=e(s,t),n&&!l&&u.fire(s),clearTimeout(l),l=setTimeout(function(){var t=s;s=void 0,l=void 0,(!n||h>1)&&u.fire(t),h=0},i)})},onLastListenerRemove:function(){r.dispose()}});return u.event}function u(t){var n=(new Date).getTime();return i(e(t),function(t){return(new Date).getTime()-n})}function c(t){var e,i=!0;return o(t,function(t){var n=i||t!==e;return i=!1,e=t,n})}function d(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=[]);var n=i.slice(),o=t(function(t){n?n.push(t):s.fire(t)}),r=function(){n&&n.forEach(function(t){return s.fire(t)}),n=null},s=new Lt({onFirstListenerAdd:function(){o||(o=t(function(t){return s.fire(t)}))},onFirstListenerDidAdd:function(){n&&(e?setTimeout(r):r())},onLastListenerRemove:function(){o&&o.dispose(),o=null}});return s.event}function p(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=[]),i=i.slice(),t(function(t){i.push(t),o.fire(t)});var n=function(t,e){return i.forEach(function(i){return t.call(e,i)})},o=new Lt({onListenerDidAdd:function(t,i,o){e?setTimeout(function(){return n(i,o)}):n(i,o)}});return o.event}function f(t){return new y(t)}function m(t,e,i){void 0===i&&(i=function(t){return t});var n=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o.fire(i.apply(void 0,t))},o=new Lt({onFirstListenerAdd:function(){return t.on(e,n)},onLastListenerRemove:function(){return t.removeListener(e,n)}});return o.event}function _(t){var e=new Lt,i=!1;return t.then(void 0,function(){return null}).then(function(){i?e.fire():setTimeout(function(){return e.fire()},0)}),i=!0,e.event}function g(t){return new Promise(function(i){return e(t)(i)})}var v={dispose:function(){}};t.None=function(){return v},t.once=e,t.map=i,t.forEach=n,t.filter=o,t.signal=r,t.any=s,t.reduce=l,t.debounce=h,t.stopwatch=u,t.latch=c,t.buffer=d,t.echo=p;var y=function(){function t(t){this._event=t}return Object.defineProperty(t.prototype,"event",{get:function(){return this._event},enumerable:!0,configurable:!0}),t.prototype.map=function(e){return new t(i(this._event,e))},t.prototype.forEach=function(e){return new t(n(this._event,e))},t.prototype.filter=function(e){return new t(o(this._event,e))},t.prototype.latch=function(){return new t(c(this._event))},t.prototype.on=function(t,e,i){return this._event(t,e,i)},t.prototype.once=function(t,i,n){return e(this._event)(t,i,n)},t}();t.chain=f,t.fromNodeEventEmitter=m,t.fromPromise=_,t.toPromise=g}(At||(At={}));var Pt=-1,kt=function(){function t(t,e){void 0===e&&(e=Math.random().toString(18).slice(2,5)),this.customThreshold=t,this.name=e,this._warnCountdown=0}return t.prototype.dispose=function(){this._stacks&&this._stacks.clear()},t.prototype.check=function(t){var e=this,i=Pt;if("number"==typeof this.customThreshold&&(i=this.customThreshold),!(i<=0||t<i)){this._stacks||(this._stacks=new Map);var n=(new Error).stack.split("\n").slice(3).join("\n"),o=this._stacks.get(n)||0;if(this._stacks.set(n,o+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=.5*i;var r,s=0;this._stacks.forEach(function(t,e){(!r||s<t)&&(r=e,s=t)}),console.warn("["+this.name+"] potential listener LEAK detected, having "+t+" listeners already. MOST frequent listener ("+s+"):"),console.warn(r)}return function(){var t=e._stacks.get(n)||0;e._stacks.set(n,t-1)}}},t}(),Lt=function(){function t(t){this._disposed=!1,this._options=t,this._leakageMon=Pt>0?new kt(this._options&&this._options.leakWarningThreshold):void 0}return Object.defineProperty(t.prototype,"event",{get:function(){var e=this;return this._event||(this._event=function(i,n,o){e._listeners||(e._listeners=new Ot);var r=e._listeners.isEmpty();r&&e._options&&e._options.onFirstListenerAdd&&e._options.onFirstListenerAdd(e);var s=e._listeners.push(n?[i,n]:i);r&&e._options&&e._options.onFirstListenerDidAdd&&e._options.onFirstListenerDidAdd(e),e._options&&e._options.onListenerDidAdd&&e._options.onListenerDidAdd(e,i,n);var l;e._leakageMon&&(l=e._leakageMon.check(e._listeners.size));var h;return h={dispose:function(){l&&l(),h.dispose=t._noop,e._disposed||(s(),e._options&&e._options.onLastListenerRemove&&(e._listeners&&!e._listeners.isEmpty()||e._options.onLastListenerRemove(e)))}},Array.isArray(o)&&o.push(h),h}),this._event},enumerable:!0,configurable:!0}),t.prototype.fire=function(t){if(this._listeners){this._deliveryQueue||(this._deliveryQueue=[]);for(var e=this._listeners.iterator(),i=e.next();!i.done;i=e.next())this._deliveryQueue.push([i.value,t]);for(;this._deliveryQueue.length>0;){var o=this._deliveryQueue.shift(),r=o[0],s=o[1];try{"function"==typeof r?r.call(void 0,s):r[0].call(r[1],s)}catch(i){n(i)}}}},t.prototype.dispose=function(){this._listeners&&(this._listeners=void 0),this._deliveryQueue&&(this._deliveryQueue.length=0),this._leakageMon&&this._leakageMon.dispose(),this._disposed=!0},t._noop=function(){},t}(),Tt=(function(o){function r(){return null!==o&&o.apply(this,arguments)||this}t(r,o),r.prototype.fireAsync=function(t){return e(this,void 0,void 0,function(){var e,o,r,s,l,h;return i(this,function(i){switch(i.label){case 0:if(!this._listeners)return[2];for(this._asyncDeliveryQueue||(this._asyncDeliveryQueue=[]),e=this._listeners.iterator(),o=e.next();!o.done;o=e.next())h=[],this._asyncDeliveryQueue.push([o.value,t(h,"function"==typeof o.value?o.value:o.value[0]),h]);i.label=1;case 1:if(!(this._asyncDeliveryQueue.length>0))return[3,3];r=this._asyncDeliveryQueue.shift(),s=r[0],l=r[1],h=r[2];try{"function"==typeof s?s.call(void 0,l):s[0].call(s[1],l)}catch(t){return n(t),[3,1]}return Object.freeze(h),[4,Promise.all(h)];case 2:return i.sent(),[3,1];case 3:return[2]}})})}}(Lt),function(){function t(){var t=this;this.hasListeners=!1,this.events=[],this.emitter=new Lt({onFirstListenerAdd:function(){return t.onFirstListenerAdd()},onLastListenerRemove:function(){return t.onLastListenerRemove()}})}Object.defineProperty(t.prototype,"event",{get:function(){return this.emitter.event},enumerable:!0,configurable:!0}),t.prototype.add=function(t){var e=this,i={event:t,listener:null};return this.events.push(i),this.hasListeners&&this.hook(i),c(r(function(){e.hasListeners&&e.unhook(i);var t=e.events.indexOf(i);e.events.splice(t,1)}))},t.prototype.onFirstListenerAdd=function(){var t=this;this.hasListeners=!0,this.events.forEach(function(e){return t.hook(e)})},t.prototype.onLastListenerRemove=function(){var t=this;this.hasListeners=!1,this.events.forEach(function(e){return t.unhook(e)})},t.prototype.hook=function(t){var e=this;t.listener=t.event(function(t){return e.emitter.fire(t)})},t.prototype.unhook=function(t){t.listener&&t.listener.dispose(),t.listener=null},t.prototype.dispose=function(){this.emitter.dispose()}}(),function(){function t(){var t=this;this.listening=!1,this.inputEvent=At.None,this.inputEventListener=Rt.None,this.emitter=new Lt({onFirstListenerDidAdd:function(){t.listening=!0,t.inputEventListener=t.inputEvent(t.emitter.fire,t.emitter)},onLastListenerRemove:function(){t.listening=!1,t.inputEventListener.dispose()}}),this.event=this.emitter.event}Object.defineProperty(t.prototype,"input",{set:function(t){this.inputEvent=t,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=t(this.emitter.fire,this.emitter))},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.inputEventListener.dispose(),this.emitter.dispose()}}(),{component:null,mountID:1,sandbox:!0,rootComponents:{},rootInstances:{}});const Kt={key:!0,ref:!0},zt=t=>setTimeout(t,0),Ut=t=>{const e=void 0===window.setImmediate?zt:window.setImmediate;e(t)},Wt=t=>setTimeout(t,99),Ft=t=>{const e=void 0===window.requestIdleCallback?Wt:window.requestIdleCallback;e(t)},It=/^on[A-Z]/,Ht="http://www.w3.org/2000/svg",Yt="object"==typeof document&&"textContent"in document?"textContent":"nodeValue",Bt={tagNamePrefix:"",eventRegistry:{},createBody(){return document.body},createComment(t){return document.createComment(t)},createEmpty(){return this.createComment(" empty ")},createText(t){return document.createTextNode(t)},updateText(t,e){t[Yt]=e},isSVGMode:!1,createElement(t){const e=t._internal._parent;this.isSVGMode="svg"===t.type||e&&e.namespaceURI===Ht;let i;if(this.isSVGMode)i=document.createElementNS(Ht,t.type);else if(this.tagNamePrefix){let e="function"==typeof this.tagNamePrefix?this.tagNamePrefix(t.type):this.tagNamePrefix;i=document.createElement(e+t.type)}else i=document.createElement(t.type);let n=t.props;return this.setNativeProps(i,n),i},appendChild(t,e){return e.appendChild(t)},removeChild(t,e){(e=e||t.parentNode)&&e.removeChild(t)},replaceChild(t,e,i){(i=i||e.parentNode).replaceChild(t,e)},insertAfter(t,e,i){i=i||e.parentNode;const n=e.nextSibling;n?i.insertBefore(t,n):i.appendChild(t)},insertBefore(t,e,i){(i=i||e.parentNode).insertBefore(t,e)},addEventListener(t,e,i,n){return this.eventRegistry[e]?this.eventRegistry[e]("addEvent",t,e,i,n):t.addEventListener(e,i)},removeEventListener(t,e,i,n){return this.eventRegistry[e]?this.eventRegistry[e]("removeEvent",t,e,i,n):t.removeEventListener(e,i)},removeAllEventListeners(t){},removeAttribute(t,e){if("dangerouslySetInnerHTML"===e)return t.innerHTML=null;if("className"===e&&(e="class"),e in t)try{t[e]=null}catch(t){}t.removeAttribute(e)},setAttribute(t,e,i){if("dangerouslySetInnerHTML"===e)return t.innerHTML=i.__html;if("className"===e&&(e="class"),e in t)try{t[e]=i}catch(n){t.setAttribute(e,i)}else t.setAttribute(e,i)},setStyles(t,e){let i={};for(let e in i){const n=i[e];if(Array.isArray(n))for(let i=0;i<n.length;i++)t.style[e]=n[i];else t.style[e]=n}},setNativeProps(t,e){for(let i in e){let n=e[i];if("children"!==i&&null!=n)if("style"===i)this.setStyles(t,n);else if(It.test(i)){let e=i.slice(2).toLowerCase();this.addEventListener(t,e,n)}else this.setAttribute(t,i,n)}}};class jt{constructor(){this._currentElement=null}mountComponent(t,e,i,n){this._parent=t,this._parentInstance=e,this._context=i;let o={_internal:this},r=this.getNativeNode();return n?n(r,t):Bt.appendChild(r,t),o}unmountComponent(t){this._nativeNode&&!t&&Bt.removeChild(this._nativeNode,this._parent),this._nativeNode=null,this._parent=null,this._parentInstance=null,this._context=null}updateComponent(){}getNativeNode(){return null==this._nativeNode&&(this._nativeNode=Bt.createEmpty()),this._nativeNode}}var Vt={update(t,e,i){let n=t&&t.ref||null,o=e&&e.ref||null;n!==o&&(null!=n&&this.detach(t._owner,n,i),null!=o&&this.attach(e._owner,o,i))},attach(t,e,i){if(!t)throw new Error("You might be adding a ref to a component that was not created inside a component's `render` method, or you have multiple copies of Rax loaded.");let n=i.getPublicInstance();"function"==typeof e?e(n):"object"==typeof e?e.current=n:t._instance.refs[e]=n},detach(t,e,i){if("function"==typeof e)e(null);else{let n=i.getPublicInstance();"object"==typeof e&&e.current===n?e.current=null:t._instance.refs[e]===n&&delete t._instance.refs[e]}}},Gt=(t,e,i)=>{const n=e&&e.key;const o="string"==typeof n;const r="."+i.toString(36);if(o){let e="$"+n,i=void 0===t[e];return i||console.warn(`Encountered two children with the same key "${n}".`),i?e:r}return r};const Xt=/^on[A-Z]/;class Qt{constructor(t){this._currentElement=t}mountComponent(t,e,i,n){this._parent=t,this._parentInstance=e,this._context=i,this._mountID=Tt.mountID++;let o=this._currentElement.props,r={_internal:this,type:this._currentElement.type,props:o},s=o.append;this._instance=r,this._prevStyleCopy=Object.assign({},o.style);let l=this.getNativeNode();"tree"!==s&&(n?n(l,t):Bt.appendChild(l,t)),this._currentElement&&this._currentElement.ref&&Vt.attach(this._currentElement._owner,this._currentElement.ref,this);let h=o.children;return null!=h&&this.mountChildren(h,i),"tree"===s&&(n?n(l,t):Bt.appendChild(l,t)),r}mountChildren(t,e){Array.isArray(t)||(t=[t]);let i=this._renderedChildren={};return t.map((t,n)=>{let o=O(t);let r=Gt(i,t,n);i[r]=o;o._mountIndex=n;let s=o.mountComponent(this.getNativeNode(),this._instance,e,null);return s})}unmountChildren(t){let e=this._renderedChildren;if(e){for(let i in e){let n=e[i];n.unmountComponent(t)}this._renderedChildren=null}}unmountComponent(t){if(this._nativeNode){let e=this._currentElement.ref;e&&Vt.detach(this._currentElement._owner,e,this),se.remove(this._nativeNode),t||Bt.removeChild(this._nativeNode,this._parent),Bt.removeAllEventListeners(this._nativeNode)}this.unmountChildren(t),this._currentElement=null,this._nativeNode=null,this._parent=null,this._parentInstance=null,this._context=null,this._instance=null,this._prevStyleCopy=null}updateComponent(t,e,i,n){this._currentElement=e,Vt.update(t,e,this);let o=t.props,r=e.props;this.updateProperties(o,r),this.updateChildren(r.children,n)}updateProperties(t,e){let i,n,o;for(i in t)if("children"!==i&&!e.hasOwnProperty(i)&&t.hasOwnProperty(i)&&null!=t[i])if("style"===i){let t=this._prevStyleCopy;for(n in t)t.hasOwnProperty(n)&&((o=o||{})[n]="");this._prevStyleCopy=null}else Xt.test(i)?"function"==typeof t[i]&&Bt.removeEventListener(this.getNativeNode(),i.slice(2).toLowerCase(),t[i]):Bt.removeAttribute(this.getNativeNode(),i,t[i]);for(i in e){let r=e[i],s="style"===i?this._prevStyleCopy:null!=t?t[i]:void 0;if("children"!==i&&e.hasOwnProperty(i)&&r!==s&&(null!=r||null!=s))if("style"===i)if(r?r=this._prevStyleCopy=Object.assign({},r):this._prevStyleCopy=null,null!=s){for(n in s)!s.hasOwnProperty(n)||r&&r.hasOwnProperty(n)||((o=o||{})[n]="");for(n in r)r.hasOwnProperty(n)&&s[n]!==r[n]&&((o=o||{})[n]=r[n])}else o=r;else if(Xt.test(i)){let t=i.slice(2).toLowerCase();"function"==typeof s&&Bt.removeEventListener(this.getNativeNode(),t,s,e),"function"==typeof r&&Bt.addEventListener(this.getNativeNode(),t,r,e)}else null!=r?Bt.setAttribute(this.getNativeNode(),i,r):Bt.removeAttribute(this.getNativeNode(),i,t[i])}o&&Bt.setStyles(this.getNativeNode(),o)}updateChildren(t,e){let i=this._renderedChildren;if(null!=t||null!=i){let n={},o={};if(null!=t){Array.isArray(t)||(t=[t]);for(let r=0,s=t.length;r<s;r++){let s=t[r],l=Gt(n,s,r),h=i&&i[l],u=h&&h._currentElement,a=h&&h._context;if(null!=h&&N(u,s))u===s&&a===e||h.updateComponent(u,s,e,e),n[l]=h;else{if(h){let t=h.getNativeNode();h.unmountComponent(!0),o[l]=t}n[l]=O(s)}}}let r,s;if(null!=i)for(let t in i)if(i.hasOwnProperty(t)){let e=i[t],o=!n[t];r?o&&e.unmountComponent():(r=e,s=o)}if(null!=n){let t=0,s=0,l=null,h=[];for(let u in n)if(n.hasOwnProperty(u)){let a=n[u],c=i&&i[u];if(c===a){let e=c.getNativeNode();if(Array.isArray(e)||(e=[e]),c._mountIndex<t){Array.isArray(l)&&(l=l[l.length-1]);for(let t=e.length-1;t>=0;t--)Bt.insertAfter(e[t],l)}h=h.concat(e),t=Math.max(c._mountIndex,t),c._mountIndex=s}else{null!=c&&(t=Math.max(c._mountIndex,t));let i=this.getNativeNode();Array.isArray(i)&&(i=this._parent),a.mountComponent(i,this._instance,e,(e,i)=>{function n(t){Array.isArray(l)&&(l=l[l.length-1]);let e;if(r&&!l&&(e=r.getNativeNode(),Array.isArray(e)&&(e=e[0])),l)for(let e=t.length-1;e>=0;e--)Bt.insertAfter(t[e],l);else if(e)for(let i=0;i<t.length;i++)Bt.insertBefore(t[i],e);else for(let e=0;e<t.length;e++)Bt.appendChild(t[e],i)}let s=o[u];Array.isArray(e)||(e=[e]);if(s)if(Array.isArray(s)||(s=[s]),c._mountIndex<t){for(let t=0;t<s.length;t++)Bt.removeChild(s[t]);n(e)}else{let t;for(let i=0;i<e.length;i++){let n=e[i];s[i]?Bt.replaceChild(n,s[i]):Bt.insertAfter(n,t),t=n}if(e.length<s.length)for(let t=e.length;t<s.length;t++)Bt.removeChild(s[t])}else n(e);h=h.concat(e)}),a._mountIndex=s}s++,l=a.getNativeNode()}if(Array.isArray(this._nativeNode)){this._nativeNode.splice(0,this._nativeNode.length);for(let t=0;t<h.length;t++)this._nativeNode.push(h[t])}}s&&r.unmountComponent(),this._renderedChildren=n}}getNativeNode(){return null==this._nativeNode&&(this._nativeNode=Bt.createElement(this._instance),se.set(this._nativeNode,this._instance)),this._nativeNode}getPublicInstance(){return this.getNativeNode()}getName(){return this._currentElement.type}}class $t extends Qt{constructor(t){super(t)}mountComponent(t,e,i,n){this._parent=t,this._parentInstance=e,this._context=i,this._mountID=Tt.mountID++;let o={_internal:this};this._instance=o;let r=this.getNativeNode(),s=this._currentElement;if(this.mountChildren(s,i),n)n(r,t);else for(let e=0;e<r.length;e++){let i=r[e];Bt.appendChild(i,t)}return o}mountChildren(t,e){let i=this._renderedChildren={},n=this.getNativeNode();return t.map((t,o)=>{let r=O(t);let s=Gt(i,t,o);i[s]=r;r._mountIndex=o;let l=r.mountComponent(this._parent,this._instance,e,t=>{if(Array.isArray(t))for(let e=0;e<t.length;e++)n.push(t[e]);else n.push(t)});return l})}unmountComponent(t){if(this._nativeNode&&(se.remove(this._nativeNode),!t))for(let t=0;t<this._nativeNode.length;t++)Bt.removeChild(this._nativeNode[t]);this.unmountChildren(!0),this._currentElement=null,this._nativeNode=null,this._parent=null,this._parentInstance=null,this._context=null,this._instance=null}updateComponent(t,e,i,n){this._currentElement=e,this.updateChildren(this._currentElement,n)}getNativeNode(){return null==this._nativeNode&&(this._nativeNode=[]),this._nativeNode}getPublicInstance(){return this.getNativeNode()}getName(){return"fragment"}}class qt{constructor(t,e,i){this.props=t,this.context=e,this.refs={},this.updater=i}isComponentClass(){}setState(t,e){this.updater.setState(this,t,e)}forceUpdate(t){this.updater.forceUpdate(this,t)}}class Zt extends qt{constructor(t,e){super(),this.pureRender=t,this.hooksIndex=0,this.hooks={},this.didMountHandlers=[],this.didUpdateHandlers=[],this.willUnmountHandlers=[],t.forwardRef&&(this.prevForwardRef=this.forwardRef=e);const i=t.compares;i&&(this.shouldComponentUpdate=(t=>{let e=!0;for(let n=i.length-1;n>-1&&!(e=i[n](this.props,t));n--);return!e||this.prevForwardRef!==this.forwardRef}))}getCurrentHookId(){return++this.hooksIndex}readContext(t){const e=t.Provider,i=this._internal._context[e.contextProp];if(i){const t=this._internal._mountID;if(!i[t]){i[t]={};const e=e=>{e!==i[t].renderedContext&&this.update()};i.on(e),this.willUnmountHandlers.push(()=>{delete i[t];i.off(e)})}return i[t].renderedContext=i.value}return e.defaultValue}isComponentRendered(){return Boolean(this._internal._renderedComponent)}componentDidMount(){this.didMountHandlers.forEach(t=>t())}componentDidUpdate(){this.didUpdateHandlers.forEach(t=>t())}componentWillUnmount(){this.willUnmountHandlers.forEach(t=>t())}update(){Ut(()=>this.forceUpdate())}render(){return this.hooksIndex=0,this.pureRender(this.props,this.forwardRef?this.forwardRef:this.context)}}const Jt={setState:function(t,e,i){let n=t._internal;n&&(x(n,e),E(n,i),!n._pendingState&&n._renderedComponent&&this.runUpdate(t))},forceUpdate:function(t,e){let i=t._internal;i&&(i._pendingForceUpdate=!0,E(i,e),i._renderedComponent&&this.runUpdate(t))},runUpdate:function(t){let e=t._internal,i=e._pendingCallbacks;e._pendingCallbacks=null;let n=e._currentElement,o=e._context;(e._pendingStateQueue||e._pendingForceUpdate)&&e.updateComponent(n,n,o,o),this.runCallbacks(i,t)},runCallbacks(t,e){if(t)for(let i=0;i<t.length;i++)t[i].call(e)}},te=Object.prototype.hasOwnProperty;class ee{constructor(t){this._currentElement=t}getName(){let t=this._currentElement.type,e=this._instance&&this._instance.constructor;return t.displayName||e&&e.displayName||t.name||e&&e.name||null}mountComponent(t,e,i,n){this._parent=t,this._parentInstance=e,this._context=i,this._mountID=Tt.mountID++,this._updateCount=0;let o,r,s=this._currentElement,l=s.type,h=s.ref,u=s.props,a=l.prototype,c=a&&l.prototype.isComponentClass,d=a&&l.prototype.render,p=this._processContext(i);try{if(c||d)o=new l(u,p,Jt);else{if("function"!=typeof l)throw new Error(`Invalid component type: ${l}. (current: ${"object"==typeof l&&Object.keys(l)||typeof l})`);o=new Zt(l,h)}}catch(t){return M(e,t),o}o.props=u,o.context=p,o.refs={},o.updater=Jt,o._internal=this,this._instance=o;let f=o.state;void 0===f&&(o.state=f=null);let m=null,_=t=>{m=t};o.componentWillMount&&A(()=>{o.componentWillMount()},o,_),null==r&&(Tt.component=this,o.state=this._processPendingState(u,p),A(()=>{r=o.render()},o,_),Tt.component=null),this._renderedComponent=O(r),this._renderedComponent.mountComponent(this._parent,o,this._processChildContext(i),n),m&&M(o,m),!this._currentElement.type.forwardRef&&h&&Vt.attach(s._owner,h,this),o.componentDidMount&&A(()=>{o.componentDidMount()},o);let g=this._pendingCallbacks;return g&&(this._pendingCallbacks=null,Jt.runCallbacks(g,o)),o}unmountComponent(t){let e=this._instance;if(e){if(e.componentWillUnmount&&A(()=>{e.componentWillUnmount()},e),e._internal=null,null!=this._renderedComponent){let e=this._currentElement.ref;!this._currentElement.type.forwardRef&&e&&Vt.detach(this._currentElement._owner,e,this),this._renderedComponent.unmountComponent(t),this._renderedComponent=null,this._instance=null}this._currentElement=null,this._parentInstance=null,this._pendingStateQueue=null,this._pendingForceUpdate=!1,this._context=null}}_processContext(t){let e=this._currentElement.type.contextTypes;if(!e)return{};let i={};for(let n in e)i[n]=t[n];return i}_processChildContext(t){let e=this._instance,i=e.getChildContext&&e.getChildContext();return i?Object.assign({},t,i):t}_processPendingState(t,e){let i=this._instance,n=this._pendingStateQueue;if(!n)return i.state;this._pendingStateQueue=null;let o=Object.assign({},i.state);for(let r=0;r<n.length;r++){let s=n[r];Object.assign(o,"function"==typeof s?s.call(i,o,t,e):s)}return o}updateComponent(t,e,i,n){let o=this._instance;o||console.error(`Update component '${this.getName()}' that has already been unmounted (or failed to mount).`);let r,s,l=!1;this._context===n?r=o.context:(r=this._processContext(n),l=!0),t===e?s=e.props:(s=e.props,l=!0),l&&o.componentWillReceiveProps&&(this._pendingState=!0,A(()=>{o.componentWillReceiveProps(s,r)},o),this._pendingState=!1),this._currentElement.type.forwardRef?(o.prevForwardRef=t.ref,o.forwardRef=e.ref):Vt.update(t,e,this);let h=!0,u=o.props,a=o.state,c=this._processPendingState(s,r);if(this._pendingForceUpdate||(o.shouldComponentUpdate?h=A(()=>o.shouldComponentUpdate(s,c,r),o):o.isPureComponentClass&&(h=!D(u,s)||!D(a,c))),h){this._pendingForceUpdate=!1;let t=o.context;A(()=>{o.componentWillUpdate&&o.componentWillUpdate(s,c,r)},o),this._currentElement=e,this._context=n,o.props=s,o.state=c,o.context=r,this._updateRenderedComponent(n),A(()=>{o.componentDidUpdate&&o.componentDidUpdate(u,a,t)},o),this._updateCount++}else this._currentElement=e,this._context=n,o.props=s,o.state=c,o.context=r;let d=this._pendingCallbacks;d&&(this._pendingCallbacks=null,Jt.runCallbacks(d,o))}_updateRenderedComponent(t){let e,i=this._renderedComponent,n=i._currentElement,o=this._instance;if(Tt.component=this,A(()=>{e=o.render()},o),Tt.component=null,N(n,e)){const o=i._context,r=this._processChildContext(t);n===e&&o===r||i.updateComponent(n,e,o,r)}else{let n=i.getNativeNode();i.unmountComponent(!0),this._renderedComponent=O(e),this._renderedComponent.mountComponent(this._parent,o,this._processChildContext(t),(t,e)=>{Array.isArray(t)||(t=[t]);Array.isArray(n)||(n=[n]);let i;for(let o=0;o<t.length;o++){let r=t[o];n[o]?Bt.replaceChild(r,n[o]):i?Bt.insertAfter(r,i):Bt.appendChild(r,e),i=r}if(t.length<n.length)for(let e=t.length;e<n.length;e++)Bt.removeChild(n[e])})}}getNativeNode(){let t=this._renderedComponent;if(t)return t.getNativeNode()}getPublicInstance(){let t=this._instance;return t instanceof Zt?null:t}}class ie{constructor(t){this._currentElement=t,this._stringText=String(t)}mountComponent(t,e,i,n){this._parent=t,this._parentInstance=e,this._context=i,this._mountID=Tt.mountID++;let o=this.getNativeNode();return n?n(o,t):Bt.appendChild(o,t),{_internal:this}}unmountComponent(t){this._nativeNode&&!t&&Bt.removeChild(this._nativeNode,this._parent),this._currentElement=null,this._nativeNode=null,this._parent=null,this._parentInstance=null,this._context=null,this._stringText=null}updateComponent(t,e,i){t!==e&&(this._currentElement=e,this._stringText=String(e),Bt.updateText(this.getNativeNode(),this._stringText))}getNativeNode(){return null==this._nativeNode&&(this._nativeNode=document.createTextNode(this._stringText)),this._nativeNode}}let ne=1;class oe extends qt{constructor(...t){super(...t),this.rootID=ne++}isRootComponent(){}render(){return this.props.children}getPublicInstance(){return this.getRenderedComponent().getPublicInstance()}getRenderedComponent(){return this._internal._renderedComponent}}const re="$$instance";var se={set(t,e){t[re]||(t[re]=e,e.rootID&&(Tt.rootInstances[e.rootID]=e,Tt.rootComponents[e.rootID]=e._internal))},get(t){return t[re]},remove(t){let e=this.get(t);e&&(t[re]=null,e.rootID&&(delete Tt.rootComponents[e.rootID],delete Tt.rootInstances[e.rootID]))},mount(t,e,i){null==e&&(e=document.body);let n;if(i){let t=i._internal;n=t._processChildContext(t._context)}let o=this.get(e);if(o&&o.isRootComponent){let i=o.getRenderedComponent(),r=i._currentElement;if(N(r,t)){let e=i._context,s=n||e;return r===t&&e===s||i.updateComponent(r,t,e,s),o}C(e)}let r=O(g(oe,null,t)),s=n||{},l=r.mountComponent(e,null,s);return this.set(e,l),l}};const le={createElement:g,useEffect:S,useLayoutEffect:w},he={unmountComponentAtNode:C,render:P};var ue,ae=function(){function t(t){this.group=t,this.aggregations=[]}return Object.defineProperty(t.prototype,"rows",{get:function(){return this.group.rows},enumerable:!0,configurable:!0}),t.prototype.store=function(t,e,i){this.aggregations.push({type:t,field:e,value:i})},t.prototype.getByField=function(t){return this.aggregations.find(function(e){return e.field===t})},t}(),ce=function(){function t(t){this.ds=t,this.rows=[],this._collapsed=!1}return Object.defineProperty(t.prototype,"collapsed",{get:function(){return this._collapsed},set:function(t){this._collapsed=t,t?this.ds.collapseGroup(this):this.ds.expandGroup(this)},enumerable:!0,configurable:!0}),t}();!function(t){t.number="number",t.string="string",t.undefined="undefined",t.object="object",t.function="function",t.null="null",t.class="class",t.boolean="boolean",t.symbol="symbol",t.array="array"}(ue||(ue={}));var de;ue.boolean,ue.number,ue.string,ue.function,ue.symbol,ue.array;!function(t){t[t.none=0]="none",t[t.horizontal=1]="horizontal",t[t.vertical=2]="vertical",t[t.diagonal=4]="diagonal",t[t.all=7]="all"}(de||(de={}));var pe;!function(t){t.Add="add",t.Remove="remove"}(pe||(pe={}));var fe={fullUpdateThreshold:1e3,hasher:Q},me=function(){function t(t){void 0===t&&(t={}),this.suspend=!1,this.hashes=[],this.items=[],this.rows=[],this.memorizedRows=[],this.collapsedGroups=[],this.sortingSettings=[],this._onRowsChanged=new Lt,this.toDispose=[],this.options=Nt({},t,fe),this.toDispose.push(this._onRowsChanged)}return Object.defineProperty(t.prototype,"onRowsChanged",{get:function(){return this._onRowsChanged.event},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this.rows.length},enumerable:!0,configurable:!0}),t.prototype.getItem=function(t){return this.items[t]},t.prototype.getRow=function(t){return this.rows[t]},t.prototype.getItems=function(){return this.items.slice()},t.prototype.setItems=function(t){if(!T(t))throw new Error("Expect an array");this.suspend?this.items=t.slice():(this.memorizedRows=this.rows.slice(),this.items=t.slice(),this.refresh())},t.prototype.setItem=function(t,e){this.suspend?this.items[t]=e:(this.memorizedRows=this.rows.slice(),this.items[t]=e,this.refresh())},t.prototype.push=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i,n;this.suspend?(n=this.items).push.apply(n,t):(this.memorizedRows=this.rows.slice(),(i=this.items).push.apply(i,t),this.refresh())},t.prototype.pop=function(){this.suspend?this.items.pop():(this.memorizedRows=this.rows.slice(),this.items.pop(),this.refresh())},t.prototype.unshift=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i,n;this.suspend?(n=this.items).unshift.apply(n,t):(this.memorizedRows=this.rows.slice(),(i=this.items).unshift.apply(i,t),this.refresh())},t.prototype.shift=function(){this.suspend?this.items.shift():(this.memorizedRows=this.rows.slice(),this.items.shift(),this.refresh())},t.prototype.splice=function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];var o,r;this.suspend?(r=this.items).splice.apply(r,[t,e].concat(i)):(this.memorizedRows=this.rows.slice(),(o=this.items).splice.apply(o,[t,e].concat(i)),this.refresh())},t.prototype.sort=function(t){if(this.suspend)return this.items.sort(t);this.memorizedRows=this.rows.slice();var e=this.items.sort(t);return this.refresh(),e},t.prototype.reverse=function(){this.suspend?this.items.reverse():(this.memorizedRows=this.rows.slice(),this.items.reverse(),this.refresh())},t.prototype.setGrouping=function(t){this.groupingSettings=[],this.collapsedGroups.length=0,T(t)&&t.length&&(this.groupingSettings=t.map(function(t,e){var i=Object.create(null);return i.accessor=$(t.accessor),i.formatter=t.formatter||k,i.comparer=t.comparer,i.level=e,i.aggregators=t.aggregators||[],i})),this.scheduleUpdate()},t.prototype.getGrouping=function(t){return U(t)?null:this.groupingSettings[t]},t.prototype.getGroupings=function(){return this.groupingSettings.slice()},t.prototype.setSorting=function(t){this.sortingSettings.length=0,t&&(this.sortingSettings=t.slice(),this.scheduleUpdate())},t.prototype.setFilter=function(t){this.filter=t,this.scheduleUpdate()},t.prototype.getSortingByField=function(t){return this.sortingSettings.find(function(e){return e.accessor===t})},t.prototype.beginUpdate=function(){this.suspend=!0,this.memorizedRows=this.rows.slice()},t.prototype.endUpdate=function(){this.suspend=!1,this.refresh()},t.prototype.collapseGroup=function(t){var e=t.$$hash;-1===this.collapsedGroups.indexOf(e)&&(this.collapsedGroups.push(e),this.scheduleUpdate())},t.prototype.expandGroup=function(t){var e=t.$$hash,i=this.collapsedGroups.indexOf(e);-1!==i&&(this.collapsedGroups.splice(i,1),this.scheduleUpdate())},t.prototype.scheduleUpdate=function(){var t=this;this.prevFrame&&cancelAnimationFrame&&cancelAnimationFrame(this.prevFrame),this.prevFrame=requestAnimationFrame(function(){return t.refresh()})},t.prototype.calulateDiff=function(t,e){var i=this,n=[];if(t.length>this.options.fullUpdateThreshold||e.length>this.options.fullUpdateThreshold)return this.hashes.length=0,t.length&&n.push({type:pe.Remove,oldPos:0,newPos:0,items:t}),e.length&&n.push({type:pe.Add,oldPos:t.length,newPos:0,items:e}),n;var o=e.map(function(t){return U(t.$$hash)?i.options.key?t[i.options.key]:W(t):t.$$hash});return n=X(this.hashes,o).map(function(n){return n.type===pe.Remove?Nt({},n,{items:n.items.map(function(e){return t[i.hashes.indexOf(e)]})}):Nt({},n,{items:n.items.map(function(t){return e[o.indexOf(t)]})})}),this.hashes=o,n},t.prototype.extractGroups=function(t,e){if(!e)return this.groupingSettings.length?this.extractGroups(t,this.groupingSettings[0]):[];for(var i=new Map,n=[],o=e.level,r=0,s=t.length;r<s;r++){var l=t[r];if(!z(this.filter)||this.filter(l)){var h=e.accessor(l);if(!(d=i.get(h))){var u="?grouping='"+W(h)+"&level="+o,a=this.collapsedGroups.indexOf(u)>-1;(d=new ce(this)).$$hash=u,d.key=h,d.level=o,d._collapsed=a,i.set(h,d),n.push(d)}d.rows.push(l)}}if(e.level<this.groupingSettings.length-1)for(var c=this.groupingSettings[e.level+1],r=0;r<n.length;r++){var d=n[r];d.subGroups=this.extractGroups(d.rows,c)}return n.sort(function(t,i){return e.comparer(t.key,i.key)}),n},t.prototype.flattenGroupedRows=function(t,e){void 0===e&&(e=0);for(var i=[],n=0,o=t.length;n<o;n++){var r=t[n];if(i.push(r),!r.collapsed){var s=void 0;s=r.subGroups?this.flattenGroupedRows(r.subGroups,e+1):this.sortRows(r.rows),i.push.apply(i,s)}r.totals&&!r.collapsed&&i.push(r.totals)}return i},t.prototype.sortRows=function(t){if(!this.sortingSettings.length)return t;var e=this.sortingSettings.slice();return t.slice().sort(function(t,i){for(var n,o=0,r=e.length;o<r;o++){var s=e[o],l=$(s.accessor);if(0!==(n=s.comparer(l(t),l(i))))return n}return n})},t.prototype.filterRows=function(t){var e=this;return z(this.filter)?t.slice().filter(function(t){return e.filter(t)}):t},t.prototype.calulateRows=function(t){if(T(this.groupingSettings)&&this.groupingSettings.length){for(var e=this.extractGroups(t),i=new Set,n=0,o=e.length;n<o;n++){var r=e[n],s=r.$$hash;r.collapsed||this.doAggregation(r),i.add(s)}if(this.collapsedGroups=this.collapsedGroups.filter(function(t){return i.has(t)}),e.length)return this.flattenGroupedRows(e)}return this.filterRows(this.sortRows(t))},t.prototype.doAggregation=function(t){var e=new ae(t);e.$$hash=t.$$hash+"&total=true",t.totals=e;for(var i=this.groupingSettings[t.level],n=0,o=i.aggregators.length;n<o;n++){var r=i.aggregators[n];e.store(r.type,r.field,r.accumulate(t.rows))}},t.prototype.refresh=function(){if(!this.suspend){this.rows=this.calulateRows(this.items);var t=this.calulateDiff(this.memorizedRows,this.rows);t.length&&this._onRowsChanged.fire(t)}},t.prototype.dispose=function(){u(this.toDispose),this.toDispose.length=0,this.memorizedRows.length=0,this.items.length=0,this.hashes.length=0,this.groupingSettings.length=0,this.sortingSettings.length=0},t}(),_e=function(){function t(t){this.field=t,this.type="avg"}return t.prototype.accumulate=function(t){for(var e=0,i=0,n=0,o=t.length;n<o;n++){var r=t[n][this.field];null==r||""===r||isNaN(r)||(e++,i+=parseFloat(r))}return 0!=e?i/e:NaN},t}(),ge=function(){function t(t){this.field=t,this.type="max"}return t.prototype.accumulate=function(t){for(var e=NaN,i=0,n=t.length;i<n;i++){var o=t[i][this.field];isFinite(o)&&(e=isNaN(e)?o:Math.min(e,o))}return e},t}(),ve=function(){function t(t){this.field=t,this.type="max"}return t.prototype.accumulate=function(t){for(var e=NaN,i=0,n=t.length;i<n;i++){var o=t[i][this.field];isFinite(o)&&(e=isNaN(e)?o:Math.max(e,o))}return e},t}(),ye=function(){function t(t){this.field=t,this.type="sum"}return t.prototype.accumulate=function(t){for(var e=0,i=0,n=t.length;i<n;i++){var o=t[i][this.field];isFinite(o)&&(e+=o)}return e},t}(),Se=function(){function t(t){this.field=t,this.type="count"}return t.prototype.accumulate=function(t){return t.length},t}(),we=!1,be=null,Ce=function(){function t(){}return t.getSameOriginWindowChain=function(){if(!be){be=[];var t,e=window;do{(t=q(e))?be.push({window:e,iframeElement:Z(t,e)}):be.push({window:e,iframeElement:null}),e=t}while(e)}return be.slice(0)},t.hasDifferentOriginAncestor=function(){return be||this.getSameOriginWindowChain(),we},t.getPositionOfChildWindowRelativeToAncestorWindow=function(t,e){if(!e||t===e)return{top:0,left:0};for(var i=0,n=0,o=this.getSameOriginWindowChain(),r=0;r<o.length;r++){var s=o[r];if(s.window===e)break;if(!s.iframeElement)break;var l=s.iframeElement.getBoundingClientRect();i+=l.top,n+=l.left}return{top:i,left:n}},t}(),Ne=navigator.userAgent,Ee=Ne.indexOf("Trident")>=0,xe=Ne.indexOf("Edge/")>=0,Re=(Ne.indexOf("Opera"),Ne.indexOf("Firefox")>=0),De=Ne.indexOf("AppleWebKit")>=0,Ae=(Ne.indexOf("Chrome"),-1===Ne.indexOf("Chrome")&&Ne.indexOf("Safari")>=0),Me=(Ne.indexOf("iPad"),xe&&Ne.indexOf("WebView/"),!1),Oe=!1,Pe="undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.electron&&"renderer"===process.type;if("object"!=typeof navigator||Pe){if("object"==typeof process){Me="win32"===process.platform,Oe="darwin"===process.platform,"linux"===process.platform,"en";var ke=process.env.VSCODE_NLS_CONFIG;if(ke)try{var Le=JSON.parse(ke);Le.availableLanguages["*"];Le.locale,Le._translationsConfigFile}catch(t){}}}else{var Te=navigator.userAgent;Me=Te.indexOf("Windows")>=0,Oe=Te.indexOf("Macintosh")>=0,Te.indexOf("Linux")>=0,navigator.language}var Ke;!function(t){t[t.Web=0]="Web",t[t.Mac=1]="Mac",t[t.Linux=2]="Linux",t[t.Windows=3]="Windows"}(Ke||(Ke={}));var ze,Ue=Me,We=Oe;!function(t){t[t.Windows=1]="Windows",t[t.Macintosh=2]="Macintosh",t[t.Linux=3]="Linux"}(ze||(ze={}));var Fe,Ie=function(){function t(t){this.timestamp=Date.now(),this.browserEvent=t,this.leftButton=0===t.button,this.middleButton=1===t.button,this.rightButton=2===t.button,this.target=t.target,this.detail=t.detail||1,"dblclick"===t.type&&(this.detail=2),this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,"number"==typeof t.pageX?(this.posx=t.pageX,this.posy=t.pageY):(this.posx=t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,this.posy=t.clientY+document.body.scrollTop+document.documentElement.scrollTop);var e=Ce.getPositionOfChildWindowRelativeToAncestorWindow(self,t.view);this.posx-=e.left,this.posy-=e.top}return t.prototype.preventDefault=function(){this.browserEvent.preventDefault&&this.browserEvent.preventDefault()},t.prototype.stopPropagation=function(){this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()},t}(),He=function(){function t(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),this.browserEvent=t||null,this.target=t?t.target||t.targetNode||t.srcElement:null,this.deltaY=i,this.deltaX=e,t){var n=t,o=t;void 0!==n.wheelDeltaY?this.deltaY=n.wheelDeltaY/120:void 0!==o.VERTICAL_AXIS&&o.axis===o.VERTICAL_AXIS&&(this.deltaY=-o.detail/3),void 0!==n.wheelDeltaX?this.deltaX=Ae&&Ue?-n.wheelDeltaX/120:n.wheelDeltaX/120:void 0!==o.HORIZONTAL_AXIS&&o.axis===o.HORIZONTAL_AXIS&&(this.deltaX=-t.detail/3),0===this.deltaY&&0===this.deltaX&&t.wheelDelta&&(this.deltaY=t.wheelDelta/120)}}return t.prototype.preventDefault=function(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()},t.prototype.stopPropagation=function(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()},t}(),Ye=function(e){function i(t,i){var n=e.call(this)||this;return n._token=-1,"function"==typeof t&&"number"==typeof i&&n.setIfNotSet(t,i),n}return t(i,e),i.prototype.dispose=function(){this.cancel(),e.prototype.dispose.call(this)},i.prototype.cancel=function(){-1!==this._token&&(clearTimeout(this._token),this._token=-1)},i.prototype.cancelAndSet=function(t,e){var i=this;this.cancel(),this._token=setTimeout(function(){i._token=-1,t()},e)},i.prototype.setIfNotSet=function(t,e){var i=this;-1===this._token&&(this._token=setTimeout(function(){i._token=-1,t()},e))},i}(Rt),Be=new(function(){function t(){}return t.prototype._findClassName=function(t,e){var i=t.className;if(!i)return void(this._lastStart=-1);e=e.trim();var n=i.length,o=e.length;if(0===o)return void(this._lastStart=-1);if(n<o)return void(this._lastStart=-1);if(i===e)return this._lastStart=0,void(this._lastEnd=n);for(var r,s=-1;(s=i.indexOf(e,s+1))>=0;){if(r=s+o,(0===s||32===i.charCodeAt(s-1))&&32===i.charCodeAt(r))return this._lastStart=s,void(this._lastEnd=r+1);if(s>0&&32===i.charCodeAt(s-1)&&r===n)return this._lastStart=s-1,void(this._lastEnd=r);if(0===s&&r===n)return this._lastStart=0,void(this._lastEnd=r)}this._lastStart=-1},t.prototype.hasClass=function(t,e){return this._findClassName(t,e),-1!==this._lastStart},t.prototype.addClasses=function(t){for(var e=this,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];i.forEach(function(i){return i.split(" ").forEach(function(i){return e.addClass(t,i)})})},t.prototype.addClass=function(t,e){t.className?(this._findClassName(t,e),-1===this._lastStart&&(t.className=t.className+" "+e)):t.className=e},t.prototype.removeClass=function(t,e){this._findClassName(t,e),-1!==this._lastStart&&(t.className=t.className.substring(0,this._lastStart)+t.className.substring(this._lastEnd))},t.prototype.removeClasses=function(t){for(var e=this,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];i.forEach(function(i){return i.split(" ").forEach(function(i){return e.removeClass(t,i)})})},t.prototype.toggleClass=function(t,e,i){this._findClassName(t,e),-1===this._lastStart||void 0!==i&&i||this.removeClass(t,e),-1!==this._lastStart||void 0!==i&&!i||this.addClass(t,e)},t}()),je=new(function(){function t(){}return t.prototype.hasClass=function(t,e){return Boolean(e)&&t.classList&&t.classList.contains(e)},t.prototype.addClasses=function(t){for(var e=this,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];i.forEach(function(i){return i.split(" ").forEach(function(i){return e.addClass(t,i)})})},t.prototype.addClass=function(t,e){e&&t.classList&&t.classList.add(e)},t.prototype.removeClass=function(t,e){e&&t.classList&&t.classList.remove(e)},t.prototype.removeClasses=function(t){for(var e=this,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];i.forEach(function(i){return i.split(" ").forEach(function(i){return e.removeClass(t,i)})})},t.prototype.toggleClass=function(t,e,i){t.classList&&t.classList.toggle(e,i)},t}()),Ve=Ee?Be:je,Ge=(Ve.hasClass.bind(Ve),Ve.addClass.bind(Ve)),Xe=Ve.addClasses.bind(Ve),Qe=Ve.removeClass.bind(Ve),$e=Ve.removeClasses.bind(Ve),qe=Ve.toggleClass.bind(Ve),Ze=function(){function t(t,e,i,n){this._node=t,this._type=e,this._handler=i,this._useCapture=n||!1,this._node.addEventListener(this._type,this._handler,this._useCapture)}return t.prototype.dispose=function(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._useCapture),this._node=null,this._handler=null)},t}(),Je=16,ti=function(t,e){return e},ei=function(e){function i(t,i,n,o,r){void 0===o&&(o=ti),void 0===r&&(r=Je);var s=e.call(this)||this,l=null,h=0,u=s._register(new Ye),a=function(){h=(new Date).getTime(),n(l),l=null};return s._register(J(t,i,function(t){l=o(l,t);var e=(new Date).getTime()-h;e>=r?(u.cancel(),a()):u.setIfNotSet(a,r-e)})),s}return t(i,e),i}(Rt),ii=null,ni=function(){function t(t,e){void 0===e&&(e=0),this._runner=t,this.priority=e,this._canceled=!1}return t.prototype.dispose=function(){this._canceled=!0},t.prototype.execute=function(){if(!this._canceled)try{this._runner()}catch(t){n(t)}},t.sort=function(t,e){return e.priority-t.priority},t}();!function(){var t=[],e=null,i=!1,n=function(){for(i=!1,e=t,t=[];e.length>0;)e.sort(ni.sort),e.shift().execute()};Fe=function(e,o){void 0===o&&(o=0);var r=new ni(e,o);return t.push(r),i||(i=!0,it(n)),r}}();var oi,ri=function(){return function(t,e){return parseFloat(e)||0}}(),si={getBorderLeftWidth:function(t){return ot(t,"border-left-width","borderLeftWidth")},getBorderRightWidth:function(t){return ot(t,"border-right-width","borderRightWidth")},getBorderTopWidth:function(t){return ot(t,"border-top-width","borderTopWidth")},getBorderBottomWidth:function(t){return ot(t,"border-bottom-width","borderBottomWidth")},getPaddingLeft:function(t){return ot(t,"padding-left","paddingLeft")},getPaddingRight:function(t){return ot(t,"padding-right","paddingRight")},getPaddingTop:function(t){return ot(t,"padding-top","paddingTop")},getPaddingBottom:function(t){return ot(t,"padding-bottom","paddingBottom")},getMarginLeft:function(t){return ot(t,"margin-left","marginLeft")},getMarginTop:function(t){return ot(t,"margin-top","marginTop")},getMarginRight:function(t){return ot(t,"margin-right","marginRight")},getMarginBottom:function(t){return ot(t,"margin-bottom","marginBottom")},__commaSentinel:!1},li=new(function(){function t(){}return Object.defineProperty(t.prototype,"scrollX",{get:function(){return"number"==typeof window.scrollX?window.scrollX:document.body.scrollLeft+document.documentElement.scrollLeft},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollY",{get:function(){return"number"==typeof window.scrollY?window.scrollY:document.body.scrollTop+document.documentElement.scrollTop},enumerable:!0,configurable:!0}),t}()),hi={CLICK:"click",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",UNLOAD:"unload",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend"},ui=function(){function t(t,e,i){this.model=t,this.columns=e,this.options=i}return t}(),ai={explicitInitialization:!0,defaultColumnWidth:80,rowHeight:20,defaultFormatter:ht,showHeaderRow:!0,headerRowHeight:20,scrollbarSize:8},ci={formatter:ht};!function(t){t.Left="left",t.Right="right"}(oi||(oi={}));var di,pi=function(){function t(t){this.domNode=t,this._maxWidth=-1,this._width=-1,this._height=-1,this._top=-1,this._left=-1,this._bottom=-1,this._right=-1,this._fontFamily="",this._fontWeight="",this._fontSize=-1,this._lineHeight=-1,this._letterSpacing=-100,this._className="",this._display="",this._position="",this._visibility="",this._layerHint=!1}return t.prototype.setMaxWidth=function(t){this._maxWidth!==t&&(this._maxWidth=t,this.domNode.style.maxWidth=this._maxWidth+"px")},t.prototype.setWidth=function(t){this._width!==t&&(this._width=t,this.domNode.style.width=this._width+"px")},t.prototype.setHeight=function(t){this._height!==t&&(this._height=t,this.domNode.style.height=this._height+"px")},t.prototype.setTop=function(t){this._top!==t&&(this._top=t,this.domNode.style.top=this._top+"px")},t.prototype.unsetTop=function(){-1!==this._top&&(this._top=-1,this.domNode.style.top="")},t.prototype.setLeft=function(t){this._left!==t&&(this._left=t,this.domNode.style.left=this._left+"px")},t.prototype.setBottom=function(t){this._bottom!==t&&(this._bottom=t,this.domNode.style.bottom=this._bottom+"px")},t.prototype.setRight=function(t){this._right!==t&&(this._right=t,this.domNode.style.right=this._right+"px")},t.prototype.setFontFamily=function(t){this._fontFamily!==t&&(this._fontFamily=t,this.domNode.style.fontFamily=this._fontFamily)},t.prototype.setFontWeight=function(t){this._fontWeight!==t&&(this._fontWeight=t,this.domNode.style.fontWeight=this._fontWeight)},t.prototype.setFontSize=function(t){this._fontSize!==t&&(this._fontSize=t,this.domNode.style.fontSize=this._fontSize+"px")},t.prototype.setLineHeight=function(t){this._lineHeight!==t&&(this._lineHeight=t,this.domNode.style.lineHeight=this._lineHeight+"px")},t.prototype.setLetterSpacing=function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.domNode.style.letterSpacing=this._letterSpacing+"px")},t.prototype.setClassName=function(t){this._className!==t&&(this._className=t,this.domNode.className=this._className)},t.prototype.toggleClassName=function(t,e){qe(this.domNode,t,e),this._className=this.domNode.className},t.prototype.setDisplay=function(t){this._display!==t&&(this._display=t,this.domNode.style.display=this._display)},t.prototype.setPosition=function(t){this._position!==t&&(this._position=t,this.domNode.style.position=this._position)},t.prototype.setVisibility=function(t){this._visibility!==t&&(this._visibility=t,this.domNode.style.visibility=this._visibility)},t.prototype.setLayerHinting=function(t){this._layerHint!==t&&(this._layerHint=t,this.domNode.style.willChange=this._layerHint?"transform":"auto")},t.prototype.setAttribute=function(t,e){this.domNode.setAttribute(t,e)},t.prototype.removeAttribute=function(t){this.domNode.removeAttribute(t)},t.prototype.appendChild=function(t){this.domNode.appendChild(t.domNode)},t.prototype.removeChild=function(t){this.domNode.removeChild(t.domNode)},t}(),fi=function(e){function i(){var t=e.call(this)||this;return t.hooks=[],t.mouseMoveEventMerger=null,t.mouseMoveCallback=null,t.onStopCallback=null,t}return t(i,e),i.prototype.dispose=function(){this.stopMonitoring(!1),e.prototype.dispose.call(this)},i.prototype.stopMonitoring=function(t){if(this.isMonitoring()){this.hooks=u(this.hooks),this.mouseMoveEventMerger=null,this.mouseMoveCallback=null;var e=this.onStopCallback;this.onStopCallback=null,t&&e&&e()}},i.prototype.isMonitoring=function(){return this.hooks.length>0},i.prototype.startMonitoring=function(t,e,i){var n=this;if(!this.isMonitoring()){this.mouseMoveEventMerger=t,this.mouseMoveCallback=e,this.onStopCallback=i;for(var o=Ce.getSameOriginWindowChain(),r=0;r<o.length;r++)this.hooks.push(et(o[r].window.document,"mousemove",function(t){return n.mouseMoveCallback(t)},function(t,e){return n.mouseMoveEventMerger(t,e)})),this.hooks.push(J(o[r].window.document,"mouseup",function(t){return n.stopMonitoring(!0)}));if(Ce.hasDifferentOriginAncestor()){var s=o[o.length-1];this.hooks.push(J(s.window.document,"mouseout",function(t){"html"===new Ie(t).target.tagName.toLowerCase()&&n.stopMonitoring(!0)})),this.hooks.push(J(s.window.document,"mouseover",function(t){"html"===new Ie(t).target.tagName.toLowerCase()&&n.stopMonitoring(!0)})),this.hooks.push(J(s.window.document.body,"mouseleave",function(t){n.stopMonitoring(!0)}))}}},i}(Rt),mi=function(e){function i(t,i,n){var o=e.call(this)||this;return o._visibility=t,o._visibleClassName=i,o._invisibleClassName=n,o._domNode=null,o._isVisible=!1,o._isNeeded=!1,o._shouldBeVisible=!1,o._revealTimer=o._register(new Ye),o}return t(i,e),i.prototype.applyVisibilitySetting=function(t){return 2!==this._visibility&&(3===this._visibility||t)},i.prototype.setShouldBeVisible=function(t){var e=this.applyVisibilitySetting(t);this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())},i.prototype.setIsNeeded=function(t){this._isNeeded!==t&&(this._isNeeded=t,this.ensureVisibility())},i.prototype.setDomNode=function(t){this._domNode=t,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)},i.prototype.ensureVisibility=function(){if(!this._isNeeded)return void this._hide(!1);this._shouldBeVisible?this._reveal():this._hide(!0)},i.prototype._reveal=function(){var t=this;this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(function(){t._domNode&&t._domNode.setClassName(t._visibleClassName)},0))},i.prototype._hide=function(t){this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,this._domNode&&this._domNode.setClassName(this._invisibleClassName+(t?" fade":"")))},i}(Rt),_i=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return t(i,e),i.prototype.onclick=function(t,e){this._register(J(t,hi.CLICK,function(t){return e(new Ie(t))}))},i.prototype.onmousedown=function(t,e){this._register(J(t,hi.MOUSE_DOWN,function(t){return e(new Ie(t))}))},i.prototype.onmouseover=function(t,e){this._register(J(t,hi.MOUSE_OVER,function(t){return e(new Ie(t))}))},i.prototype.onnonbubblingmouseout=function(t,e){this._register(tt(t,function(t){return e(new Ie(t))}))},i.prototype.onblur=function(t,e){this._register(J(t,hi.BLUR,e))},i.prototype.onfocus=function(t,e){this._register(J(t,hi.FOCUS,e))},i}(Rt),gi=function(e){function i(t){var i=e.call(this)||this;return i._lazyRender=t.lazyRender,i._host=t.host,i._scrollable=t.scrollable,i._scrollbarState=t.scrollbarState,i._visibilityController=i._register(new mi(t.visibility,"visible scrollbar "+t.extraScrollbarClassName,"invisible scrollbar "+t.extraScrollbarClassName)),i._mouseMoveMonitor=i._register(new fi),i._shouldRender=!0,i.domNode=ut(document.createElement("div")),i.domNode.setAttribute("role","presentation"),i.domNode.setAttribute("aria-hidden","true"),i._visibilityController.setDomNode(i.domNode),i.domNode.setPosition("absolute"),i.onmousedown(i.domNode.domNode,function(t){return i._domNodeMouseDown(t)}),i}return t(i,e),i.prototype._createSlider=function(t,e,i,n){var o=this;this.slider=ut(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(t),this.slider.setLeft(e),"number"==typeof i&&this.slider.setWidth(i),"number"==typeof n&&this.slider.setHeight(n),this.slider.setLayerHinting(!0),this.domNode.domNode.appendChild(this.slider.domNode),this.onmousedown(this.slider.domNode,function(t){t.leftButton&&(t.preventDefault(),o._sliderMouseDown(t,function(){}))})},i.prototype._onElementSize=function(t){return this._scrollbarState.setVisibleSize(t)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender},i.prototype._onElementScrollSize=function(t){return this._scrollbarState.setScrollSize(t)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender},i.prototype._onElementScrollPosition=function(t){return this._scrollbarState.setScrollPosition(t)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender},i.prototype.beginReveal=function(){this._visibilityController.setShouldBeVisible(!0)},i.prototype.beginHide=function(){this._visibilityController.setShouldBeVisible(!1)},i.prototype.render=function(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getSliderPosition()))},i.prototype._domNodeMouseDown=function(t){t.target===this.domNode.domNode&&this._onMouseDown(t)},i.prototype.delegateMouseDown=function(t){var e=this.domNode.domNode.getClientRects()[0].top,i=e+this._scrollbarState.getSliderPosition(),n=e+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),o=this._sliderMousePosition(t);i<=o&&o<=n?t.leftButton&&(t.preventDefault(),this._sliderMouseDown(t,function(){})):this._onMouseDown(t)},i.prototype._onMouseDown=function(t){var e,i;if(t.target===this.domNode.domNode&&"number"==typeof t.browserEvent.offsetX&&"number"==typeof t.browserEvent.offsetY)e=t.browserEvent.offsetX,i=t.browserEvent.offsetY;else{var n=rt(this.domNode.domNode);e=t.posx-n.left,i=t.posy-n.top}this._setDesiredScrollPositionNow(this._scrollbarState.getDesiredScrollPositionFromOffset(this._mouseDownRelativePosition(e,i))),t.leftButton&&(t.preventDefault(),this._sliderMouseDown(t,function(){}))},i.prototype._sliderMouseDown=function(t,e){var i=this,n=this._sliderMousePosition(t),o=this._sliderOrthogonalMousePosition(t),r=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._mouseMoveMonitor.startMonitoring(at,function(t){var e=i._sliderOrthogonalMousePosition(t),s=Math.abs(e-o);if(Ue&&s>140)return void i._setDesiredScrollPositionNow(r.getScrollPosition());var l=i._sliderMousePosition(t)-n;i._setDesiredScrollPositionNow(r.getDesiredScrollPositionFromDelta(l))},function(){i.slider.toggleClassName("active",!1),i._host.onDragEnd(),e()}),this._host.onDragStart()},i.prototype._setDesiredScrollPositionNow=function(t){var e={};this.writeScrollPosition(e,t),this._scrollable.setScrollPositionNow(e)},i}(_i),vi=function(){function t(t,e){this._scrollbarSize=Math.round(t),this._oppositeScrollbarSize=Math.round(e),this._visibleSize=0,this._scrollSize=0,this._scrollPosition=0,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}return t.prototype.clone=function(){var e=new t(this._scrollbarSize,this._oppositeScrollbarSize);return e.setVisibleSize(this._visibleSize),e.setScrollSize(this._scrollSize),e.setScrollPosition(this._scrollPosition),e},t.prototype.setVisibleSize=function(t){var e=Math.round(t);return this._visibleSize!==e&&(this._visibleSize=e,this._refreshComputedValues(),!0)},t.prototype.setScrollSize=function(t){var e=Math.round(t);return this._scrollSize!==e&&(this._scrollSize=e,this._refreshComputedValues(),!0)},t.prototype.setScrollPosition=function(t){var e=Math.round(t);return this._scrollPosition!==e&&(this._scrollPosition=e,this._refreshComputedValues(),!0)},t._computeValues=function(t,e,i,n){var o=Math.max(0,e-t),r=Math.max(0,o),s=i>0&&i>e;if(!s)return{computedAvailableSize:Math.round(o),computedIsNeeded:s,computedSliderSize:Math.round(r),computedSliderRatio:0,computedSliderPosition:0};var l=Math.round(Math.max(20,Math.floor(e*r/i))),h=(r-l)/(i-e),u=n*h;return{computedAvailableSize:Math.round(o),computedIsNeeded:s,computedSliderSize:Math.round(l),computedSliderRatio:h,computedSliderPosition:Math.round(u)}},t.prototype._refreshComputedValues=function(){var e=t._computeValues(this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition},t.prototype.getScrollPosition=function(){return this._scrollPosition},t.prototype.getRectangleLargeSize=function(){return this._computedAvailableSize},t.prototype.getRectangleSmallSize=function(){return this._scrollbarSize},t.prototype.isNeeded=function(){return this._computedIsNeeded},t.prototype.getSliderSize=function(){return this._computedSliderSize},t.prototype.getSliderPosition=function(){return this._computedSliderPosition},t.prototype.getDesiredScrollPositionFromOffset=function(t){if(!this._computedIsNeeded)return 0;var e=t-this._computedSliderSize/2;return Math.round(e/this._computedSliderRatio)},t.prototype.getDesiredScrollPositionFromDelta=function(t){if(!this._computedIsNeeded)return 0;var e=this._computedSliderPosition+t;return Math.round(e/this._computedSliderRatio)},t}(),yi=function(e){function i(t,i,n){var o=e.call(this,{lazyRender:i.lazyRender,host:n,scrollbarState:new vi(2===i.horizontal?0:i.horizontalScrollbarSize,2===i.vertical?0:i.verticalScrollbarSize),visibility:i.horizontal,extraScrollbarClassName:"horizontal",scrollable:t})||this;return o._createSlider(Math.floor((i.horizontalScrollbarSize-i.horizontalSliderSize)/2),0,void 0,i.horizontalSliderSize),o}return t(i,e),i.prototype._updateSlider=function(t,e){this.slider.setWidth(t),this.slider.setLeft(e)},i.prototype._renderDomNode=function(t,e){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setLeft(0),this.domNode.setBottom(0)},i.prototype.onDidScroll=function(t){return this._shouldRender=this._onElementScrollSize(t.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(t.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(t.width)||this._shouldRender,this._shouldRender},i.prototype._mouseDownRelativePosition=function(t,e){return t},i.prototype._sliderMousePosition=function(t){return t.posx},i.prototype._sliderOrthogonalMousePosition=function(t){return t.posy},i.prototype.writeScrollPosition=function(t,e){t.scrollLeft=e},i}(gi),Si=function(e){function i(t,i,n){var o=e.call(this,{lazyRender:i.lazyRender,host:n,scrollbarState:new vi(2===i.vertical?0:i.verticalScrollbarSize,0),visibility:i.vertical,extraScrollbarClassName:"vertical",scrollable:t})||this;return o._createSlider(0,Math.floor((i.verticalScrollbarSize-i.verticalSliderSize)/2),i.verticalSliderSize,void 0),o}return t(i,e),i.prototype._updateSlider=function(t,e){this.slider.setHeight(t),this.slider.setTop(e)},i.prototype._renderDomNode=function(t,e){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setRight(0),this.domNode.setTop(0)},i.prototype.onDidScroll=function(t){return this._shouldRender=this._onElementScrollSize(t.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(t.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(t.height)||this._shouldRender,this._shouldRender},i.prototype._mouseDownRelativePosition=function(t,e){return e},i.prototype._sliderMousePosition=function(t){return t.posy},i.prototype._sliderOrthogonalMousePosition=function(t){return t.posx},i.prototype.writeScrollPosition=function(t,e){t.scrollTop=e},i}(gi);!function(t){t[t.Auto=1]="Auto",t[t.Hidden=2]="Hidden",t[t.Visible=3]="Visible"}(di||(di={}));var wi,bi=function(){function t(t,e,i,n,o,r){e|=0,i|=0,n|=0,o|=0,r|=0,(t|=0)<0&&(t=0),i+t>e&&(i=e-t),i<0&&(i=0),n<0&&(n=0),r+n>o&&(r=o-n),r<0&&(r=0),this.width=t,this.scrollWidth=e,this.scrollLeft=i,this.height=n,this.scrollHeight=o,this.scrollTop=r}return t.prototype.equals=function(t){return this.width===t.width&&this.scrollWidth===t.scrollWidth&&this.scrollLeft===t.scrollLeft&&this.height===t.height&&this.scrollHeight===t.scrollHeight&&this.scrollTop===t.scrollTop},t.prototype.withScrollDimensions=function(e){return new t(void 0!==e.width?e.width:this.width,void 0!==e.scrollWidth?e.scrollWidth:this.scrollWidth,this.scrollLeft,void 0!==e.height?e.height:this.height,void 0!==e.scrollHeight?e.scrollHeight:this.scrollHeight,this.scrollTop)},t.prototype.withScrollPosition=function(e){return new t(this.width,this.scrollWidth,void 0!==e.scrollLeft?e.scrollLeft:this.scrollLeft,this.height,this.scrollHeight,void 0!==e.scrollTop?e.scrollTop:this.scrollTop)},t.prototype.createScrollEvent=function(t){var e=this.width!==t.width,i=this.scrollWidth!==t.scrollWidth,n=this.scrollLeft!==t.scrollLeft,o=this.height!==t.height,r=this.scrollHeight!==t.scrollHeight,s=this.scrollTop!==t.scrollTop;return{width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:e,scrollWidthChanged:i,scrollLeftChanged:n,heightChanged:o,scrollHeightChanged:r,scrollTopChanged:s}},t}(),Ci=function(e){function i(t,i){var n=e.call(this)||this;return n._onScroll=n._register(new Lt),n.onScroll=n._onScroll.event,n._smoothScrollDuration=t,n._scheduleAtNextAnimationFrame=i,n._state=new bi(0,0,0,0,0,0),n._smoothScrolling=null,n}return t(i,e),i.prototype.dispose=function(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),e.prototype.dispose.call(this)},i.prototype.setSmoothScrollDuration=function(t){this._smoothScrollDuration=t},i.prototype.validateScrollPosition=function(t){return this._state.withScrollPosition(t)},i.prototype.getScrollDimensions=function(){return this._state},i.prototype.setScrollDimensions=function(t){var e=this._state.withScrollDimensions(t);this._setState(e),this._smoothScrolling&&this._smoothScrolling.acceptScrollDimensions(this._state)},i.prototype.getFutureScrollPosition=function(){return this._smoothScrolling?this._smoothScrolling.to:this._state},i.prototype.getCurrentScrollPosition=function(){return this._state},i.prototype.setScrollPositionNow=function(t){var e=this._state.withScrollPosition(t);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(e)},i.prototype.setScrollPositionSmooth=function(t){var e=this;if(0===this._smoothScrollDuration)return this.setScrollPositionNow(t);if(this._smoothScrolling){t={scrollLeft:void 0===t.scrollLeft?this._smoothScrolling.to.scrollLeft:t.scrollLeft,scrollTop:void 0===t.scrollTop?this._smoothScrolling.to.scrollTop:t.scrollTop};n=this._state.withScrollPosition(t);if(this._smoothScrolling.to.scrollLeft===n.scrollLeft&&this._smoothScrolling.to.scrollTop===n.scrollTop)return;var i=this._smoothScrolling.combine(this._state,n,this._smoothScrollDuration);this._smoothScrolling.dispose(),this._smoothScrolling=i}else{var n=this._state.withScrollPosition(t);this._smoothScrolling=Ei.start(this._state,n,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(function(){e._smoothScrolling&&(e._smoothScrolling.animationFrameDisposable=null,e._performSmoothScrolling())})},i.prototype._performSmoothScrolling=function(){var t=this;if(this._smoothScrolling){var e=this._smoothScrolling.tick(),i=this._state.withScrollPosition(e);if(this._setState(i),e.isDone)return this._smoothScrolling.dispose(),void(this._smoothScrolling=null);this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(function(){t._smoothScrolling&&(t._smoothScrolling.animationFrameDisposable=null,t._performSmoothScrolling())})}},i.prototype._setState=function(t){var e=this._state;e.equals(t)||(this._state=t,this._onScroll.fire(this._state.createScrollEvent(e)))},i}(Rt),Ni=function(){function t(t,e,i){this.scrollLeft=t,this.scrollTop=e,this.isDone=i}return t}(),Ei=function(){function t(t,e,i,n){this.from=t,this.to=e,this.duration=n,this._startTime=i,this.animationFrameDisposable=null,this._initAnimations()}return t.prototype._initAnimations=function(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)},t.prototype._initAnimation=function(t,e,i){if(Math.abs(t-e)>2.5*i){var n=void 0,o=void 0;return t<e?(n=t+.75*i,o=e-.75*i):(n=t-.75*i,o=e+.75*i),dt(ct(t,n),ct(o,e),.33)}return ct(t,e)},t.prototype.dispose=function(){null!==this.animationFrameDisposable&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)},t.prototype.acceptScrollDimensions=function(t){this.to=t.withScrollPosition(this.to),this._initAnimations()},t.prototype.tick=function(){return this._tick(Date.now())},t.prototype._tick=function(t){var e=(t-this._startTime)/this.duration;if(e<1){var i=this.scrollLeft(e),n=this.scrollTop(e);return new Ni(i,n,!1)}return new Ni(this.to.scrollLeft,this.to.scrollTop,!0)},t.prototype.combine=function(e,i,n){return t.start(e,i,n)},t.start=function(e,i,n){return n+=10,new t(e,i,Date.now()-10,n)},t}(),xi=function(){function t(t,e,i){this.timestamp=t,this.deltaX=e,this.deltaY=i,this.score=0}return t}(),Ri=function(){function t(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}return t.prototype.isPhysicalMouseWheel=function(){if(-1===this._front&&-1===this._rear)return!1;for(var t=1,e=0,i=1,n=this._rear;;){var o=n===this._front?t:Math.pow(2,-i);if(t-=o,e+=this._memory[n].score*o,n===this._front)break;n=(this._capacity+n-1)%this._capacity,i++}return e<=.5},t.prototype.accept=function(t,e,i){var n=new xi(t,e,i);n.score=this._computeScore(n),-1===this._front&&-1===this._rear?(this._memory[0]=n,this._front=0,this._rear=0):(this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=n)},t.prototype._computeScore=function(t){if(Math.abs(t.deltaX)>0&&Math.abs(t.deltaY)>0)return 1;var e=.5;-1===this._front&&-1===this._rear||this._memory[this._rear];return(Math.abs(t.deltaX-Math.round(t.deltaX))>0||Math.abs(t.deltaY-Math.round(t.deltaY))>0)&&(e+=.25),Math.min(Math.max(e,0),1)},t.INSTANCE=new t,t}(),Di=function(e){function i(t,i){var n=this;(i=i||{}).mouseWheelSmoothScroll=!1;var o=new Ci(0,function(t){return Fe(t)});return(n=e.call(this,t,i,o)||this)._register(o),n}return t(i,e),i.prototype.setScrollPosition=function(t){this._scrollable.setScrollPositionNow(t)},i.prototype.getScrollPosition=function(){return this._scrollable.getCurrentScrollPosition()},i}(function(e){function i(t,i,n){var o=e.call(this)||this;o._onScroll=o._register(new Lt),o.onScroll=o._onScroll.event,t.style.overflow="hidden",o._options=mt(i),o._scrollable=n,o._register(o._scrollable.onScroll(function(t){o._onDidScroll(t),o._onScroll.fire(t)}));var r={onMouseWheel:function(t){return o._onMouseWheel(t)},onDragStart:function(){return o._onDragStart()},onDragEnd:function(){return o._onDragEnd()}};return o._verticalScrollbar=o._register(new Si(o._scrollable,o._options,r)),o._horizontalScrollbar=o._register(new yi(o._scrollable,o._options,r)),o._domNode=document.createElement("div"),o._domNode.className="nila-scrollable-element "+o._options.className,o._domNode.setAttribute("role","presentation"),o._domNode.style.position="relative",o._domNode.style.overflow="hidden",o._domNode.appendChild(t),o._domNode.appendChild(o._horizontalScrollbar.domNode.domNode),o._domNode.appendChild(o._verticalScrollbar.domNode.domNode),o._listenOnDomNode=o._options.listenOnDomNode||o._domNode,o._mouseWheelToDispose=[],o._setListeningToMouseWheel(o._options.handleMouseWheel),o.onmouseover(o._listenOnDomNode,function(t){return o._onMouseOver(t)}),o.onnonbubblingmouseout(o._listenOnDomNode,function(t){return o._onMouseOut(t)}),o._hideTimeout=o._register(new Ye),o._isDragging=!1,o._mouseIsOver=!1,o._shouldRender=!0,o._revealOnScroll=!0,o}return t(i,e),i.prototype.dispose=function(){this._mouseWheelToDispose=u(this._mouseWheelToDispose),e.prototype.dispose.call(this)},i.prototype.getDomNode=function(){return this._domNode},i.prototype.delegateVerticalScrollbarMouseDown=function(t){this._verticalScrollbar.delegateMouseDown(t)},i.prototype.getScrollDimensions=function(){return this._scrollable.getScrollDimensions()},i.prototype.setScrollDimensions=function(t){this._scrollable.setScrollDimensions(t)},i.prototype.updateClassName=function(t){this._options.className=t,We&&(this._options.className+=" mac"),this._domNode.className="nila-scrollable-element "+this._options.className},i.prototype.updateOptions=function(t){var e=mt(t);this._options.handleMouseWheel=e.handleMouseWheel,this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity,this._options.fastScrollSensitivity=e.fastScrollSensitivity,this._setListeningToMouseWheel(this._options.handleMouseWheel),this._options.lazyRender||this._render()},i.prototype.setRevealOnScroll=function(t){this._revealOnScroll=t},i.prototype._setListeningToMouseWheel=function(t){var e=this;if(this._mouseWheelToDispose.length>0!==t&&(this._mouseWheelToDispose=u(this._mouseWheelToDispose),t)){var i=function(t){e._onMouseWheel(new He(t))};this._mouseWheelToDispose.push(J(this._listenOnDomNode,hi.WHEEL,i))}},i.prototype._onMouseWheel=function(t){var e,i=Ri.INSTANCE;if(i.accept(Date.now(),t.deltaX,t.deltaY),t.deltaY||t.deltaX){var n=t.deltaY*this._options.mouseWheelScrollSensitivity,o=t.deltaX*this._options.mouseWheelScrollSensitivity;this._options.flipAxes&&(n=(e=[o,n])[0],o=e[1]);var r=!We&&t.browserEvent&&t.browserEvent.shiftKey;!this._options.scrollYToX&&!r||o||(o=n,n=0),t.browserEvent&&t.browserEvent.altKey&&(o*=this._options.fastScrollSensitivity,n*=this._options.fastScrollSensitivity);var s=this._scrollable.getFutureScrollPosition(),l={};if(n){var h=s.scrollTop-50*n;this._verticalScrollbar.writeScrollPosition(l,h)}if(o){var u=s.scrollLeft-50*o;this._horizontalScrollbar.writeScrollPosition(l,u)}l=this._scrollable.validateScrollPosition(l),s.scrollLeft===l.scrollLeft&&s.scrollTop===l.scrollTop||(this._options.mouseWheelSmoothScroll&&i.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(l):this._scrollable.setScrollPositionNow(l),this._shouldRender=!0)}(this._options.alwaysConsumeMouseWheel||this._shouldRender)&&(t.preventDefault(),t.stopPropagation())},i.prototype._onDidScroll=function(t){this._shouldRender=this._horizontalScrollbar.onDidScroll(t)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(t)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()},i.prototype.renderNow=function(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()},i.prototype._render=function(){this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render())},i.prototype._onDragStart=function(){this._isDragging=!0,this._reveal()},i.prototype._onDragEnd=function(){this._isDragging=!1,this._hide()},i.prototype._onMouseOut=function(t){this._mouseIsOver=!1,this._hide()},i.prototype._onMouseOver=function(t){this._mouseIsOver=!0,this._reveal()},i.prototype._reveal=function(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()},i.prototype._hide=function(){this._mouseIsOver||this._isDragging||(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())},i.prototype._scheduleHide=function(){var t=this;this._mouseIsOver||this._isDragging||this._hideTimeout.cancelAndSet(function(){return t._hide()},500)},i}(_i)),Ai=function(){function t(t,e,i,n){this.mounted=!1,this.host=t;var o=document.createElement("div");Ge(o,"nila-grid-header-cell"),i.sortable&&Ge(o,"sortable"),i.headerClass&&Ge(o,i.headerClass),this.width=i.width,o.style.width=this.width+"px",this.left=n,this.right=this.left+this.width,this.domNode=o;var r=document.createElement("span");r.innerText=i.name,o.appendChild(r)}return t.prototype.mount=function(t){this.mounted=!0,t&&t.mounted?this.host.insertBefore(this.domNode,t.domNode):this.host.appendChild(this.domNode)},t.prototype.updateSortingDirection=function(t){$e(this.domNode,"asc","desc"),Ge(this.domNode,t)},t.prototype.unmount=function(){this.mounted=!1,this.host.removeChild(this.domNode)},t.prototype.dispose=function(){this.mounted=!1,this.domNode.remove()},t}(),Mi=function(){function t(t){this.ctx=t,this.cellCache=Object.create(null),this.lastRenderLeft=0,this.lastRenderWidth=0;var e=document.createElement("div");Ge(e,"nila-grid-header"),this.domNode=e,this.ctx.options.showHeaderRow?this.ctx.options.headerRowHeight&&(this.domNode.style.height=this.ctx.options.headerRowHeight+"px"):(this.domNode.style.visibility="hidden",this.domNode.style.display="none")}return t.prototype.render=function(t,e){if(!e)return{mounted:[],margin:0};var i,n,o=t,r=t+e,s=this.lastRenderLeft+this.lastRenderWidth;for(i=this.indexAfter(r)-1,n=this.indexAt(Math.max(s,o));i>=n;i--)this.mountCell(i);for(i=Math.min(this.indexAt(this.lastRenderLeft),this.indexAfter(r))-1,n=this.indexAt(o);i>=n;i--)this.mountCell(i);for(i=this.indexAt(this.lastRenderLeft),n=Math.min(this.indexAt(o),this.indexAfter(s));i<n;i++)this.unmountCell(i);for(i=Math.max(this.indexAfter(r),this.indexAt(this.lastRenderLeft)),n=this.indexAfter(s);i<n;i++)this.unmountCell(i);var l=this.indexAt(o),h=this.cellCache[l],u=_t(h.left-o,h.width,-h.width);return this.domNode.style.left=u+"px",this.lastRenderLeft=o,this.lastRenderWidth=r-o,{mounted:Object.keys(this.cellCache),margin:u}},t.prototype.updateSortingDirection=function(t,e){var i=this.cellCache[t];i&&i.updateSortingDirection(e)},t.prototype.mountTo=function(t){var e=st(t);t.appendChild(this.domNode),this.render(0,e)},t.prototype.invalidate=function(){var t=this;Object.keys(this.cellCache).forEach(function(e){t.unmountCell(e)}),this.cellCache=Object.create(null),this.lastRenderWidth=0,this.lastRenderWidth=0},t.prototype.getItemLeft=function(t){if(0===t)return 0;for(var e=0,i=0;i<t;i++)e+=this.ctx.columns[i].width;return e},t.prototype.mountCell=function(t){var e=this.cellCache[t];return e||(e=new Ai(this.domNode,t,this.ctx.columns[t],this.getItemLeft(t)),this.cellCache[t]=e),!e.mounted&&(this.ctx.options.showHeaderRow&&e.mount(this.cellCache[t+1]),!0)},t.prototype.unmountCell=function(t){var e=this.cellCache[t];return e&&(e.dispose(),delete this.cellCache[t]),!0},t.prototype.indexAt=function(t){for(var e,i=0,n=this.ctx.columns.length-1;i<n;){e=Math.floor((i+n)/2);var o=this.getItemLeft(e);if(t<o)n=e;else{if(!(t>=o+this.ctx.columns[e].width))return e;if(i===e)break;i=e}}return this.ctx.columns.length-1},t.prototype.indexAfter=function(t){return Math.min(this.indexAt(t)+1,this.ctx.columns.length)},t.prototype.dispose=function(){this.domNode.remove()},t}(),Oi=function(){function t(t,e){this.host=t,this.width=e,this.mounted=!1,this.prevSlibing=null,this.nextSlibing=null,this._active=!1;var i=document.createElement("div");i.className="nila-grid-cell",i.style.width=this.width+"px",this.domNode=i}return t.prototype.mountBefore=function(t){void 0===t&&(t=null),this.nextSlibing=t,t?(t.prevSlibing=this,this.host.insertBefore(this.domNode,t.domNode)):this.host.appendChild(this.domNode),this.mounted=!0,this.render()},t.prototype.mountAfter=function(t){if(void 0===t&&(t=null),this.prevSlibing=t,t){t.nextSlibing=this;var e=t.domNode.nextElementSibling;e?this.host.insertBefore(this.domNode,e):this.host.appendChild(this.domNode)}else this.host.appendChild(this.domNode);this.mounted=!0,this.render()},t.prototype.setActive=function(t){this._active!==t&&(this._active=t,t?Ge(this.domNode,"active"):Qe(this.domNode,"active"))},t.prototype.render=function(){var t=this.getComponent();t&&he.render(t,this.domNode)},t.prototype.dispose=function(){this.mounted=!1,he.unmountComponentAtNode(this.domNode),this.domNode.remove(),this.prevSlibing&&(this.prevSlibing.nextSlibing=this.nextSlibing),this.nextSlibing&&(this.nextSlibing.prevSlibing=this.prevSlibing),this.nextSlibing=null,this.prevSlibing=null,this.domNode.remove()},t}(),Pi=function(e){function i(t,i){var n=e.call(this,t,i)||this;return Ge(n.domNode,"empty-cell"),n}return t(i,e),i.prototype.getComponent=function(){return null},i}(Oi),ki=function(e){function i(t,i,n,o){var r=e.call(this,t,i)||this;return r.datum=n,r.col=o,r.value=n[o.field],r.formatter=o.formatter,Ge(r.domNode,"data-cell"),o.cssClass&&Ge(r.domNode,o.cssClass),r}return t(i,e),i.prototype.getComponent=function(){return this.formatter(this.value,this.col,this.datum)},i}(Oi),Li=function(e){function i(t,i,n,o,r){var s=e.call(this,t,i)||this;return s.key=n,s.value=o,s.type=r,Ge(s.domNode,"aggregation-cell"),s}return t(i,e),i.prototype.getComponent=function(){return L(this.key,this.value,this.type)},i}(Oi),Ti=function(e){function i(t,i,n,o,r){var s=e.call(this,t,i)||this;return s.data=n,s.formatter=o,s.config=r,s.mounted=!1,Ge(s.domNode,"merged-cell"),s}return t(i,e),i.prototype.getComponent=function(){return this.formatter(this.data,this.config)},i}(Oi),Ki=function(){function t(t,e){this.host=t,this.ctx=e,this.mounted=!1,this.prevSlibing=null,this.nextSlibing=null,this.hasActive=!1;var i=document.createElement("div");Ge(i,"nila-grid-row"),this.domNode=i,this.ctx.options.rowHeight&&(this.domNode.style.height=this.ctx.options.rowHeight+"px")}return t.prototype.updateRowIndex=function(t){this.domNode.dataset.index=t.toString()},t.prototype.mountBefore=function(t){void 0===t&&(t=null),this.nextSlibing=t,t?(t.prevSlibing=this,this.host.insertBefore(this.domNode,t.domNode)):this.host.appendChild(this.domNode),this.mounted=!0},t.prototype.mountAfter=function(t){this.prevSlibing=t,t.nextSlibing=this;var e=t.domNode.nextElementSibling;e?this.host.insertBefore(this.domNode,e):this.host.appendChild(this.domNode),this.mounted=!0},t.prototype.mount=function(){this.mounted=!0,this.host.appendChild(this.domNode)},t.prototype.unmount=function(){this.prevSlibing=null,this.nextSlibing=null,this.host.removeChild(this.domNode),this.mounted=!1},t.prototype.setActiveCells=function(t,e){console.log(t,e)},t.prototype.dispose=function(){this.mounted=!1,this.prevSlibing&&(this.prevSlibing.nextSlibing=this.nextSlibing),this.nextSlibing&&(this.nextSlibing.prevSlibing=this.prevSlibing),this.nextSlibing=null,this.prevSlibing=null,this.domNode.remove()},t}(),zi=function(e){function i(t,i,n){var o=e.call(this,t,i)||this;return o.data=n,o.keyOfMounted=[],o.mountedCells=[],o.activeFrom=-1,o.activeTo=-1,o}return t(i,e),i.prototype.updateCell=function(t,e){var i=this,n=t.filter(function(t){return i.keyOfMounted.indexOf(t)>-1});if(n.length){var o=n[0],r=n[n.length-1],s=t[0],l=t[t.length-1],h=t.length;if(o===s){for(var u=this.keyOfMounted.indexOf(o),a=0;a<u;)this.mountedCells.shift().dispose(),a++;for(c=n.length;c<h;){p=this.ctx.columns[t[c]];(f=new ki(this.domNode,p.width,this.data,p)).mountAfter(this.mountedCells[this.mountedCells.length-1]),this.mountedCells.push(f),c++}}else if(r===l){for(var u=this.keyOfMounted.indexOf(r),a=this.mountedCells.length-1;a>u;)this.mountedCells.pop().dispose(),a--;for(var c=h-n.length-1;c>=0;){p=this.ctx.columns[t[c]];(f=new ki(this.domNode,p.width,this.data,p)).mountBefore(this.mountedCells[0]),this.mountedCells.unshift(f),c--}}}else{for(;this.mountedCells.length;)this.mountedCells.pop().dispose();for(var d=0,h=t.length;d<h;d++){var p=this.ctx.columns[t[d]],f=new ki(this.domNode,p.width,this.data,p);f.mountAfter(this.mountedCells[this.mountedCells.length-1]),this.mountedCells.push(f)}}this.keyOfMounted=t.slice(),this.setActiveCells(this.activeFrom,this.activeTo)},i.prototype.invalidate=function(){for(;this.mountedCells.length;)this.mountedCells.pop().dispose();this.keyOfMounted.length=0},i.prototype.setActiveCells=function(t,e){if(this.activeFrom=t,this.activeTo=e,-1===t&&-1===e){this.hasActive=!1;for(var i=0,n=this.mountedCells;i<n.length;i++)n[i].setActive(!1)}else{this.hasActive=!0;for(var o=0,r=this.keyOfMounted.length;o<r;o++){var s=this.keyOfMounted[o],l=parseInt(s);l>=t&&l<=e?this.mountedCells[o].setActive(!0):this.mountedCells[o].setActive(!1)}}},i.prototype.toString=function(){return JSON.stringify(this.data)},i.prototype.dispose=function(){e.prototype.dispose.call(this),this.invalidate()},i}(Ki),Ui=function(e){function i(t,i,n){var o=e.call(this,t,i)||this;return o.group=n,o}return t(i,e),i.prototype.updateCell=function(t,e){if(t.indexOf("0")>-1){if(!this.cell){var i=this.ctx.model.getGrouping(this.group.level);this.cell=new Ti(this.domNode,-1,this.group,i.formatter,i),this.cell.mountAfter(null)}}else this.cell&&(this.cell.dispose(),this.cell=null)},i.prototype.invalidate=function(){this.cell&&(this.cell.dispose(),this.cell=null)},i}(Ki),Wi=function(e){function i(t,i,n){var o=e.call(this,t,i)||this;return o.groupTotals=n,o.keyOfMounted=[],o.mountedCells=[],o}return t(i,e),i.prototype.updateCell=function(t,e){var i=this,n=t.filter(function(t){return i.keyOfMounted.indexOf(t)>-1});if(n.length){var o=n[0],r=n[n.length-1],s=t[0],l=t[t.length-1],h=t.length;if(o===s){for(var u=this.keyOfMounted.indexOf(o),a=0;a<u;)this.mountedCells.shift().dispose(),a++;for(p=n.length;p<h;){var c=this.ctx.columns[t[p]],d=void 0;(d=(m=this.groupTotals.getByField(c.field))?new Li(this.domNode,c.width,m.field,m.value,m.type):new Pi(this.domNode,c.width)).mountAfter(this.mountedCells[this.mountedCells.length-1]),this.mountedCells.push(d),p++}}else if(r===l){for(var u=this.keyOfMounted.indexOf(r),a=this.mountedCells.length-1;a>u;)this.mountedCells.pop().dispose(),a--;for(var p=h-n.length-1;p>=0;){var c=this.ctx.columns[t[p]],d=void 0;(d=(m=this.groupTotals.getByField(c.field))?new Li(this.domNode,c.width,m.field,m.value,m.type):new Pi(this.domNode,c.width)).mountBefore(this.mountedCells[0]),this.mountedCells.unshift(d),p--}}}else{for(;this.mountedCells.length;)this.mountedCells.pop().dispose();for(var f=0,h=t.length;f<h;f++){var c=this.ctx.columns[t[f]],m=this.groupTotals.getByField(c.field),d=void 0;(d=m?new Li(this.domNode,c.width,m.field,m.value,m.type):new Pi(this.domNode,c.width)).mountAfter(this.mountedCells[this.mountedCells.length-1]),this.mountedCells.push(d)}}this.keyOfMounted=t.slice()},i.prototype.invalidate=function(){for(;this.mountedCells.length;)this.mountedCells.pop().dispose();this.keyOfMounted.length=0},i.prototype.dispose=function(){e.prototype.dispose.call(this),this.invalidate()},i}(Ki),Fi=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return t(i,e),i.prototype.updateCell=function(t,e){},i.prototype.invalidate=function(){},i}(Ki);!function(t){t[t.Unknown=0]="Unknown",t[t.Backspace=1]="Backspace",t[t.Tab=2]="Tab",t[t.Enter=3]="Enter",t[t.Shift=4]="Shift",t[t.Ctrl=5]="Ctrl",t[t.Alt=6]="Alt",t[t.PauseBreak=7]="PauseBreak",t[t.CapsLock=8]="CapsLock",t[t.Escape=9]="Escape",t[t.Space=10]="Space",t[t.PageUp=11]="PageUp",t[t.PageDown=12]="PageDown",t[t.End=13]="End",t[t.Home=14]="Home",t[t.LeftArrow=15]="LeftArrow",t[t.UpArrow=16]="UpArrow",t[t.RightArrow=17]="RightArrow",t[t.DownArrow=18]="DownArrow",t[t.Insert=19]="Insert",t[t.Delete=20]="Delete",t[t.KEY_0=21]="KEY_0",t[t.KEY_1=22]="KEY_1",t[t.KEY_2=23]="KEY_2",t[t.KEY_3=24]="KEY_3",t[t.KEY_4=25]="KEY_4",t[t.KEY_5=26]="KEY_5",t[t.KEY_6=27]="KEY_6",t[t.KEY_7=28]="KEY_7",t[t.KEY_8=29]="KEY_8",t[t.KEY_9=30]="KEY_9",t[t.KEY_A=31]="KEY_A",t[t.KEY_B=32]="KEY_B",t[t.KEY_C=33]="KEY_C",t[t.KEY_D=34]="KEY_D",t[t.KEY_E=35]="KEY_E",t[t.KEY_F=36]="KEY_F",t[t.KEY_G=37]="KEY_G",t[t.KEY_H=38]="KEY_H",t[t.KEY_I=39]="KEY_I",t[t.KEY_J=40]="KEY_J",t[t.KEY_K=41]="KEY_K",t[t.KEY_L=42]="KEY_L",t[t.KEY_M=43]="KEY_M",t[t.KEY_N=44]="KEY_N",t[t.KEY_O=45]="KEY_O",t[t.KEY_P=46]="KEY_P",t[t.KEY_Q=47]="KEY_Q",t[t.KEY_R=48]="KEY_R",t[t.KEY_S=49]="KEY_S",t[t.KEY_T=50]="KEY_T",t[t.KEY_U=51]="KEY_U",t[t.KEY_V=52]="KEY_V",t[t.KEY_W=53]="KEY_W",t[t.KEY_X=54]="KEY_X",t[t.KEY_Y=55]="KEY_Y",t[t.KEY_Z=56]="KEY_Z",t[t.Meta=57]="Meta",t[t.ContextMenu=58]="ContextMenu",t[t.F1=59]="F1",t[t.F2=60]="F2",t[t.F3=61]="F3",t[t.F4=62]="F4",t[t.F5=63]="F5",t[t.F6=64]="F6",t[t.F7=65]="F7",t[t.F8=66]="F8",t[t.F9=67]="F9",t[t.F10=68]="F10",t[t.F11=69]="F11",t[t.F12=70]="F12",t[t.F13=71]="F13",t[t.F14=72]="F14",t[t.F15=73]="F15",t[t.F16=74]="F16",t[t.F17=75]="F17",t[t.F18=76]="F18",t[t.F19=77]="F19",t[t.NumLock=78]="NumLock",t[t.ScrollLock=79]="ScrollLock",t[t.US_SEMICOLON=80]="US_SEMICOLON",t[t.US_EQUAL=81]="US_EQUAL",t[t.US_COMMA=82]="US_COMMA",t[t.US_MINUS=83]="US_MINUS",t[t.US_DOT=84]="US_DOT",t[t.US_SLASH=85]="US_SLASH",t[t.US_BACKTICK=86]="US_BACKTICK",t[t.US_OPEN_SQUARE_BRACKET=87]="US_OPEN_SQUARE_BRACKET",t[t.US_BACKSLASH=88]="US_BACKSLASH",t[t.US_CLOSE_SQUARE_BRACKET=89]="US_CLOSE_SQUARE_BRACKET",t[t.US_QUOTE=90]="US_QUOTE",t[t.OEM_8=91]="OEM_8",t[t.OEM_102=92]="OEM_102",t[t.NUMPAD_0=93]="NUMPAD_0",t[t.NUMPAD_1=94]="NUMPAD_1",t[t.NUMPAD_2=95]="NUMPAD_2",t[t.NUMPAD_3=96]="NUMPAD_3",t[t.NUMPAD_4=97]="NUMPAD_4",t[t.NUMPAD_5=98]="NUMPAD_5",t[t.NUMPAD_6=99]="NUMPAD_6",t[t.NUMPAD_7=100]="NUMPAD_7",t[t.NUMPAD_8=101]="NUMPAD_8",t[t.NUMPAD_9=102]="NUMPAD_9",t[t.NUMPAD_MULTIPLY=103]="NUMPAD_MULTIPLY",t[t.NUMPAD_ADD=104]="NUMPAD_ADD",t[t.NUMPAD_SEPARATOR=105]="NUMPAD_SEPARATOR",t[t.NUMPAD_SUBTRACT=106]="NUMPAD_SUBTRACT",t[t.NUMPAD_DECIMAL=107]="NUMPAD_DECIMAL",t[t.NUMPAD_DIVIDE=108]="NUMPAD_DIVIDE",t[t.KEY_IN_COMPOSITION=109]="KEY_IN_COMPOSITION",t[t.ABNT_C1=110]="ABNT_C1",t[t.ABNT_C2=111]="ABNT_C2",t[t.MAX_VALUE=112]="MAX_VALUE"}(wi||(wi={}));var Ii=function(){function t(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}return t.prototype.define=function(t,e){this._keyCodeToStr[t]=e,this._strToKeyCode[e.toLowerCase()]=t},t.prototype.keyCodeToStr=function(t){return this._keyCodeToStr[t]},t.prototype.strToKeyCode=function(t){return this._strToKeyCode[t.toLowerCase()]||0},t}(),Hi=new Ii,Yi=new Ii,Bi=new Ii;!function(){function t(t,e,i,n){void 0===i&&(i=e),void 0===n&&(n=i),Hi.define(t,e),Yi.define(t,i),Bi.define(t,n)}t(0,"unknown"),t(1,"Backspace"),t(2,"Tab"),t(3,"Enter"),t(4,"Shift"),t(5,"Ctrl"),t(6,"Alt"),t(7,"PauseBreak"),t(8,"CapsLock"),t(9,"Escape"),t(10,"Space"),t(11,"PageUp"),t(12,"PageDown"),t(13,"End"),t(14,"Home"),t(15,"LeftArrow","Left"),t(16,"UpArrow","Up"),t(17,"RightArrow","Right"),t(18,"DownArrow","Down"),t(19,"Insert"),t(20,"Delete"),t(21,"0"),t(22,"1"),t(23,"2"),t(24,"3"),t(25,"4"),t(26,"5"),t(27,"6"),t(28,"7"),t(29,"8"),t(30,"9"),t(31,"A"),t(32,"B"),t(33,"C"),t(34,"D"),t(35,"E"),t(36,"F"),t(37,"G"),t(38,"H"),t(39,"I"),t(40,"J"),t(41,"K"),t(42,"L"),t(43,"M"),t(44,"N"),t(45,"O"),t(46,"P"),t(47,"Q"),t(48,"R"),t(49,"S"),t(50,"T"),t(51,"U"),t(52,"V"),t(53,"W"),t(54,"X"),t(55,"Y"),t(56,"Z"),t(57,"Meta"),t(58,"ContextMenu"),t(59,"F1"),t(60,"F2"),t(61,"F3"),t(62,"F4"),t(63,"F5"),t(64,"F6"),t(65,"F7"),t(66,"F8"),t(67,"F9"),t(68,"F10"),t(69,"F11"),t(70,"F12"),t(71,"F13"),t(72,"F14"),t(73,"F15"),t(74,"F16"),t(75,"F17"),t(76,"F18"),t(77,"F19"),t(78,"NumLock"),t(79,"ScrollLock"),t(80,";",";","OEM_1"),t(81,"=","=","OEM_PLUS"),t(82,",",",","OEM_COMMA"),t(83,"-","-","OEM_MINUS"),t(84,".",".","OEM_PERIOD"),t(85,"/","/","OEM_2"),t(86,"`","`","OEM_3"),t(110,"ABNT_C1"),t(111,"ABNT_C2"),t(87,"[","[","OEM_4"),t(88,"\\","\\","OEM_5"),t(89,"]","]","OEM_6"),t(90,"'","'","OEM_7"),t(91,"OEM_8"),t(92,"OEM_102"),t(93,"NumPad0"),t(94,"NumPad1"),t(95,"NumPad2"),t(96,"NumPad3"),t(97,"NumPad4"),t(98,"NumPad5"),t(99,"NumPad6"),t(100,"NumPad7"),t(101,"NumPad8"),t(102,"NumPad9"),t(103,"NumPad_Multiply"),t(104,"NumPad_Add"),t(105,"NumPad_Separator"),t(106,"NumPad_Subtract"),t(107,"NumPad_Decimal"),t(108,"NumPad_Divide")}();var ji;!function(t){function e(t){return Hi.keyCodeToStr(t)}function i(t){return Hi.strToKeyCode(t)}function n(t){return Yi.keyCodeToStr(t)}function o(t){return Bi.keyCodeToStr(t)}function r(t){return Yi.strToKeyCode(t)||Bi.strToKeyCode(t)}t.toString=e,t.fromString=i,t.toUserSettingsUS=n,t.toUserSettingsGeneral=o,t.fromUserSettings=r}(ji||(ji={}));var Vi;!function(t){t[t.CtrlCmd=2048]="CtrlCmd",t[t.Shift=1024]="Shift",t[t.Alt=512]="Alt",t[t.WinCtrl=256]="WinCtrl",t[t.KeyCode=255]="KeyCode"}(Vi||(Vi={}));var Gi;!function(t){t[t.CtrlCmd=2048]="CtrlCmd",t[t.Shift=1024]="Shift",t[t.Alt=512]="Alt",t[t.WinCtrl=256]="WinCtrl"}(Gi||(Gi={}));var Xi;!function(t){t[t.Simple=1]="Simple",t[t.Chord=2]="Chord"}(Xi||(Xi={}));var Qi=function(){function t(t,e,i,n,o){this.type=1,this.ctrlKey=t,this.shiftKey=e,this.altKey=i,this.metaKey=n,this.keyCode=o}return t.prototype.equals=function(t){return 1===t.type&&(this.ctrlKey===t.ctrlKey&&this.shiftKey===t.shiftKey&&this.altKey===t.altKey&&this.metaKey===t.metaKey&&this.keyCode===t.keyCode)},t.prototype.getHashCode=function(){return""+(this.ctrlKey?"1":"0")+(this.shiftKey?"1":"0")+(this.altKey?"1":"0")+(this.metaKey?"1":"0")+this.keyCode},t.prototype.isModifierKey=function(){return 0===this.keyCode||5===this.keyCode||57===this.keyCode||6===this.keyCode||4===this.keyCode},t.prototype.isDuplicateModifierCase=function(){return this.ctrlKey&&5===this.keyCode||this.shiftKey&&4===this.keyCode||this.altKey&&6===this.keyCode||this.metaKey&&57===this.keyCode},t}(),$i=new Array(230),qi=new Array(112);!function(){function t(t,e){$i[t]=e,qi[e]=t}for(var e=0;e<qi.length;e++)qi[e]=-1;t(3,7),t(8,1),t(9,2),t(13,3),t(16,4),t(17,5),t(18,6),t(19,7),t(20,8),t(27,9),t(32,10),t(33,11),t(34,12),t(35,13),t(36,14),t(37,15),t(38,16),t(39,17),t(40,18),t(45,19),t(46,20),t(48,21),t(49,22),t(50,23),t(51,24),t(52,25),t(53,26),t(54,27),t(55,28),t(56,29),t(57,30),t(65,31),t(66,32),t(67,33),t(68,34),t(69,35),t(70,36),t(71,37),t(72,38),t(73,39),t(74,40),t(75,41),t(76,42),t(77,43),t(78,44),t(79,45),t(80,46),t(81,47),t(82,48),t(83,49),t(84,50),t(85,51),t(86,52),t(87,53),t(88,54),t(89,55),t(90,56),t(93,58),t(96,93),t(97,94),t(98,95),t(99,96),t(100,97),t(101,98),t(102,99),t(103,100),t(104,101),t(105,102),t(106,103),t(107,104),t(108,105),t(109,106),t(110,107),t(111,108),t(112,59),t(113,60),t(114,61),t(115,62),t(116,63),t(117,64),t(118,65),t(119,66),t(120,67),t(121,68),t(122,69),t(123,70),t(124,71),t(125,72),t(126,73),t(127,74),t(128,75),t(129,76),t(130,77),t(144,78),t(145,79),t(186,80),t(187,81),t(188,82),t(189,83),t(190,84),t(191,85),t(192,86),t(193,110),t(194,111),t(219,87),t(220,88),t(221,89),t(222,90),t(223,91),t(226,92),t(229,109),Ee?t(91,57):Re?(t(59,80),t(107,81),t(109,83),We&&t(224,57)):De&&(t(91,57),We?t(93,57):t(92,57))}();var Zi=We?256:2048,Ji=We?2048:256,tn=function(){function t(t){var e=t;this.browserEvent=e,this.target=e.target,this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey,this.keyCode=vt(e),this.code=e.code,this.ctrlKey=this.ctrlKey||5===this.keyCode,this.altKey=this.altKey||6===this.keyCode,this.shiftKey=this.shiftKey||4===this.keyCode,this.metaKey=this.metaKey||57===this.keyCode,this._asKeybinding=this._computeKeybinding(),this._asRuntimeKeybinding=this._computeRuntimeKeybinding()}return t.prototype.preventDefault=function(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()},t.prototype.stopPropagation=function(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()},t.prototype.toKeybinding=function(){return this._asRuntimeKeybinding},t.prototype.equals=function(t){return this._asKeybinding===t},t.prototype._computeKeybinding=function(){var t=0;5!==this.keyCode&&4!==this.keyCode&&6!==this.keyCode&&57!==this.keyCode&&(t=this.keyCode);var e=0;return this.ctrlKey&&(e|=Zi),this.altKey&&(e|=512),this.shiftKey&&(e|=1024),this.metaKey&&(e|=Ji),e|=t},t.prototype._computeRuntimeKeybinding=function(){var t=0;return 5!==this.keyCode&&4!==this.keyCode&&6!==this.keyCode&&57!==this.keyCode&&(t=this.keyCode),new Qi(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,t)},t}(),en=function(){function t(t,e,i,n){this.container=t,this.ctx=i,this.options=n,this.mountedRows=[],this.shouldShowHorizonalScrollbar=!1,this.shouldShowVerticalScrollbar=!1,this.toDispose=[],this._onClick=new Lt,this._onKeyDown=new Lt,this.indexOfFirstMountedRow=-1,this.indexOfLastMountedRow=-1,this.createElement(t),e instanceof me&&this.registerDataListeners(e),this.toDispose.push(this._onClick),this.toDispose.push(this._onKeyDown)}return Object.defineProperty(t.prototype,"onClick",{get:function(){return this._onClick.event},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onKeyDown",{get:function(){return this._onKeyDown.event},enumerable:!0,configurable:!0}),t.prototype.registerViewListeners=function(){this.toDispose.push(J(this.rowsContainer,hi.CLICK,this.handleBodyClickEvent.bind(this))),this.toDispose.push(J(this.rowsContainer,hi.KEY_DOWN,this.handleBodyKeyDownEvent.bind(this))),this.toDispose.push(J(this.header.domNode,hi.CLICK,this.handleHeaderClickEvent.bind(this)))},t.prototype.handleHeaderClickEvent=function(t){for(var e=gt(t,this.rowsContainer).x,i=0,n=this.ctx.columns,o=0,r=0,s=n.length;r<s;r++)if((i+=n[r].width)>e){o=r;break}var l=n[o];if(l.sortable)switch(l.internalSortingDirection){case"asc":this.ctx.model.ds.setSorting([{accessor:l.field,comparer:l.sortable.comparer||function(t,e){return t-e}}]),l.internalSortingDirection="desc",this.header.updateSortingDirection(o,"desc");break;case"desc":this.ctx.model.ds.setSorting([]),l.internalSortingDirection="",this.header.updateSortingDirection(o,"");break;default:this.ctx.model.ds.setSorting([{accessor:l.field,comparer:l.sortable.comparer?function(t,e){return l.sortable.comparer(e,t)}:function(t,e){return e-t}}]),l.internalSortingDirection="asc",this.header.updateSortingDirection(o,"asc")}},t.prototype.handleBodyClickEvent=function(t){for(var e=gt(t,this.rowsContainer),i=e.x,n=e.y,o=Math.floor(n/this.ctx.options.rowHeight),r=0,s=this.ctx.columns,l=0,h=0,u=s.length;h<u;h++)if((r+=s[h].width)>i){l=h;break}this._onClick.fire({clientX:t.clientX,clientY:t.clientY,row:o+this.indexOfFirstMountedRow,column:s[l],data:this.ctx.model.get(o)})},t.prototype.handleBodyKeyDownEvent=function(t){this._onKeyDown.fire(new tn(t))},t.prototype.registerDataListeners=function(t){var e=this;this.toDispose.push(t.onRowsChanged(function(t){-1===e.indexOfFirstMountedRow&&-1===e.indexOfLastMountedRow?(e.scrollHeight=e.getTotalRowsHeight(),e.renderHorizonalChanges(st(e.body))):e.handlePatchs(t),e.setSelection(e.selection)}))},t.prototype.handleScroll=function(t){(t.heightChanged||t.scrollHeightChanged||t.scrollTopChanged)&&(this.renderVerticalChanges(t.height,t.scrollTop),this.scrollTop!=t.scrollTop&&this.scrollableElement.setScrollPosition({scrollTop:t.scrollTop})),(t.widthChanged||t.scrollWidthChanged||t.scrollLeftChanged)&&this.renderHorizonalChanges(t.width,t.scrollLeft),this.setSelection(this.selection)},t.prototype.invalidate=function(){this.invalidateAllRows(),this.header.invalidate()},t.prototype.invalidateRow=function(t){t<this.indexOfFirstMountedRow||t>this.indexOfLastMountedRow||this.mountedRows[t-this.indexOfFirstMountedRow].invalidate()},t.prototype.invalidateRows=function(t){for(var e=0,i=t.length;e<i;e++)this.invalidateRow(t[e])},t.prototype.invalidateAllRows=function(){for(;this.mountedRows.length;)this.mountedRows.pop().dispose()},t.prototype.createElement=function(t){if(this.domNode=t,this.header=new Mi(this.ctx),this.body=document.createElement("div"),this.body.className="nila-grid-body",K(this.ctx.options.viewportClass)&&this.ctx.options.viewportClass.length){var e=this.ctx.options.viewportClass.split(/\s+/i);Xe.apply(void 0,[this.body].concat(e))}var i=this.ctx.options.scrollbarSize;this.scrollableElement=new Di(this.body,{alwaysConsumeMouseWheel:!0,horizontal:this.options.showHorizonalScrollbar?3:2,vertical:this.options.showVerticalScrollbar?3:2,verticalScrollbarSize:i,horizontalScrollbarSize:i}),this.toDispose.push(this.scrollableElement),this.rowsContainer=document.createElement("div"),this.rowsContainer.tabIndex=-1,this.rowsContainer.className="nila-grid-rows",this.body.appendChild(this.rowsContainer),this.header.mountTo(this.domNode);var n=this.scrollableElement.getDomNode();this.domNode.appendChild(n);var o=this.ctx.options.showHeaderRow?this.ctx.options.headerRowHeight||lt(this.header.domNode):0;n.style.height=lt(this.domNode)-o+"px",this.registerViewListeners()},t.prototype.layout=function(t,e){var i=t||lt(this.body);i>this.container.clientHeight&&(this.shouldShowVerticalScrollbar=!0),this.viewHeight=i,this.scrollHeight=this.getTotalRowsHeight()||0;var n=e||st(this.body);n>this.container.clientWidth&&(this.shouldShowHorizonalScrollbar=!0),this.viewWidth=n,this.scrollWidth=this.getContentWidth()||0,this.renderHeader(n),this.renderVerticalChanges(i),this.renderHorizonalChanges(n)},t.prototype.getTotalRowsHeight=function(){return this.ctx.model.length*this.ctx.options.rowHeight},t.prototype.getContentWidth=function(){return s(this.ctx.columns,"width")},Object.defineProperty(t.prototype,"viewHeight",{get:function(){return this.scrollableElement.getScrollDimensions().height},set:function(t){this.scrollableElement.setScrollDimensions({height:t})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollHeight",{set:function(t){this.scrollableElement.setScrollDimensions({scrollHeight:t+(this.shouldShowHorizonalScrollbar?10:0)})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"viewWidth",{get:function(){return this.scrollableElement.getScrollDimensions().width},set:function(t){this.scrollableElement.setScrollDimensions({width:t})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollWidth",{set:function(t){this.scrollableElement.setScrollDimensions({scrollWidth:t})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollTop",{get:function(){return this.scrollableElement.getScrollPosition().scrollTop},set:function(t){this.scrollableElement.setScrollPosition({scrollTop:t})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollLeft",{set:function(t){var e=this.getContentWidth()+(this.shouldShowVerticalScrollbar?10:0);this.scrollableElement.setScrollDimensions({scrollWidth:e}),this.scrollableElement.setScrollPosition({scrollLeft:t})},enumerable:!0,configurable:!0}),t.prototype.renderVerticalChanges=function(t,e){if(void 0===e&&(e=0),t){var i=e+1,n=e+t,o=this.indexAt(i),r=this.indexAt(n);if(o!==this.indexOfFirstMountedRow||r!==this.indexOfLastMountedRow){var s=-1,l=-1;if(this.indexOfLastMountedRow<r)s=this.indexOfLastMountedRow+1;else for(h=this.indexOfLastMountedRow;h>r&&this.mountedRows.length;)this.mountedRows.pop().dispose(),h--;if(this.indexOfFirstMountedRow>o)l=this.indexOfFirstMountedRow-1;else for(var h=this.indexOfFirstMountedRow;h<o&&this.mountedRows.length;)this.mountedRows.shift().dispose(),h++;if(!this.ctx.model.length)return;for(this.mountedRows.length||(l=-1,s=o);s>-1&&s<=r;){var u=this.createRowByIndex(s);this.mountedRows.length?u.mountAfter(this.mountedRows[this.mountedRows.length-1]):u.mountBefore(null),this.renderRow(u),this.mountedRows.push(u),s++}for(;l>-1&&l>=o;){var a=this.createRowByIndex(l);this.mountedRows.length?a.mountBefore(this.mountedRows[0]):a.mountBefore(null),this.renderRow(a),this.mountedRows.unshift(a),l--}this.indexOfLastMountedRow=r,this.indexOfFirstMountedRow=o}var c=this.ctx.options.rowHeight,d=this.getRowTop(o)-i;this.rowsContainer.style.top=_t(d,c,-c)+"px"}},t.prototype.renderHorizonalChanges=function(t,e){void 0===e&&(e=0);var i=this.header.render(e,t),n=i.mounted,o=i.margin;this.memorizedMargin=o,this.memorizedMounted=n,this.rowsContainer.style.left=o+"px";for(var r=0,s=this.mountedRows.length;r<s;r++)this.renderRow(this.mountedRows[r])},t.prototype.renderHeader=function(t){var e=this.header.render(0,t),i=e.mounted,n=e.margin;this.memorizedMargin=n,this.memorizedMounted=i},t.prototype.renderRow=function(t){if(U(this.memorizedMounted)||U(this.memorizedMargin))throw new Error("not ready");t.updateCell(this.memorizedMounted,this.memorizedMargin)},t.prototype.handlePatchs=function(t){for(var e=this,i=[],n=0;n<this.indexOfFirstMountedRow;n++)i.push(null);for(var n=0,o=this.mountedRows.length;n<o;n++)(p=this.mountedRows[n]).unmount(),i[i.length]=p;for(var r=[],s=0,n=0;n<t.length;++n){var l=t[n];if(s!==l.oldPos&&r.push(i.slice(s,l.oldPos)),l.type===pe.Add){var h=l.items.map(function(t){return e.createRowByData(t)});r.push(h),s=l.oldPos}else{s=l.oldPos+l.items.length;for(var u=l.oldPos;u<s;u++){var a=i[u];a&&(a.dispose(),i[u]=null)}}}s!==i.length&&r.push(i.slice(s));for(var c=[].concat.apply([],r),d=Math.min(this.indexOfLastMountedRow,this.ctx.model.length-1),n=c.length;n<=d;n++){var p=this.createRowByIndex(n);c.push(p)}for(c=c.slice(this.indexOfFirstMountedRow,this.indexOfLastMountedRow+1),this.mountedRows.length=0;c.length;)(p=c.shift()).mounted||(p.mount(),this.renderRow(p)),this.mountedRows.push(p)},t.prototype.createRowByIndex=function(t){var e=this.ctx.model.get(t);return this.createRowByData(e)},t.prototype.createRowByData=function(t){return t instanceof ce?this.ctx.options.internalShowGroup?new Ui(this.rowsContainer,this.ctx,t):new Fi(this.rowsContainer,this.ctx):t instanceof ae?new Wi(this.rowsContainer,this.ctx,t):t?new zi(this.rowsContainer,this.ctx,t):new Fi(this.rowsContainer,this.ctx)},t.prototype.getRowTop=function(t){return t*this.ctx.options.rowHeight+(t?1:0)},t.prototype.indexAt=function(t){var e,i=0,n=this.ctx.model.length-1,o=this.ctx.options.rowHeight;if(0===t)return 0;if(t>o*n)return n;for(;i<n;){e=Math.floor((i+n)/2);var r=this.getRowTop(e);if(t<r)n=e;else{if(!(t>=r+o))return e;if(i===e)break;i=e}}return i},t.prototype.indexAfter=function(t){return Math.min(this.indexAt(t)+1,this.ctx.model.length)},t.prototype.setSelection=function(t){if(void 0===t&&(t=null),this.selection)for(var e=0,i=this.mountedRows;e<i.length;e++)i[e].setActiveCells(-1,-1);if(this.selection=t,t){var n=t.left,o=t.right,r=t.top;if(!(t.bottom<this.indexOfFirstMountedRow||r>this.indexOfLastMountedRow))for(var s=0,l=this.mountedRows.length;s<l;s++){var h=s+this.indexOfFirstMountedRow;h>=t.top&&h<=t.bottom&&this.mountedRows[s].setActiveCells(n,o)}}},t.prototype.getSelection=function(){return this.selection},t.prototype.revealRow=function(t){if(t>=this.ctx.model.length)throw new Error("");if(t<=this.indexOfFirstMountedRow)this.scrollTop=this.ctx.options.rowHeight*t;else if(t>=this.indexOfLastMountedRow){var e=t-this.indexOfLastMountedRow+1,i=this.scrollableElement.getScrollPosition().scrollTop;this.scrollTop=i+e*this.ctx.options.rowHeight}},t.prototype.dispose=function(){this.header.dispose(),this.scrollableElement.dispose(),this.domNode.remove(),u(this.toDispose),this.toDispose.length=0},t.counter=0,t}(),nn=function(e){function i(t){var i=e.call(this)||this;return i.container=t,i._onClick=new Lt,i._onKeyDown=new Lt,i.scrollableElement=new Di(t,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:2}),i._register(i.scrollableElement),i._register(i._onClick),i._register(i._onKeyDown),i}return t(i,e),Object.defineProperty(i.prototype,"onClick",{get:function(){return this._onClick.event},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"onKeyDown",{get:function(){return this._onKeyDown.event},enumerable:!0,configurable:!0}),i.prototype.layout=function(t,e){},i.prototype.handleScroll=function(t){},i.prototype.invalidate=function(){},i.prototype.invalidateRow=function(t){},i.prototype.invalidateRows=function(t){},i.prototype.invalidateAllRows=function(){},i.prototype.setSelection=function(t){void 0===t&&(t=null)},i.prototype.getSelection=function(){return null},i.prototype.revealRow=function(t){},i}(Rt),on=function(){function t(t){if(this.items=[],t instanceof me)this.ds=t;else{if(!T(t))throw new Error("Unsupport ds type");this.items=t.slice()}}return Object.defineProperty(t.prototype,"length",{get:function(){return this.ds?this.ds.length:this.items.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){return this.ds?this.ds.getRow(t):this.items[t]},t.prototype.getGrouping=function(t){return this.ds?this.ds.getGrouping(t):null},t}();return{Grid:function(){function t(e,i,n,o){void 0===o&&(o={}),this.container=e,this._onClick=new Lt,this._onKeyDown=new Lt,this.toDispose=[],this.installedPlugins=[],this.toDispose.push(this._onClick),this.toDispose.push(this._onKeyDown);var r="nila-grid-instance-"+t.counter++;Xe(this.container,"nila-grid",r),Ge(this.container,o.theme||"nila-light");var l=yt(o);this.model=new on(i);var h=St(n,l.defaultColumnWidth,l.defaultFormatter);wt(h,e.clientWidth);var u=document.createElement("style");u.appendChild(document.createTextNode("\n      ."+r+"  .nila-grid-cell { line-height: "+l.rowHeight+"px}\n      ."+r+"  .nila-grid-header-cell { line-height: "+l.headerRowHeight+"px}\n    ")),this.container.appendChild(u),this.leftColumns=h.filter(function(t){return t.pinned===oi.Left}),this.rightColumns=h.filter(function(t){return t.pinned===oi.Right}),this.centerColumns=h.filter(function(t){return!t.pinned});lt(this.container);var a=st(this.container);this.widthOfLeft=s(this.leftColumns,"width"),this.widthOfRight=s(this.rightColumns,"width"),this.widthOfCenter=a-this.widthOfLeft-this.widthOfRight;var c=document.createElement("div");this.container.appendChild(c),Xe(c,"nila-grid-part","left"),c.style.width=this.widthOfLeft+"px",c.style.position="absolute",c.style.top="0",c.style.left="0",c.style.bottom="0";var d=document.createElement("div");this.container.appendChild(d),Xe(d,"nila-grid-part","center"),d.style.position="absolute",d.style.top="0",d.style.left=this.widthOfLeft+"px",d.style.bottom="0",d.style.width=this.widthOfCenter+"px",this.leftColumns.length?this.left=new en(c,i,new ui(this.model,this.leftColumns,Nt({},l,{internalShowGroup:!0})),{showHorizonalScrollbar:!1,showVerticalScrollbar:!1}):this.left=new nn(c),this.centerColumns.length?this.center=new en(d,i,new ui(this.model,this.centerColumns,Nt({},l,{internalShowGroup:!1})),{showHorizonalScrollbar:!0,showVerticalScrollbar:!this.leftColumns.length&&!this.rightColumns.length}):this.center=new nn(d);var p=document.createElement("div");this.container.appendChild(p),Xe(p,"nila-grid-part","right"),p.style.width=this.widthOfRight+"px",p.style.position="absolute",p.style.top="0",p.style.right="0",p.style.bottom="0",this.rightColumns.length?this.right=new en(p,i,new ui(this.model,this.rightColumns,Nt({},l,{internalShowGroup:!1})),{showHorizonalScrollbar:!1,showVerticalScrollbar:!0}):this.right=new nn(p),this.left.layout(),this.center.layout(),this.right.layout(),this.registerListeners()}return Object.defineProperty(t.prototype,"onClick",{get:function(){return this._onClick.event},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onKeyDown",{get:function(){return this._onKeyDown.event},enumerable:!0,configurable:!0}),t.prototype.registerListeners=function(){var t=this;this.toDispose.push(this.center.scrollableElement.onScroll(function(e){var i=Nt({},e,{widthChanged:!1,scrollWidthChanged:!1,scrollLeftChanged:!1});t.left&&t.left.handleScroll(i),t.center.handleScroll(e),t.right&&t.right.handleScroll(i)})),this.toDispose.push(this.left.scrollableElement.onScroll(function(e){var i=Nt({},e,{widthChanged:!1,scrollWidthChanged:!1,scrollLeftChanged:!1});t.left.handleScroll(e),t.center&&t.center.handleScroll(i),t.right&&t.right.handleScroll(i)})),this.toDispose.push(this.right.scrollableElement.onScroll(function(e){var i=Nt({},e,{widthChanged:!1,scrollWidthChanged:!1,scrollLeftChanged:!1});t.left&&t.left.handleScroll(i),t.center&&t.center.handleScroll(i),t.right.handleScroll(e)})),this.toDispose.push(this.left.onClick(function(e){return t._onClick.fire(e)})),this.toDispose.push(this.left.onKeyDown(function(e){return t._onKeyDown.fire(e)})),this.toDispose.push(this.center.onClick(function(e){return t._onClick.fire(t.handleClickEvent(e,t.widthOfLeft))})),this.toDispose.push(this.center.onKeyDown(function(e){return t._onKeyDown.fire(e)})),this.toDispose.push(this.right.onClick(function(e){return t._onClick.fire(t.handleClickEvent(e,t.widthOfLeft,t.widthOfCenter))})),this.toDispose.push(this.right.onKeyDown(function(e){return t._onKeyDown.fire(e)}))},t.prototype.handleClickEvent=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);var n=Nt({},t);return i&&(n.clientX+=i),e&&(n.clientX+=e),n},t.prototype.getSelection=function(){var t=this.left.getSelection(),e=this.center.getSelection(),i=this.right.getSelection();if(!t&&!e&&!i)return null;var n;return t&&(n||(n=t)),e&&(n?(n.top=Math.min(n.top,e.top),n.bottom=Math.max(n.bottom,e.bottom),n.right=e.right+this.leftColumns.length):n=e),i&&(n?(n.top=Math.min(n.top,i.top),n.bottom=Math.max(n.bottom,i.bottom),n.right=e.right+this.rightColumns.length+this.leftColumns.length):n=i),n},t.prototype.handleRange=function(t,e,i,n){if(void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),!t)return[null,null,null];var o=t.top,r=t.right,s=t.bottom,l=t.left,h=Math.max(0,l-e),u=Math.min(r-e,i-1),a=Math.max(0,l-e-i),c=r-e-i;return[{top:o,bottom:s,left:l,right:Math.min(r,e-1)},{top:o,bottom:s,left:h,right:u},{top:o,bottom:s,left:a,right:c}]},t.prototype.setSelection=function(t){var e=this.handleRange(t,this.leftColumns.length,this.centerColumns.length,this.rightColumns.length),i=e[0],n=e[1],o=e[2];this.left.setSelection(i),this.center.setSelection(n),this.right.setSelection(o)},Object.defineProperty(t.prototype,"columns",{get:function(){return[].concat(this.leftColumns,this.centerColumns,this.rightColumns)},enumerable:!0,configurable:!0}),t.prototype.revealRow=function(t){this.left.revealRow(t),this.center.revealRow(t),this.right.revealRow(t)},t.prototype.install=function(t){var e=this;return t.activate(this),this.installedPlugins.push(t),{dispose:function(){e.installedPlugins=e.installedPlugins.filter(function(e){return e!==t}),t.deactivate()}}},t.prototype.dispose=function(){for(;this.installedPlugins.length;)this.installedPlugins.pop().deactivate();u(this.toDispose),this.toDispose.length=0},t.counter=0,t}(),DataView:me,AvgAggregator:_e,MinAggregator:ge,MaxAggregator:ve,SumAggregator:ye,CountAggregator:Se,React:le,ReactDOM:he}});
